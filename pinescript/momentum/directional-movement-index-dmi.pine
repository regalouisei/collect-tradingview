// This Pine Script™ code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// © Tiagorocha1989
//                              ████████╗ ████████╗  ████████╗  ███████╗   ██████╗        ██████╗   ██████╗   ██████╗ ██╗   ██╗ ████████╗
//                              ╚══██╔══╝ ╚══██╔══╝  ██╔═══██║  ██╔════╝  ██╔═══██╗       ██╔══██╗ ██╔═══██╗ ██╔════╝ ██║   ██║ ██╔═══██║
//                                 ██║       ██║     ████████║  ██║ ███║  ██║   ██║       ██████╔╝ ██║   ██║ ██║      ████████║ ████████║
//                                 ██║       ██║     ██╔═══██║  ██║  ██║  ██║   ██║       ██╔══██╗ ██║   ██║ ██║      ██║   ██║ ██╔═══██║
//                                 ██║    ████████╗  ██║   ██║  ███████║  ╚██████╔╝       ██║  ██║ ╚██████╔╝ ╚██████╗ ██║   ██║ ██║   ██║
//@version=6
indicator(title="Directional Movement Index", shorttitle="DMI →", format=format.price, precision=4)
//╔═════════════════════════╗
//║          Input          ║
//╚═════════════════════════╝
ADX_Val=input.bool(false,"ADX")
dmi_lenght = input.int(17, minval=1, title="DI Length")
adx_smooth = input.int(1, title="ADX Smoothing", minval=1)
[diplus, diminus, adx] = ta.dmi(dmi_lenght, adx_smooth)
isBull = diplus > diminus
Bull = ta.crossover(diplus,diminus)
Bear = ta.crossunder(diplus,diminus)
//╔════════════════════════╗
//║          Plot          ║
//╚════════════════════════╝
plot(ADX_Val ? adx : na, color=color.blue, title="ADX")
plot(diplus, color=#008000, linewidth = 3,title="+DI")
plot(diminus, color=#FF0000, linewidth = 3, title="-DI")
bgcolor(Bull ? color.new(#008000,60) : na)
bgcolor(Bear ? color.new(#FF0000,60) : na)
//╔════════════════════════╗
//║          VIEW          ║
//╚════════════════════════╝
var table DMI = table.new(position.middle_right, 1, 1, border_width = 1)
if barstate.islast
    table.cell(DMI, 0, 0, 
         text = isBull ? "↑ Bullish" : "↓ Bearish", 
         text_color = isBull ? #008000 : #FF0000,
         text_size = size.huge)

    label.new(bar_index + 5, ADX_Val ? adx : na, text = ADX_Val ? "ADX" : na, color = ADX_Val ? color.blue : na, style = label.style_label_left)
    label.new(bar_index + 5, diplus, text =  "DI +" , color = #008000, style = label.style_label_left)
    label.new(bar_index + 5, diminus, text =  "DI -" , color = #FF0000, style = label.style_label_left)
