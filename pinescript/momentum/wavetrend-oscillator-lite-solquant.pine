//@version=6
// ═══════════════════════════════════════════════════════════════════════════════
// SOLQUANT WAVETREND OSCILLATOR LITE
// ═══════════════════════════════════════════════════════════════════════════════
// Single-timeframe WaveTrend oscillator for identifying momentum extremes.
// Displays overbought/oversold zone detection with gradient fills and color-
// coded WT1/WT2 lines. Free version of WaveTrend Oscillator [SolQuant],
// offering the core oscillator without multi-timeframe overlays, chart signals,
// or the alignment dashboard.
// ═══════════════════════════════════════════════════════════════════════════════

indicator(title = 'WaveTrend Oscillator Lite [SolQuant]', shorttitle = 'WaveTrend Lite [SolQuant]', overlay = false)

//------------------------------------------------------------------------------
// INPUTS
//-----------------------------------------------------------------------------{
n1 = input(10, 'Channel Length', group = 'WaveTrend Settings')
n2 = input(21, 'Average Length', group = 'WaveTrend Settings')
obLevel1 = input(60, 'Over Bought Level 1', group = 'WaveTrend Settings')
obLevel2 = input(53, 'Over Bought Level 2', group = 'WaveTrend Settings')
osLevel1 = input(-60, 'Over Sold Level 1', group = 'WaveTrend Settings')
osLevel2 = input(-53, 'Over Sold Level 2', group = 'WaveTrend Settings')

//------------------------------------------------------------------------------
// COLORS
//-----------------------------------------------------------------------------{
color_bear = color.rgb(255, 20, 255)
color_bull = color.rgb(20, 165, 255)
color_bear_dark = color.rgb(144, 13, 144)
color_bull_dark = color.rgb(10, 83, 128)

// Extreme zone colors
color_extreme_overbought = color.rgb(255, 0, 0)
color_extreme_oversold = color.rgb(0, 255, 0)

//------------------------------------------------------------------------------
// WAVETREND CALCULATION
//-----------------------------------------------------------------------------{
ap = hlc3
esa = ta.ema(ap, n1)
d = ta.ema(math.abs(ap - esa), n1)
ci = (ap - esa) / (0.015 * d)
tci = ta.ema(ci, n2)

wt1 = tci
wt2 = ta.sma(wt1, 4)

//------------------------------------------------------------------------------
// LEVEL LINES
//-----------------------------------------------------------------------------{
middle_plot = plot(0, color = color.new(color.gray, 0))
plot(obLevel1, color = color.new(color_bear, 50))
plot(osLevel1, color = color.new(color_bull, 50))
obLevel2_plot = plot(obLevel2, color = color.new(color_bear, 50), linewidth = 1)
osLevel2_plot = plot(osLevel2, color = color.new(color_bull, 50), linewidth = 1)

//------------------------------------------------------------------------------
// WAVETREND LINE COLORING
//-----------------------------------------------------------------------------{
line_color = if wt1 > obLevel1 or wt2 > obLevel1
    color_extreme_overbought
else if wt1 < osLevel1 or wt2 < osLevel1
    color_extreme_oversold
else
    wt1 > wt2 ? color_bull : color_bear

//------------------------------------------------------------------------------
// WAVETREND PLOTS
//-----------------------------------------------------------------------------{
wt1_plot = plot(wt1, color = color.new(line_color, 0), linewidth = 2, title = "WT1")
wt2_plot = plot(wt2, color = color.new(line_color, 0), title = "WT2")

//------------------------------------------------------------------------------
// GRADIENT FILLS
//-----------------------------------------------------------------------------{
// Bullish gradient fill (above zero)
fill(middle_plot, wt1_plot,
     top_color = wt1 > 0 ? color.new(color_bull, 50) : na,
     bottom_color = wt1 > 0 ? color.new(color_bull_dark, 75) : na)

// Bearish gradient fill (below zero)
fill(wt2_plot, middle_plot,
     top_value = wt2 < 0 ? 0 : na,
     bottom_value = wt2 < 0 ? wt2 : na,
     top_color = wt2 < 0 ? color.new(color_bear_dark, 75) : na,
     bottom_color = wt2 < 0 ? color.new(color_bear, 50) : na)

// Fill between WT1 and WT2
fill_color = wt1 > wt2 ? color.new(color_bull_dark, 0) : color.new(color_bear_dark, 0)
fill(wt1_plot, wt2_plot, color = fill_color)

//------------------------------------------------------------------------------
// EXTREME ZONE FILLS
//-----------------------------------------------------------------------------{
obLevel1_plot = plot(obLevel1, color = na)
osLevel1_plot = plot(osLevel1, color = na)

// Red fill above obLevel1 (extreme overbought)
fill(obLevel1_plot, wt1_plot, color = wt1 > obLevel1 ? color.new(color_extreme_overbought, 0) : na)

// Green fill below osLevel1 (extreme oversold)
fill(osLevel1_plot, wt2_plot, color = wt2 < osLevel1 ? color.new(color_extreme_oversold, 0) : na)

//-----------------------------------------------------------------------------}
