//@version=6
indicator("5 (EMA/SMA) and VWMA by MoneyFarmer", overlay=true)

//────────────────────────────────────────────────────────────
// Helpers
//────────────────────────────────────────────────────────────
maSelect(series float s, int l, string t) =>
    t == "EMA" ? ta.ema(s, l) : ta.sma(s, l)

//────────────────────────────────────────────────────────────
//======================== INPUTS ============================
//────────────────────────────────────────────────────────────

// ---- Common source for MAs and VWMA ----
grpSrc = "Inputs • Sources"
srcClose = input.source(close, "Price Source", group=grpSrc)



// ---- MA lines: Each on one row (Enable • Type • Length • Color) ----
grpMA = "Inputs • Moving Averages (Inline controls)"
// MA1
en1   = input.bool(true,  "MA1",   group=grpMA, inline="ma1")
typ1  = input.string("EMA","",     options=["EMA","SMA"], group=grpMA, inline="ma1")
len1  = input.int(10,      "",      minval=1, group=grpMA, inline="ma1")
col1  = input.color(color.rgb(10, 241, 218), "", group=grpMA, inline="ma1")
// MA2
en2   = input.bool(true,  "MA2",   group=grpMA, inline="ma2")
typ2  = input.string("EMA","",     options=["EMA","SMA"], group=grpMA, inline="ma2")
len2  = input.int(20,     "",      minval=1, group=grpMA, inline="ma2")
col2  = input.color(color.rgb(255, 0, 0), "", group=grpMA, inline="ma2")
// MA3
en3   = input.bool(true,  "MA3",   group=grpMA, inline="ma3")
typ3  = input.string("EMA","",     options=["EMA","SMA"], group=grpMA, inline="ma3")
len3  = input.int(50,     "",      minval=1, group=grpMA, inline="ma3")
col3  = input.color(color.blue, "", group=grpMA, inline="ma3")
// MA4
en4   = input.bool(true,  "MA4",   group=grpMA, inline="ma4")
typ4  = input.string("EMA","",     options=["EMA","SMA"], group=grpMA, inline="ma4")
len4  = input.int(100,     "",      minval=1, group=grpMA, inline="ma4")
col4  = input.color(color.purple, "", group=grpMA, inline="ma4")
// MA5
en5   = input.bool(true,  "MA5",   group=grpMA, inline="ma5")
typ5  = input.string("EMA","",     options=["EMA","SMA"], group=grpMA, inline="ma5")
len5  = input.int(200,    "",      minval=1, group=grpMA, inline="ma5")
col5  = input.color(color.rgb(9, 8, 8), "", group=grpMA, inline="ma5")

// ---- VWMA: One row (Enable • Length • Color) ----
grpVW = "Inputs • VWMA (Inline controls)"
enVW  = input.bool(true, "VWMA", group=grpVW, inline="vw")
lenVW = input.int(20,    "",     minval=1, group=grpVW, inline="vw")
colVW = input.color(color.rgb(9, 21, 236), "", group=grpVW, inline="vw")


// Optional widths (kept separate so the “one line” per MA stays clean)
grpW = "Style • Line Widths"
w1   = input.int(2, "MA1 Width", minval=1, maxval=5, group=grpW)
w2   = input.int(2, "MA2 Width", minval=1, maxval=5, group=grpW)
w3   = input.int(2, "MA3 Width", minval=1, maxval=5, group=grpW)
w4   = input.int(2, "MA4 Width", minval=1, maxval=5, group=grpW)
w5   = input.int(2, "MA5 Width", minval=1, maxval=5, group=grpW)
wVW  = input.int(2, "VWMA Width",minval=1, maxval=5, group=grpW)

//────────────────────────────────────────────────────────────
//====================== CALCULATIONS ========================
//────────────────────────────────────────────────────────────
ma1 = maSelect(srcClose, len1, typ1)
ma2 = maSelect(srcClose, len2, typ2)
ma3 = maSelect(srcClose, len3, typ3)
ma4 = maSelect(srcClose, len4, typ4)
ma5 = maSelect(srcClose, len5, typ5)

vwmaLine = ta.vwma(srcClose, lenVW)

//────────────────────────────────────────────────────────────
//======================== PLOTS =============================
//────────────────────────────────────────────────────────────
plot(en1 ? ma1 : na, "MA1", color=col1, linewidth=w1)
plot(en2 ? ma2 : na, "MA2", color=col2, linewidth=w2)
plot(en3 ? ma3 : na, "MA3", color=col3, linewidth=w3)
plot(en4 ? ma4 : na, "MA4", color=col4, linewidth=w4)
plot(en5 ? ma5 : na, "MA5", color=col5, linewidth=w5)

plot(enVW ? vwmaLine : na, "VWMA", color=colVW, linewidth=wVW)
