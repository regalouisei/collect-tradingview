//@version=5
indicator("Beginner Trading Assistant (Educational)", overlay=true)

// === INPUTS ===
emaShortLen = input.int(50, "Short EMA Length")
emaLongLen  = input.int(200, "Long EMA Length")
rsiLen      = input.int(14, "RSI Length")
atrLen      = input.int(14, "ATR Length")
swingLen    = input.int(5, "Swing Length")

// === EMA TREND ===
emaShort = ta.ema(close, emaShortLen)
emaLong  = ta.ema(close, emaLongLen)

plot(emaShort, color=color.blue, title="EMA 50")
plot(emaLong, color=color.orange, title="EMA 200")

// === TREND CONDITIONS ===
upTrend   = emaShort > emaLong
downTrend = emaShort < emaLong

bgcolor(upTrend ? color.new(color.green, 90) : na)
bgcolor(downTrend ? color.new(color.red, 90) : na)

// === RSI MOMENTUM ===
rsi = ta.rsi(close, rsiLen)

strongBull = rsi > 55
strongBear = rsi < 45

// === ATR VOLATILITY ===
atr = ta.atr(atrLen)

// === SWING STRUCTURE ===
pivotHigh = ta.pivothigh(high, swingLen, swingLen)
pivotLow  = ta.pivotlow(low, swingLen, swingLen)

var float lastHigh = na
var float lastLow  = na

if not na(pivotHigh)
    lastHigh := pivotHigh

if not na(pivotLow)
    lastLow := pivotLow

bullishBreak = close > lastHigh
bearishBreak = close < lastLow

// === SIGNAL CONDITIONS (Educational Only) ===
bullSignal = upTrend and strongBull and bullishBreak
bearSignal = downTrend and strongBear and bearishBreak

plotshape(bullSignal, title="Bullish Setup",
     location=location.belowbar,
     style=shape.labelup,
     color=color.green,
     text="Trend + Momentum")

plotshape(bearSignal, title="Bearish Setup",
     location=location.abovebar,
     style=shape.labeldown,
     color=color.red,
     text="Trend + Momentum")

// === INFO TABLE ===
var table info = table.new(position.top_right, 1, 4)

if barstate.islast
    table.cell(info, 0, 0, "Trend: " + (upTrend ? "Uptrend" : downTrend ? "Downtrend" : "Sideways"))
    table.cell(info, 0, 1, "RSI: " + str.tostring(rsi, format.mintick))
    table.cell(info, 0, 2, "ATR: " + str.tostring(atr, format.mintick))
    table.cell(info, 0, 3, "Learn: Follow trend + wait structure break")
