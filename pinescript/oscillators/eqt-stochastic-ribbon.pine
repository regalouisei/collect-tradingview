//@version=5
indicator("Stochastic Oscillator", shorttitle="Stoch", format=format.price, precision=2, timeframe="", timeframe_gaps=true)

// Input Parameters
periodK = input.int(14, title="%K Length", minval=1)
smoothK = input.int(1, title="%K Smoothing", minval=1)
periodD = input.int(3, title="%D Smoothing", minval=1)
upperBand = input.int(80, title="Upper Band", minval=50, maxval=100)
lowerBand = input.int(20, title="Lower Band", minval=0, maxval=50)

// Stochastic Calculation
k = ta.sma(ta.stoch(close, high, low, periodK), smoothK)
d = ta.sma(k, periodD)

// Plotting
plot(k, title="%K", color=color.blue, linewidth=2)
plot(d, title="%D", color=color.orange, linewidth=2)

// Overbought/Oversold Bands
h0 = hline(upperBand, title="Upper Band", color=color.gray, linestyle=hline.style_dashed)
h1 = hline(lowerBand, title="Lower Band", color=color.gray, linestyle=hline.style_dashed)
fill(h0, h1, color=color.new(color.purple, 90), title="Background")

// Middle Line
hline(50, title="Middle Line", color=color.gray, linestyle=hline.style_dotted)
