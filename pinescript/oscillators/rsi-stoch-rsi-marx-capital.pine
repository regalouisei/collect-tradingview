// This Pine Script® code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// © Marx_Capital

//@version=6
indicator("RSI + STOCH RSI - Marx_Capital", shorttitle="MARX RSI+STOCH-RSI", overlay=false)

// ─────────────────────────────────────────────────────────────────────────────
// RSI
srcRsi   = input.source(close, "RSI Source")
lenRsi   = input.int(14, minval=1, title="RSI Length")
rsiVal   = ta.rsi(srcRsi, lenRsi)
plot(rsiVal, color=color.rgb(54, 194, 250), linewidth=2, title="RSI")

rsiOB = input.float(70, "RSI Overbought", step=0.1)
rsiOS = input.float(30, "RSI Oversold", step=0.1)
band1 = hline(rsiOB, "RSI OB", linestyle=hline.style_solid)
band0 = hline(rsiOS, "RSI OS", linestyle=hline.style_solid)
fill(band1, band0, color=color.new(color.purple, 80), title="RSI Zone")

// ─────────────────────────────────────────────────────────────────────────────
// Stoch RSI
smoothK     = input.int(3, minval=1, title="StochRSI Smooth K")
smoothD     = input.int(3, minval=1, title="StochRSI Smooth D")
lengthRSI   = input.int(14, minval=1, title="StochRSI RSI Length")
lengthStoch = input.int(14, minval=1, title="StochRSI Stoch Length")
srcStoch    = input.source(close, "StochRSI Source")

rsi1 = ta.rsi(srcStoch, lengthRSI)
k    = ta.sma(ta.stoch(rsi1, rsi1, rsi1, lengthStoch), smoothK)
d    = ta.sma(k, smoothD)

plot(k, color=color.white,  title="%K")
plot(d, color=color.orange, title="%D")

h0 = hline(80, "StochRSI OB")
h1 = hline(20, "StochRSI OS")
fill(h0, h1, color=color.new(color.black, 100), title="StochRSI Zone")

// ─────────────────────────────────────────────────────────────────────────────
// Extra Levels
groupExtra  = "Extra Levels"
showExtra   = input.bool(true, "Show extra levels", group=groupExtra)
styleInput  = input.string("Dotted", "Line style", options=["Solid", "Dotted", "Dashed"], group=groupExtra)
widthInput  = input.int(1, "Line width", minval=1, maxval=4, group=groupExtra)
col1        = input.color(color.gray, "line 1 color", group=groupExtra)
col2       = input.color(color.gray, "line 2 color", group=groupExtra)
col3      = input.color(color.gray, "line 3 color", group=groupExtra)

lvlStyle   = styleInput == "Solid" ? hline.style_solid : styleInput == "Dashed" ? hline.style_dashed : hline.style_dotted
lvlDisplay = showExtra ? display.all : display.none

hline(0,   "line 1",   color=col1,   linestyle=lvlStyle, linewidth=widthInput, display=lvlDisplay)
hline(50,  "line 2",  color=col2,  linestyle=lvlStyle, linewidth=widthInput, display=lvlDisplay)
hline(100, "line 3", color=col3, linestyle=lvlStyle, linewidth=widthInput, display=lvlDisplay)
