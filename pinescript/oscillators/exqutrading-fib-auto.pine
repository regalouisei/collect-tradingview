//@version=6
indicator("eXquTrading FIB (Auto) [DISABLED]", overlay=true, max_labels_count=500, max_lines_count=500, max_boxes_count=50)

//=====================================================
// 0) KİLİT: Script tamamen devre dışı
//=====================================================
runtime.error("Bu script devre disi birakildi. Kullanima kapali.")

// Aşağısı hiç çalışmayacak (TradingView burada durur)
//====================================================================
// 0) REPAINT / ÇALIŞMA MODU
//====================================================================
groupRepaint = "0) Repaint / Çalışma Modu"
earlySignal  = input.bool(false, "Erken Sinyal (Repaint Riski)", group=groupRepaint, tooltip="Kapalı: bar kapanışında. Açık: intrabar (REPAINT RİSKİ).")
doCalc       = earlySignal ? true : barstate.isconfirmed

//====================================================================
// 1) GÖRSEL AYARLAR
//====================================================================
groupVis = "1) Görsel Ayarlar"
showCloud      = input.bool(true,  "Cloud Göster", group=groupVis)
showEmaA       = input.bool(true,  "EMA A Göster", group=groupVis)
showEmaB       = input.bool(true,  "EMA B Göster", group=groupVis)
showTrendEma   = input.bool(true,  "Ana Trend EMA Göster", group=groupVis)
showFib        = input.bool(true,  "Fib Göster", group=groupVis)

emaAColor      = input.color(color.new(color.yellow, 0), "EMA A Renk", group=groupVis)
emaBColor      = input.color(color.new(color.orange, 0), "EMA B Renk", group=groupVis)
emaAWidth      = input.int(2, "EMA A Kalınlık", minval=1, maxval=5, group=groupVis)
emaBWidth      = input.int(2, "EMA B Kalınlık", minval=1, maxval=5, group=groupVis)

trendEmaColor  = input.color(color.new(color.aqua, 0), "Ana Trend EMA Renk", group=groupVis)
trendEmaWidth  = input.int(2, "Ana Trend EMA Kalınlık", minval=1, maxval=5, group=groupVis)

cloudLongCol   = input.color(color.new(color.green, 85), "Cloud LONG Renk", group=groupVis)
cloudShortCol  = input.color(color.new(color.red, 85),   "Cloud SHORT Renk", group=groupVis)
cloudNeutralCol= input.color(color.new(color.gray, 92),  "Cloud NÖTR Renk", group=groupVis)

buyLabelCol    = input.color(color.new(#00BFA5, 0), "BUY Etiket Renk", group=groupVis)
sellLabelCol   = input.color(color.new(#FF1744, 0), "SELL Etiket Renk", group=groupVis)
textLabelCol   = input.color(color.white, "Etiket Yazı Renk", group=groupVis)

//====================================================================
// 2) TREND: EMA144/169 CLOUD + ZONE
//====================================================================
groupTrend = "2) Cloud EMA Ayarları"
emaLenA    = input.int(144, "EMA A", group=groupTrend, minval=1)
emaLenB    = input.int(169, "EMA B", group=groupTrend, minval=1)

emaA    = ta.ema(close, emaLenA)
emaB    = ta.ema(close, emaLenB)
cloudHi = math.max(emaA, emaB)
cloudLo = math.min(emaA, emaB)
cloudMid = (cloudHi + cloudLo) * 0.5

zoneLong  = close > cloudHi
zoneShort = close < cloudLo
zoneDir   = zoneLong ? 1 : zoneShort ? -1 : 0

pA = plot(showEmaA ? emaA : na, "EMA A", color=emaAColor, linewidth=emaAWidth)
pB = plot(showEmaB ? emaB : na, "EMA B", color=emaBColor, linewidth=emaBWidth)

cloudFillCol =
     zoneDir == 1 ? cloudLongCol :
     zoneDir == -1 ? cloudShortCol :
     cloudNeutralCol

fill(pA, pB, color=(showCloud ? cloudFillCol : na))

//====================================================================
// 3) 8X OSİLATÖR - TREND UZLAŞTIRMA + FAST
//====================================================================
group8x = "3) 8X Osilatör Scalp"
min_onay         = input.int(4, title="Min. Gerekli Onay Sayısı", minval=1, maxval=8, group=group8x)
rsi_length       = input.int(14, title="RSI/MFI Periyodu", group=group8x)
cci_length       = input.int(20, title="CCI Periyodu", group=group8x)
mom_length       = input.int(10, title="Momentum Periyodu", group=group8x)
oversold         = input.int(25, title="RSI Aşırı Satım Seviyesi", minval=1, group=group8x)
overbought       = input.int(75, title="RSI Aşırı Alım Seviyesi", maxval=99, group=group8x)
obv_ema_length   = input.int(30, title="OBV EMA Periyodu", minval=1, group=group8x)

trend_ema_length = input.int(50, title="Ana Trend EMA Periyodu", minval=1, group=group8x)

volume_factor    = input.float(1.8, title="Hacim Onay Çarpanı", minval=1.0, group=group8x)

groupTF = "3A) Trend Filtresi"
trendMode = input.string("BOTH", "Trend Modu", options=["EMA", "CLOUD", "BOTH"], group=groupTF,
     tooltip="EMA: sadece Ana Trend EMA.\nCLOUD: sadece cloud üst/alt.\nBOTH: ikisi de aynı yönde olmalı (önerilen).")
blockInsideCloud = input.bool(true, "Cloud İçindeyken Sinyal Üretme", group=groupTF)

groupFast = "3B) Hızlı Mod (FAST)"
fastMode          = input.bool(true, "FAST Açık", group=groupFast)
fastRequireZone   = input.bool(true, "FAST: Cloud Yönü Şart", group=groupFast)
fastRequireBoth   = input.bool(true, "FAST: OBV + CCI birlikte", group=groupFast)
fastOnlyOnWeak    = input.bool(true, "FAST: Sadece Min Onay Yetmiyorsa", group=groupFast)

fastUseDispFilter = input.bool(true, "FAST: Displacement Filtresi", group=groupFast)
fastDispAtrLen    = input.int(14, "FAST ATR Len", minval=1, group=groupFast)
fastMinBodyAtr    = input.float(0.35, "FAST Min Gövde (ATR)", minval=0.0, step=0.05, group=groupFast)

groupSig = "3C) Sinyal / Etiket"
labelOffAtrK     = input.float(0.8, "Etiket Offset (ATR Katsayı)", minval=0.0, step=0.1, group=groupSig)
labelAtrLen      = input.int(14, "Etiket ATR Len", minval=1, group=groupSig)
labelOffMinTicks = input.int(0, "Min Offset (tick)", minval=0, group=groupSig)

cooldownBars     = input.int(3, "Sinyal Cooldown (bar)", minval=0, group=groupSig)

useDistFilter    = input.bool(true, "Cloud Mesafe Filtresi", group=groupSig)
distAtrLen       = input.int(14, "Mesafe ATR Len", minval=1, group=groupSig)
maxDistAtr       = input.float(1.2, "Max Mesafe (ATR)", minval=0.1, step=0.1, group=groupSig)

useImpulseFilter = input.bool(true, "Impulse Mum Yasağı", group=groupSig)
impAtrLen        = input.int(14, "Impulse ATR Len", minval=1, group=groupSig)
maxBodyAtr       = input.float(1.2, "Max Gövde (ATR)", minval=0.1, step=0.1, group=groupSig)

// ... (kalan kodların hepsi burada dursa da çalışmayacak)
