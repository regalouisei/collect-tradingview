//@version=6
indicator("RSI Min/Max Tracker - HD Algo", overlay=false)

// RSI Inputs
rsi_length = input.int(14, title="RSI Length", minval=1)
rsi_source = input.source(close, title="RSI Source")

// Calculate RSI
rsi_value = ta.rsi(rsi_source, rsi_length)

// Track minimum and maximum RSI values
var float min_rsi = na
var float max_rsi = na

// Update min and max RSI
if na(min_rsi) or rsi_value < min_rsi
    min_rsi := rsi_value

if na(max_rsi) or rsi_value > max_rsi
    max_rsi := rsi_value

// Plot RSI
plot(rsi_value, title="RSI", color=color.blue, linewidth=2)

// Plot Min and Max RSI
plot(min_rsi, title="Lowest RSI", color=color.red, linewidth=1, style=plot.style_line)
plot(max_rsi, title="Highest RSI", color=color.green, linewidth=1, style=plot.style_line)

// Horizontal lines for reference
hline(70, "Overbought", color=color.red, linestyle=hline.style_dashed)
hline(50, "Midline", color=color.gray, linestyle=hline.style_dotted)
hline(30, "Oversold", color=color.green, linestyle=hline.style_dashed)

// Display values in a table with empty top row for spacing
var table info_table = table.new(position.top_right, 2, 4, bgcolor=color.white, border_width=1)

if barstate.islast
    // Empty row at top for spacing (20px equivalent)
    table.cell(info_table, 0, 0, "", text_color=color.white, bgcolor=color.white)
    table.cell(info_table, 1, 0, "", text_color=color.white, bgcolor=color.white)
    
    table.cell(info_table, 0, 1, "Current RSI", text_color=color.black, bgcolor=color.white)
    table.cell(info_table, 1, 1, str.tostring(rsi_value, "#.##"), text_color=color.blue, bgcolor=color.white)
    
    table.cell(info_table, 0, 2, "Lowest RSI", text_color=color.black, bgcolor=color.white)
    table.cell(info_table, 1, 2, str.tostring(min_rsi, "#.##"), text_color=color.red, bgcolor=color.white)
    
    table.cell(info_table, 0, 3, "Highest RSI", text_color=color.black, bgcolor=color.white)
    table.cell(info_table, 1, 3, str.tostring(max_rsi, "#.##"), text_color=color.green, bgcolor=color.white)
