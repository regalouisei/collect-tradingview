//Designed for overlay on price chart - please keep overlay=true. Dynamic tickers render as table on main pain only.
//@version=6
indicator("Dynamic 15-Ticker Multi-Symbol Table 2025 Edition", overlay=true, max_lines_count=500, max_labels_count=500, max_bars_back=500)

// ── Ticker Inputs (leave blank to hide)
t01 = input.string("", "Ticker 1",  group="Custom Tickers")
t02 = input.string("", "Ticker 2",  group="Custom Tickers")
t03 = input.string("", "Ticker 3",  group="Custom Tickers")
t04 = input.string("", "Ticker 4",  group="Custom Tickers")
t05 = input.string("", "Ticker 5",  group="Custom Tickers")
t06 = input.string("", "Ticker 6",  group="Custom Tickers")
t07 = input.string("", "Ticker 7",  group="Custom Tickers")
t08 = input.string("", "Ticker 8",  group="Custom Tickers")
t09 = input.string("", "Ticker 9",  group="Custom Tickers")
t10 = input.string("", "Ticker 10", group="Custom Tickers")
t11 = input.string("", "Ticker 11", group="Custom Tickers")
t12 = input.string("", "Ticker 12", group="Custom Tickers")
t13 = input.string("", "Ticker 13", group="Custom Tickers")
t14 = input.string("", "Ticker 14", group="Custom Tickers")


// ── Build ticker list (SPY always first)
var string[] tickers = array.new_string()
if barstate.isfirst
    array.push(tickers, "SPY")
    for t in array.from(t01,t02,t03,t04,t05,t06,t07,t08,t09,t10,t11,t12,t13,t14)
        s = str.trim(t)
        if str.length(s) > 0
            array.push(tickers, s)

// ── Fixed-size table
var table dash = table.new(position.top_right, 4, 16, border_width=1, frame_color=#363a45, frame_width=2)

// Header
if barstate.isfirst
    table.cell(dash, 0, 0, "SYM",  bgcolor=#1e222d, text_color=#00ffff, text_size=size.small)
    table.cell(dash, 1, 0, "PRICE", bgcolor=#1e222d, text_color=#00ffff, text_size=size.small)
    table.cell(dash, 2, 0, "RSI",   bgcolor=#1e222d, text_color=#00ffff, text_size=size.small)
    table.cell(dash, 3, 0, "VOL",   bgcolor=#1e222d, text_color=#00ffff, text_size=size.small)

// ── Fetch data + arrows
getData(sym) =>
    [c, c1, v, v1, r, r1] = request.security(sym, timeframe.period, [close, close[1], volume, volume[1], ta.rsi(close,14), ta.rsi(close,14)[1]])
    pArr = c > c1 ? "▲" : c < c1 ? "▼" : "−"
    rArr = r > r1 ? "▲" : r < r1 ? "▼" : "−"
    vArr = v > v1 ? "▲" : v < v1 ? "▼" : "−"
    pCol = c >= c1 ? color.lime : color.red
    rCol = r >= r1 ? color.lime : color.red
    vCol = v >= v1 ? color.lime : color.red
    [c, r, v, pArr, rArr, vArr, pCol, rCol, vCol]

// ── Update dashboard every bar
active = math.min(array.size(tickers), 15)

// Clear old rows
for row = 1 to 15
    for col = 0 to 3
        table.cell(dash, col, row, "", bgcolor=#00000000)

// Fill active tickers
for i = 0 to active - 1
    sym = array.get(tickers, i)
    [p, r, v, pa, ra, va, pc, rc, vc] = getData(sym)

    pStr = str.tostring(p, p < 10 ? "#.####" : "#.##")
    rStr = str.tostring(r, "#.##")
    vStr = v >= 1e9 ? str.tostring(v/1e9,"#.##")+"B" :
           v >= 1e6 ? str.tostring(v/1e6,"#.##")+"M" :
           v >= 1e3 ? str.tostring(v/1e3,"#.##")+"K" : str.tostring(v)

    bg = i % 2 == 0 ? color.new(#1e222d,0) : color.new(#2a2e39,0)

    table.cell(dash, 0, i+1, sym,       bgcolor=bg, text_color=#00ddff, text_size=size.normal)
    table.cell(dash, 1, i+1, pStr+pa,   bgcolor=bg, text_color=pc)
    table.cell(dash, 2, i+1, rStr+ra,   bgcolor=bg, text_color=rc)
    table.cell(dash, 3, i+1, vStr+va,   bgcolor=bg, text_color=vc)
