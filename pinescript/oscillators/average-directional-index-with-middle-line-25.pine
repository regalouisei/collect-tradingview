//@version=6
// normal ADX inidcator with silver line by 25

indicator('Average Directional Index', shorttitle = 'ADX-HMD', format = format.price, precision = 2, timeframe = '', timeframe_gaps = true)

adxlen = input(14, title = 'ADX Smoothing')
dilen = input(14, title = 'DI Length')

dirmov(len) =>
    up = ta.change(high)
    down = -ta.change(low)
    plusDM = na(up) ? na : up > down and up > 0 ? up : 0
    minusDM = na(down) ? na : down > up and down > 0 ? down : 0
    truerange = ta.rma(ta.tr, len)
    plus = fixnan(100 * ta.rma(plusDM, len) / truerange)
    minus = fixnan(100 * ta.rma(minusDM, len) / truerange)
    [plus, minus]

adx(dilen, adxlen) =>
    [plus, minus] = dirmov(dilen)
    sum = plus + minus
    adx = 100 * ta.rma(math.abs(plus - minus) / (sum == 0 ? 1 : sum), adxlen)
    adx

sig = adx(dilen, adxlen)

// --- ADX Plot ---
plot(sig, color = color.red, title = 'ADX')

// dynamic line color
midlineColor = sig > 25 ? color.new(color.green, 0) : color.new(color.silver, 0)

// --- middle line 25 ---
hline(25, 'Mittellinie 25', color = color.silver, linewidth = 3, linestyle = hline.style_solid)
