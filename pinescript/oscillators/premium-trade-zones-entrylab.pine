//@version=6
indicator("RSI Neon Pipe (14/21/50) — Trade Zones (Customizable)", overlay=false)

//━━━━━━━━━━━━━━━━ INPUTS ━━━━━━━━━━━━━━━━
src   = input.source(close, "Source")
len14 = input.int(14, "RSI 14")
len21 = input.int(21, "RSI 21")
len50 = input.int(50, "RSI 50")

// Toggles
showZones      = input.bool(true,  "Show zone backgrounds + lines")
showZoneText   = input.bool(true,  "Show zone text boxes (Short / No / Long)")
showBlobDots   = input.bool(true,  "Show 70 / 30 neon dots")

// Zone levels
ntzTop    = input.float(57.0, "No-trade top", step=0.5)
ntzBot    = input.float(43.0, "No-trade bottom", step=0.5)
textEvery = input.int(36,     "Text spacing (bars)", minval=6)

// Guide levels
lvl80 = input.float(80.0)
lvl70 = input.float(70.0)
// lvl50 REMOVED ON PURPOSE
lvl30 = input.float(30.0)
lvl20 = input.float(20.0)

// Colors
pipeUpCol      = input.color(color.rgb(195,60,255), "Pipe color above 50")
pipeDnCol      = input.color(color.rgb(40,160,255), "Pipe color below 50")

thread14UpCol  = input.color(color.rgb(230,110,255), "RSI 14 thread (above)")
thread14DnCol  = input.color(color.rgb(90,210,255),  "RSI 14 thread (below)")
thread21UpCol  = input.color(color.rgb(195,60,255),  "RSI 21 thread (above)")
thread21DnCol  = input.color(color.rgb(40,160,255),  "RSI 21 thread (below)")
thread50UpCol  = input.color(color.rgb(160,40,255),  "RSI 50 thread (above)")
thread50DnCol  = input.color(color.rgb(20,120,255),  "RSI 50 thread (below)")

guideLineCol   = input.color(color.new(color.white, 86), "Guide lines color")

zoneFillCol    = input.color(color.white, "Zone fill")
zoneFillAlpha  = input.int(94, "Zone fill transparency", minval=0, maxval=100)

ntzLabelBgCol  = input.color(color.rgb(110,35,35), "No-trade label bg")
ntzLabelBgA    = input.int(82, "No-trade label transparency")

blobOuterCol   = input.color(color.white, "Blob outer")
blobOuterA     = input.int(78, "Blob outer alpha")
blobInnerCol   = input.color(color.white, "Blob inner")
blobInnerA     = input.int(40, "Blob inner alpha")

//━━━━━━━━━━━━━━━━ RSI ━━━━━━━━━━━━━━━━
r14 = ta.rsi(src, len14)
r21 = ta.rsi(src, len21)
r50 = ta.rsi(src, len50)
mid = (r14 + r21 + r50) / 3

isAbove = mid >= 50
pipeCol = isAbove ? pipeUpCol : pipeDnCol

c14 = isAbove ? thread14UpCol : thread14DnCol
c21 = isAbove ? thread21UpCol : thread21DnCol
c50 = isAbove ? thread50UpCol : thread50DnCol

//━━━━━━━━━━━━━━━━ GUIDE LINES (NO 50 LINE) ━━━━━━━━━━━━━━━━
hline(lvl80, color=color.rgb(152, 1, 246))
hline(lvl70, color=color.rgb(152, 1, 246))
hline(lvl30, color=color.rgb(7, 220, 248))
hline(lvl20, color=color.rgb(7, 220, 248))

//━━━━━━━━━━━━━━━━ ZONE FILLS ━━━━━━━━━━━━━━━━
zCol = color.new(zoneFillCol, zoneFillAlpha)

upperFillTop = plot(showZones ? lvl70  : na, color=color.new(color.white,100))
upperFillBot = plot(showZones ? ntzTop : na, color=color.new(color.white,100))
fill(upperFillTop, upperFillBot, zCol)

lowerFillTop = plot(showZones ? ntzBot : na, color=color.new(color.white,100))
lowerFillBot = plot(showZones ? lvl30  : na, color=color.new(color.white,100))
fill(lowerFillTop, lowerFillBot, zCol)

//━━━━━━━━━━━━━━━━ NEON PIPE (UNCHANGED) ━━━━━━━━━━━━━━━━
plot(mid, linewidth=10, color=color.new(pipeCol,78))
plot(mid, linewidth=6,  color=color.new(pipeCol,85))
plot(mid, linewidth=3,  color=color.new(pipeCol,90))

//━━━━━━━━━━━━━━━━ RSI THREADS (UNCHANGED) ━━━━━━━━━━━━━━━━
plot(r14, linewidth=1, color=color.new(c14,10))
plot(r21, linewidth=1, color=color.new(c21,10))
plot(r50, linewidth=1, color=color.new(c50,10))
