//@version=6
indicator("EMA + RSI Autotrade Webhook", overlay=true)

// Inputs
ema_fast = input.int(9, "Fast EMA", minval=1)
ema_slow = input.int(21, "Slow EMA", minval=1)
rsi_length = input.int(14, "RSI Length", minval=1)
rsi_long = input.int(52, "RSI Long Threshold", minval=1, maxval=100)
rsi_short = input.int(48, "RSI Short Threshold", minval=1, maxval=100)

// Calculations
ema9 = ta.ema(close, ema_fast)
ema21 = ta.ema(close, ema_slow)
rsi = ta.rsi(close, rsi_length)

// Crossover Detection
bullCross = ta.crossover(ema9, ema21)
bearCross = ta.crossunder(ema9, ema21)

// Entry Conditions
longEntry = bullCross and rsi > rsi_long
shortEntry = bearCross and rsi < rsi_short

// Plots
plot(ema9, "EMA 9", color.blue, 2)
plot(ema21, "EMA 21", color.red, 2)

plotshape(longEntry, "Long Entry", shape.triangleup, location.belowbar, color.green, size=size.small)
plotshape(shortEntry, "Short Entry", shape.triangledown, location.abovebar, color.red, size=size.small)

// 2 Alerts Only - Delta auto-reverses positions
alertcondition(longEntry, "LONG Entry", "Entry LONG {{ticker}} @ {{close}}")
alertcondition(shortEntry, "SHORT Entry", "Entry SHORT {{ticker}} @ {{close}}")
