//@version=5
indicator("Santhosh Trend-Change Alerts", overlay=true)

n = input.int(16, "Period")

hma = ta.hma(close, n)
hmaPrev = ta.hma(close[1], n)

// Color logic
isUp   = hma > hmaPrev
isDown = hma < hmaPrev
plot(hma, color=isUp ? color.green : color.red, title="Hull MA")

// Signals
buySignal  = isUp and not isUp[1]     // Hull flips to green
sellSignal = isDown and not isDown[1] // Hull flips to red

plotshape(buySignal, title="Buy Signal", style=shape.triangleup, color=color.green, location=location.belowbar)
plotshape(sellSignal, title="Sell Signal", style=shape.triangledown, color=color.red, location=location.abovebar)

// Alerts
alertcondition(buySignal, title="Buy Alert", message="Hull MA turned UP (green)")
alertcondition(sellSignal, title="Sell Alert", message="Hull MA turned DOWN (red)")
alertcondition(buySignal or sellSignal, title="Any Trend Change", message="Hull MA flipped trend")
