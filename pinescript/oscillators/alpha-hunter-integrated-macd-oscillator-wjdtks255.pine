// This Pine ScriptÂ® code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// Â© wjdtks255

//@version=5
// Alpha Hunter Integrated MACD & Oscillator
// Fixed Version for Global Compliance
// Author: wjdtks255
indicator("Alpha Hunter Integrated MACD & Oscillator [wjdtks255]", shorttitle="AH_Integrated", overlay=false, precision=2)

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ðŸ“Œ 1. Parameters & Configuration
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
gp_macd   = "MACD SETTINGS"
fast_len   = input.int(12, "Fast EMA Length", minval=1, group=gp_macd)
// Fixed the Uppercase/Lowercase 'slow_len' error found in your screenshot
slow_len   = input.int(26, "Slow EMA Length", minval=2, group=gp_macd)
signal_len = input.int(9, "Signal Smoothing", minval=1, group=gp_macd)

gp_filter = "ALGORITHM OPTIMIZATION"
filter_len = input.int(5, "Lag Reduction Factor", minval=1, group=gp_filter)

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ðŸ“Œ 2. Calculation Engine
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[macd_line, signal_line, hist_line] = ta.macd(close, fast_len, slow_len, signal_len)

// Secondary smoothing logic for faster reaction
smooth_hist = ta.ema(hist_line, filter_len)

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ðŸ“Œ 3. Trading Signal Logic
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
buy_signal  = ta.crossover(hist_line, smooth_hist) and macd_line > macd_line[1]
sell_signal = ta.crossunder(hist_line, smooth_hist) and macd_line < macd_line[1]

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ðŸ“Œ 4. Visual Layout
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
hist_color = hist_line >= 0 ? (hist_line > hist_line[1] ? #00ff00 : #006400) : (hist_line < hist_line[1] ? #ff0000 : #8b0000)
plot(hist_line, title="Momentum Histogram", style=plot.style_columns, color=color.new(hist_color, 30))

plot(macd_line, title="MACD Baseline", color=#00ffbb, linewidth=2)
plot(signal_line, title="Signal Projection", color=#ffcc00, linewidth=1)
hline(0, "Regime Zero Line", color=color.gray, linestyle=hline.style_dashed)

plotshape(buy_signal,  title="Long Entry",  style=shape.triangleup,   location=location.bottom, color=#00ff00, size=size.small, text="BUY",  textcolor=#00ff00)
plotshape(sell_signal, title="Short Entry", style=shape.triangledown, location=location.top,    color=#ff0000, size=size.small, text="SELL", textcolor=#ff0000)

fill(plot(macd_line), plot(signal_line), color = macd_line > signal_line ? color.new(#00ff00, 90) : color.new(#ff0000, 90), title="Trend Bias Cloud")

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ðŸ“Œ 5. Alert Conditions
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
alertcondition(buy_signal,  "AH: Long Signal",  "Bullish momentum shift confirmed.")
alertcondition(sell_signal, "AH: Short Signal", "Bearish momentum shift confirmed.")
