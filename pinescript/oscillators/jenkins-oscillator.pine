//@version=5
indicator("High Low Cloud", overlay=false)

// Input parameters
smooth_length = input.int(1, "Smoothing Length", minval=1)
lookback_length = input.int(7, "Lookback Length", minval=1)

//calculate price value
src = hl2
s_src = ta.wma(src,smooth_length)

//calculate raw sd
raw_sd = high - low
//calculate sd
sd = ta.sma(raw_sd, lookback_length)/2.0

// Calculate mean of OHLC4
mean_src = ta.sma(s_src, lookback_length)

// Standard deviation normalization with safeguard
var float epsilon = 0.00001
normalized_src = sd > epsilon ? (s_src - mean_src) / sd : 0.0

// Plot the normalized first derivative
plot(normalized_src, title="J Oscillator", color=color.red, linewidth=2)
hline(0, "Zero Line", color=color.white, linestyle=hline.style_solid)
