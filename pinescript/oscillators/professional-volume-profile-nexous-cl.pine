//@version=6
indicator("Professional Volume Profile - NEXOUS_cl", overlay = true, max_labels_count = 50)

// Ρυθμίσεις
int lookbackInput = input.int(24, "Lookback Period (Bars)", minval = 1)
int vaPercentInput = input.int(70, "Value Area %", minval = 1)

// Υπολογισμός POC (Point of Control) βάσει όγκου και τιμής
float poc = ta.vwap(close) // Χρήση VWAP ως σημείο αναφοράς όγκου/τιμής

// Σχεδίαση επιπέδων Προηγούμενης Ημέρας (Liquidity)
pdh = request.security(syminfo.tickerid, "D", high[1], lookahead=barmerge.lookahead_on)
pdl = request.security(syminfo.tickerid, "D", low[1], lookahead=barmerge.lookahead_on)

plot(pdh, "PDH", color.new(color.red, 30), 2, plot.style_stepline)
plot(pdl, "PDL", color.new(color.green, 30), 2, plot.style_stepline)

// Σχεδίαση Ζώνης POC
p1 = plot(poc * 1.001, "POC Upper", color.new(color.yellow, 50), 1, plot.style_line)
p2 = plot(poc * 0.999, "POC Lower", color.new(color.yellow, 50), 1, plot.style_line)
fill(p1, p2, color.new(color.yellow, 85), "POC Zone")

// Σήματα Sweep (Από τον προηγούμενο πετυχημένο δείκτη μας)
sweep_low = low < pdl and close > pdl
if (sweep_low)
    label.new(bar_index, low, "BUY SWEEP", color=color.green, textcolor=color.white, style=label.style_label_up, size=size.small)
