//@version=6
indicator("OG Combined", overlay=true)

// === Input for Legend Toggle ===
showLegend = input.bool(true, title="Show Legend")

// === Moving Averages ===
sma50 = ta.sma(close, 50)
sma150 = ta.sma(close, 150)
sma200 = ta.sma(close, 200)
ema20 = ta.ema(close, 20)
ema40 = ta.ema(close, 40)

// === Plotting ===
plot(sma50, color=color.blue, title="50 SMA (Blue, Solid)", linewidth=2)
plot(sma150, color=color.green, title="150 SMA (Green, Solid)", linewidth=2)
plot(sma200, color=color.red, title="200 SMA (Red, Solid)", linewidth=2)
plot(ema20, color=color.red, title="20 EMA (Red, Cross)", linewidth=1, style=plot.style_cross)
plot(ema40, color=color.green, title="40 EMA (Green, Cross)", linewidth=1, style=plot.style_cross)

// === Toggleable Legend Table ===
var table legend = table.new(position.middle_right, 2, 6, border_width=1)
if showLegend and bar_index == 1
    table.cell(legend, 0, 0, "Line", text_color=color.white, bgcolor=color.gray)
    table.cell(legend, 1, 0, "Description", text_color=color.white, bgcolor=color.gray)
    table.cell(legend, 0, 1, "━", text_color=color.blue, bgcolor=color.gray)
    table.cell(legend, 1, 1, "50 SMA (Blue, Solid)", text_color = color.rgb(55, 118, 219), bgcolor=color.gray)
    table.cell(legend, 0, 2, "━", text_color=color.green, bgcolor=color.gray)
    table.cell(legend, 1, 2, "150 SMA (Green, Solid)", text_color = color.rgb(21, 194, 58), bgcolor=color.gray)
    table.cell(legend, 0, 3, "━", text_color=color.red, bgcolor=color.gray)
    table.cell(legend, 1, 3, "200 SMA (Red, Solid)", text_color = color.red, bgcolor=color.gray)
    table.cell(legend, 0, 4, "╳", text_color=color.red, bgcolor=color.gray)
    table.cell(legend, 1, 4, "20 EMA (Red, Cross)", text_color = color.red, bgcolor=color.gray)
    table.cell(legend, 0, 5, "╳", text_color=color.green, bgcolor=color.gray)
    table.cell(legend, 1, 5, "40 EMA (Green, Cross)", text_color = color.green, bgcolor=color.gray)
