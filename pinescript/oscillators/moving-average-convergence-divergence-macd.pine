// This Pine Script® code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// © 01010100 01101001 01100001 01100111 01101111 00100000 01010010 01101111 01100011 01101000 01100001 00100000 1011001
//           ╔══════╗       ████████╗ ████████╗  ████████╗  ███████╗   ██████╗        ██████╗   ██████╗   ██████╗ ██╗   ██╗ ████████╗       ╔══════╗
//           ║ ████ ║       ╚══██╔══╝ ╚══██╔══╝  ██╔═══██║  ██╔════╝  ██╔═══██╗       ██╔══██╗ ██╔═══██╗ ██╔════╝ ██║   ██║ ██╔═══██║       ║ ████ ║
//          ╔╝██████╚╗         ██║       ██║     ████████║  ██║ ███║  ██║   ██║       ██████╔╝ ██║   ██║ ██║      ████████║ ████████║      ╔╝██████╚╗
//          ║║      ║║         ██║       ██║     ██╔═══██║  ██║  ██║  ██║   ██║       ██╔══██╗ ██║   ██║ ██║      ██║   ██║ ██╔═══██║      ║║      ║║
//           ╚╦════╦╝          ██║    ████████╗  ██║   ██║  ███████║  ╚██████╔╝       ██║  ██║ ╚██████╔╝ ╚██████╗ ██║   ██║ ██║   ██║       ╚╦════╦╝
//@version=6
indicator("Moving Average Convergence-Divergence (MACD)", shorttitle = "MACD →", overlay=false, precision=2)
//╔════════════════════════╗
//║        Inputs          ║
//╚════════════════════════╝
MACD =      input.bool(true, title = "MACD Lines", tooltip = "On/Off MACD Lines")
source =    input(close)
fastlen =   input.int(12)
slowlen =   input.int(26)
siglen =    input.int(9)
//╔════════════════════════╗
//║      Calculations      ║
//╚════════════════════════╝
[macdLine, signalLine, histLine] = ta.macd(source, fastlen, slowlen, siglen)
MACDLINE = MACD ? macdLine : na
SIGNALLINE = MACD ? signalLine : na
//╔════════════════════════╗
//║      Get Crosses       ║
//╚════════════════════════╝
CrossOver  = ta.crossover(macdLine, signalLine)
CrossUnder = ta.crossunder(macdLine, signalLine)
//╔════════════════════════╗
//║        Plotting        ║
//╚════════════════════════╝
hline(0, color = color.white)
barcolor(color = macdLine>signalLine ? color.green : color.red)
bgcolor(CrossOver ? color.green : CrossUnder ? color.red : na)
plot(MACDLINE, color = macdLine>signalLine ? color.green : color.red, linewidth = 3)
plot(SIGNALLINE, color=color.yellow)
plot(histLine, color= histLine < 0 ?color.red : color.green, style=plot.style_histogram)
//╔════════════════════════╗
//║         Alerts         ║
//╚════════════════════════╝
alertcondition(CrossOver, "Bullish MACD Crossover", "MACD Bullish Crossover")
alertcondition(CrossUnder, "Bearish MACD Crossover", "MACD Bearish Crossover")
