// This Pine ScriptÂ® code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// Â© BossOfDolphinGang_
//
// ADDITIONAL RESTRICTIONS:
// - ê°œì¸ í•™ìŠµ ë° ì—°êµ¬ ëª©ì ìœ¼ë¡œë§Œ ì‚¬ìš© ê°€ëŠ¥
// - ìƒì—…ì  ì´ìš©, íŒë§¤ ê¸ˆì§€
// - ìƒì—…ì  ëª©ì ìœ¼ë¡œ ë¬´ë‹¨ ì‚¬ìš© ì‹œ ì €ì‘ê¶Œë²•ì— ë”°ë¼ ë²•ì  ì±…ì„ì„ ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
// - ê°œë°œì : ëŒê³ ë˜ë§¤ë§¤ë‹¨
// - ë¬¸ì˜: https://t.me/Boss_DolphinGang

//@version=6
indicator("ğŸ¬Stochastic_RSI", overlay=false, shorttitle="ğŸ¬Sto_RSI", format=format.price, precision=2, timeframe = "", timeframe_gaps = true)

//-----
group_sr = 'Stochastic RSI ì„¤ì •'
inline_k = 'k'
sr_col_k = input.color(#6bd2f4, 'K ì„ ', inline = inline_k, group = group_sr)
sr_len_k = input.int(3, '', minval=1, inline = inline_k, group = group_sr, tooltip = 'Stochastic RSIì˜ K(ë¹ ë¥¸ì„ ) í‰í™œí™” ê¸°ê°„ì…ë‹ˆë‹¤.\nê°’ì´ í´ìˆ˜ë¡ ê³¡ì„ ì´ ë¶€ë“œëŸ¬ì›Œì§€ì§€ë§Œ ì‹ í˜¸ê°€ ëŠë ¤ì§‘ë‹ˆë‹¤.')
inline_d = 'd'
sr_col_d = input.color(#ff6b6b, 'D ì„ ', inline = inline_d, group = group_sr)
sr_len_d = input.int(3, '', minval=1, inline = inline_d, group = group_sr, tooltip = 'Stochastic RSIì˜ D(ì‹œê·¸ë„ì„ ) í‰í™œí™” ê¸°ê°„ì…ë‹ˆë‹¤.\nê°’ì´ í´ìˆ˜ë¡ ì‹œê·¸ë„ì„ ì´ ë¶€ë“œëŸ¬ì›Œì§€ê³ , êµì°¨ ì‹ í˜¸ ìˆ˜ëŠ” ì¤„ì–´ë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.')
sr_len_rsi = input.int(14, 'RSI ê¸¸ì´', minval=1, group = group_sr, tooltip = 'RSI ê³„ì‚°ì— ì‚¬ìš©í•˜ëŠ” ê¸°ê°„ì…ë‹ˆë‹¤.\nì§§ì„ìˆ˜ë¡ ë¯¼ê°í•˜ê²Œ ë°˜ì‘í•˜ê³ , ê¸¸ìˆ˜ë¡ ë…¸ì´ì¦ˆê°€ ì¤„ì–´ë“­ë‹ˆë‹¤.')
sr_len_sto = input.int(14, 'Stochastic ê¸¸ì´', minval=1, group = group_sr, tooltip='Stochastic ê³„ì‚° ì‹œ RSIì˜ ìµœê³ /ìµœì €ë¥¼ ë¹„êµí•  ê¸°ê°„ì…ë‹ˆë‹¤.\nê°’ì´ ì‘ì„ìˆ˜ë¡ ìµœê·¼ RSI ë³€í™”ë¥¼ ë” ë¯¼ê°í•˜ê²Œ ë°˜ì˜í•©ë‹ˆë‹¤.')
sr_src = input.source(close, 'RSI Source', group = group_sr, tooltip = 'RSI ê³„ì‚°ì— ì‚¬ìš©í•  ê°€ê²© ë°ì´í„°ì…ë‹ˆë‹¤. ê¸°ë³¸ì€ ì¢…ê°€(close)ì´ë©°, í•„ìš” ì‹œ ë‹¤ë¥¸ ì†ŒìŠ¤ë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.')

sr_rsi = ta.rsi(sr_src, sr_len_rsi)
sr_k = ta.sma(ta.stoch(sr_rsi, sr_rsi, sr_rsi, sr_len_sto), sr_len_k)
sr_d = ta.sma(sr_k, sr_len_d)

p_sr_k = plot(sr_k, 'K', color=sr_col_k, editable = false)
p_sr_d = plot(sr_d, 'D', color=sr_col_d, editable = false)

//-----
group_line = "ê¸°ì¤€ ë¼ì¸ ì„¤ì •"
inline_sr_upper = 'sr ê³¼ë§¤ìˆ˜'
show_sr_upper = input.bool(true, 'ê³¼ë§¤ìˆ˜ ë¼ì¸', inline = inline_sr_upper, group = group_line)
col_sr_upper = input.color(#787B86, '', inline = inline_sr_upper, group = group_line)
sr_upper = input.int(80, '', minval=51, maxval = 99, step=1, tooltip='Stochastic RSI ê³¼ë§¤ìˆ˜ë¥¼ íŒë‹¨í•˜ê¸° ìœ„í•œ ê¸°ì¤€ê°’ì…ë‹ˆë‹¤.\nì¼ë°˜ì ìœ¼ë¡œ 80ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.', inline = inline_sr_upper, group = group_line)
inline_sr_middle = 'sr ë¯¸ë“¤ ë¼ì¸'
show_sr_middle = input.bool(true, 'ë¯¸ë“¤ ë¼ì¸', inline = inline_sr_middle, group = group_line)
col_sr_middle = input.color(color.new(#787B86,50), '', inline = inline_sr_middle, group = group_line)
inline_sr_lower = 'sr ê³¼ë§¤ë„'
show_sr_lower = input.bool(true, 'ê³¼ë§¤ë„ ë¼ì¸', inline = inline_sr_lower, group = group_line)
col_sr_lower = input.color(#787B86, '', inline = inline_sr_lower, group = group_line)
sr_lower = input.int(20, '', minval=1, maxval = 49, step=1, tooltip='Stochastic RSI ê³¼ë§¤ë„ë¥¼ íŒë‹¨í•˜ê¸° ìœ„í•œ ê¸°ì¤€ê°’ì…ë‹ˆë‹¤.\nì¼ë°˜ì ìœ¼ë¡œ 20ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.', inline = inline_sr_lower, group = group_line)

hline(show_sr_upper ? sr_upper : na, 'Stochastic RSI ê³¼ë§¤ìˆ˜ ë¼ì¸', color = col_sr_upper, editable = false)
hline(show_sr_middle ? 50 : na, 'Stochastic RSI ì¤‘ì‹¬ ë¼ì¸', color = col_sr_middle, editable = false)
hline(show_sr_lower ? sr_lower : na, 'Stochastic RSI ê³¼ë§¤ë„ ë¼ì¸', color = col_sr_lower, editable = false)

//-----
group_crs = 'í¬ë¡œìŠ¤ ì‹ í˜¸ ì„¤ì •'
show_sr_cross = input.bool(true, 'í¬ë¡œìŠ¤ ì‹ í˜¸ ë³´ì´ê¸°', 'Kì„ ê³¼ Dì„ ì˜ ê³¨ë“ í¬ë¡œìŠ¤/ë°ë“œí¬ë¡œìŠ¤ë¥¼ ë°°ê²½ìƒ‰ìœ¼ë¡œ í‘œì‹œí•©ë‹ˆë‹¤.', group = group_crs)
check_sr_overzone = input.bool(true, 'ê³¼ë§¤ìˆ˜/ê³¼ë§¤ë„ êµ¬ê°„ ì°¸ê³ í•˜ê¸°', 'ê³¼ë§¤ìˆ˜ êµ¬ê°„ì—ì„œì˜ ë°ë“œí¬ë¡œìŠ¤, ê³¼ë§¤ë„ êµ¬ê°„ì—ì„œì˜ ê³¨ë“ í¬ë¡œìŠ¤ ì‹ í˜¸ë§Œ ë³´ì—¬ì¤ë‹ˆë‹¤.', group = group_crs)
inline_sr_cross_col = 'í¬ë¡œìŠ¤ ìƒ‰ìƒ'
col_cross_golden = input.color(color.new(#00ffaa, 70), 'ê³¨ë“ í¬ë¡œìŠ¤', inline = inline_sr_cross_col, group = group_crs)
col_cross_dead = input.color(color.new(#ffd600, 70), 'ë°ë“œí¬ë¡œìŠ¤', inline = inline_sr_cross_col, group = group_crs)

sr_cross_golden = ta.crossover(sr_k, sr_d)
sr_cross_dead = ta.crossunder(sr_k, sr_d)

if check_sr_overzone
    sr_cross_golden := sr_k <= sr_lower and sr_d <= sr_lower and sr_cross_golden
    sr_cross_dead := sr_k >= sr_upper and sr_d >= sr_upper and sr_cross_dead

bgcolor(show_sr_cross ?
     sr_cross_golden ? col_cross_golden :
     sr_cross_dead ? col_cross_dead :
     na : na, editable=false)
