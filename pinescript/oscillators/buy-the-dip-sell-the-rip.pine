// This Pine Script® code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// © vvedding

//@version=6
indicator("Buy the Dip & Sell the Rip", overlay=true)

// Inputs
len1 = input.int(14, "RSI Length")
len2 = input.int(14, "RSI SMA Length")
os  = input.int(30, "Oversold")
ob  = input.int(70, "Overbought")

// Calculations
rsi    = ta.rsi(close, len1)
rsiSma = ta.sma(rsi, len2)

// Oversold: Prev RSI under threshold and RSI rising
btd = rsi[1] < os and rsi > rsi[1]
// Sell: Prev RSI over threshold and RSI SMA over threshold
str = rsi > ob and rsiSma > ob and rsi[1] > rsi

// Visualization
plotshape(btd, "Buy Signal", shape.triangleup, location.belowbar, color.lime, size=size.small, text="DIP")
plotshape(str, "Sell Signal", shape.triangledown, location.abovebar, color.red, size=size.small, text="RIP")

// Alerts
if btd
    alert("Buy the Dip!", alert.freq_once_per_bar_close)
if str
    alert("Sell the Rip!", alert.freq_once_per_bar_close)
