//@version=6
indicator("150MA: Distance % + Trend Slope", overlay=false)

// Inputs
maLen = input.int(150, "MA Length", minval=1)
lookback = input.int(1, "Slope Lookback", minval=1)

// Long MA
ma = ta.sma(close, maLen)

// Distance % from MA
dist_pct = ((close - ma) / ma) * 100

// Raw slope of MA
slope = (ma - ma[lookback]) / lookback

// Angle in degrees
const float RAD2DEG = 180.0 / math.pi
angle_deg = math.atan(slope) * RAD2DEG

// Plot
plot(dist_pct, "Distance %", color=color.blue)
plot(angle_deg, "Slope (Â°)", color=color.green)

// Baselines
hline(0, "Zero", color=color.gray)
