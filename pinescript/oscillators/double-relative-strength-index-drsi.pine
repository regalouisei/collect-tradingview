// This Pine ScriptÂ® code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// Â© Tiagorocha1989
//                              â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
//                              â•šâ•â•â–ˆâ–ˆâ•”â•â•â• â•šâ•â•â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•”â•â•â•â•â•  â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—       â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•‘
//                                 â–ˆâ–ˆâ•‘       â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘
//                                 â–ˆâ–ˆâ•‘       â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘       â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘      â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•‘
//                                 â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘  â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•       â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
//@version=6
indicator('Double Relative Strength Index - DRSI', 'DRSI â†’', false)
//â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
//â•‘     INPUT SETTINGS     â•‘
//â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Color_Mode =        input.string('Classic', 'Color Choice', group = "Color", inline = 'color', options = ['Classic', 'Neon', 'Modern', 'Robust', 'Accented', 'Monochrome'])
Length_RSI =        input.int(14, title = 'Length RSI:', group='RSI SETTING', inline = 'RSI')
LT_DRSI =           input.float(57,   "Long Threshold", group='RSI SETTING', step = 0.1)
ST_DRSI =           input.float(56,   "Short Threshold", group='RSI SETTING', step = 0.1)
Source_RSI =        input(close, title = 'Source RSI:', group='RSI SETTING', inline = 'RSI')
//â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
//â•‘      Calculation       â•‘
//â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
RSI =     ta.rsi(Source_RSI,Length_RSI)
D_RSI = 2 * RSI - ta.rsi(RSI, Length_RSI)
T = 0 
T:= D_RSI > LT_DRSI ? 1 : D_RSI < ST_DRSI ? -1 : T[1]
isBull_D_RSI = D_RSI > LT_DRSI
isBear_D_RSI = D_RSI < ST_DRSI
Bull_D_RSI = ta.crossover(T,0)
Bear_D_RSI = ta.crossunder(T,0)
//â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
//â•‘         Color          â•‘
//â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[UpC, DnC] = switch Color_Mode
    'Classic'       => [#008000, #FF0000]
    'Neon'          => [#00ffbb, #ff1100]
    'Modern'        => [#5ffae0, #c22ed0]
    'Robust'        => [#ffbb00, #770737]
    'Accented'      => [#9618f7, #ff0078]
    'Monochrome'    => [#dee2e6, #495057]
//â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
//â•‘          Plot          â•‘
//â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
RSI_Plot = plot(D_RSI, color = D_RSI > LT_DRSI ? color.new(UpC, 20) : D_RSI < ST_DRSI ? color.new(DnC, 20) : color.gray, linewidth = 2)
LT_Plot = plot(LT_DRSI, "Long Threshold", color.new(UpC, 30))
ST_Plot = plot(ST_DRSI, "Short Threshold", color.new(DnC, 30))
midLinePlot = plot(ST_DRSI, color = color.new(color.white,100), display = display.pane)
fill(RSI_Plot, LT_Plot, 80, LT_DRSI, top_color = color.new(UpC, 0), bottom_color = color.new(UpC, 100), title = 'Overbought Fill')
fill(RSI_Plot, ST_Plot, ST_DRSI, 20, top_color = color.new(DnC, 100), bottom_color = color.new(DnC, 0), title = 'Oversold Fill')
fill(RSI_Plot, midLinePlot, D_RSI > LT_DRSI ? RSI : (D_RSI < ST_DRSI ? RSI : 50), D_RSI > LT_DRSI ? 50 : (D_RSI < ST_DRSI ? 50 : RSI), D_RSI > LT_DRSI ? color.new(UpC, 50) : (D_RSI < ST_DRSI ? color.new(DnC, 50) : #00000000), D_RSI > LT_DRSI ? #00000000 : (D_RSI < ST_DRSI ? #00000000 : #00000000),title = 'Dynamic Fill')
plotcandle(open, high, low, close, "Bar Color", isBull_D_RSI ? UpC : isBear_D_RSI ? DnC : na, isBull_D_RSI ? UpC : isBear_D_RSI ? DnC : na, bordercolor = isBull_D_RSI ? UpC : isBear_D_RSI ? DnC : na, force_overlay = true)
plotshape(Bull_D_RSI, "LONG", shape.triangleup, location.belowbar, UpC, 0, size = size.small, force_overlay = true)
plotshape(Bear_D_RSI, "SHORT", shape.triangledown, location.abovebar, DnC, 0, size = size.small, force_overlay = true)
if barstate.islast
    label.new(bar_index + 5, D_RSI, text =  str.tostring(D_RSI, "#.##"), color = D_RSI > LT_DRSI ? color.new(UpC, 20) : D_RSI < ST_DRSI ? color.new(DnC, 20) : color.gray, style = label.style_label_left, textcolor = #000000)
//â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
//â•‘          VIEW          â•‘
//â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
var table Table_D_RSI = table.new(position.middle_right, 1, 1, border_width = 1)
table.cell(Table_D_RSI, 0, 0, text = isBull_D_RSI ? 'â¬†ï¸ Bullish' : isBear_D_RSI ? 'â¬‡ï¸ Bearish' : "ðŸ”€ Reversion" , text_color = isBull_D_RSI ? UpC : isBear_D_RSI ? DnC : na,text_size = size.huge)
//â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
//â•‘         Alerts         â•‘
//â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
alertcondition(Bull_D_RSI, title= 'LONG', message= '{{ticker}} LONG')
alertcondition(Bear_D_RSI, title= 'SHORT', message= '{{ticker}} SHORT')
