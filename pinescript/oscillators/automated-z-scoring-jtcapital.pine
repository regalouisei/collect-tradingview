// This Pine Script® code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// © JTCapitalNL
//@version=6
//       ______                                                                                          ______          
//    .-'      `-.                                                                                    .-'      `-.        
//   /            \                                                                                  /            \      
//  |              |      ████████╗████████╗ ██████╗ █████╗ ██████╗ ██╗████████╗ █████╗ ██╗         |              |      
//  |,  .-.  .-.  ,|      ╚═════██║╚══██╔══╝██╔════╝██╔══██╗██╔══██╗██║╚══██╔══╝██╔══██╗██║         |,  .-.  .-.  ,|     
//  | )(_o/  \o_)( |            ██║   ██║   ██║     ███████║██████╔╝██║   ██║   ███████║██║         | )(_o/  \o_)( |      
//  |/     /\     \|      ██║   ██║   ██║   ██║     ██╔══██║██╔═══╝ ██║   ██║   ██╔══██║██║         |/     /\     \|      
//  (_     ^^     _)      ████████║   ██║   ╚██████╗██║  ██║██║     ██║   ██║   ██║  ██║███████╗    (_     ^^     _)      
//   \__|IIIIII|__/       ╚═══════╝   ╚═╝    ╚═════╝╚═╝  ╚═╝╚═╝     ╚═╝   ╚═╝   ╚═╝  ╚═╝╚══════╝     \__|IIIIII|__/       
//    | \IIIIII/ |                                                                                    | \IIIIII/ |        
//    \          /                               ☠️ |JTCapitalNL| ☠️                                 \          /        
//     `--------`                                                                                       `--------`


//@version=6
indicator("Automated Z-scoring - [JTCAPITAL]")

//-----Defining length
length = input.int(3000)

//-----Source input
src = input.source(close)

//-----Defining Standard Deviation
stdev = ta.stdev(src, length)

//-----Defining Mean
mean = ta.sma(src, length)

//-----Defining Z-score
zscore = (src - mean) / stdev


//-----Plotting
BullColor = color.rgb(49, 132, 228)
Bearcolor = color.rgb(132, 3, 158)
lineColor = zscore > 0 ? BullColor : Bearcolor
plot1 = plot(zscore, color=lineColor, linewidth=3)
plot12 = plot(0, color = lineColor, display = display.none)
fill(plot1 = plot1,plot2 = plot12, top_value = zscore, bottom_value = 0, top_color = lineColor, bottom_color = color.new(color.black, 100))
