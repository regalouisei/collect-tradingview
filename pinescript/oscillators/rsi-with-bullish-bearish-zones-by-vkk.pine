//@version=5
indicator("RSI with Bullish/ Bearish Zones by VKK", overlay=false)
// Input settings
rsiLength = input.int(14, "RSI Length")
rsiSource = input.source(close, "Source")

// Calculate RSI
rsiValue = ta.rsi(rsiSource, rsiLength)

// Define Logic and Colors
var string zoneText = ""
color zoneColor = color.gray

if rsiValue >= 60
    zoneText := "BULLISH"
    zoneColor := color.green
else if rsiValue <= 40
    zoneText := "BEARISH"
    zoneColor := color.red
else
    zoneText := "CAUTION"
    zoneColor := color.orange

// Plot the RSI line
plot(rsiValue, "RSI Line", color=zoneColor, linewidth=2)

// Horizontal Levels
h70 = hline(70, "Overbought", color=color.red, linestyle=hline.style_solid)
h60 = hline(60, "Bullish Threshold", color=color.gray, linestyle=hline.style_dashed)
h50 = hline(50, "Midline", color=color.black, linestyle=hline.style_dotted)
h40 = hline(40, "Bearish Threshold", color=color.gray, linestyle=hline.style_dashed)
h30 = hline(30, "Oversold", color=color.green, linestyle=hline.style_solid)

// Background Fills
fill(h60, h40, color=color.new(color.orange, 90))
fill(h70, h60, color=color.new(color.green, 90))
fill(h40, h30, color=color.new(color.red, 90))

// Dynamic Label Logic
var label rsiLabel = label.new(bar_index, rsiValue, text=zoneText, color=zoneColor, textcolor=color.white, style=label.style_label_left, size=size.small)

if barstate.islast
    label.set_xy(rsiLabel, bar_index + 2, rsiValue)
    label.set_text(rsiLabel, "Zone: " + zoneText + " (" + str.tostring(math.round(rsiValue, 2)) + ")")
    label.set_color(rsiLabel, zoneColor)
