//@version=5
indicator("Combinación de BB + EMA + SMA (Configurable)", overlay=true)

//─────────────────────────────────────────────
// 1️⃣ BANDAS DE BOLLINGER
//─────────────────────────────────────────────
lengthBB1 = input.int(10, "Longitud BB 1", minval=1)
lengthBB2 = input.int(20, "Longitud BB 2", minval=1)
multBB    = input.float(2.0, "Desviación Estándar BB", step=0.1, minval=0.1)

// Cálculo BB 1
basis1 = ta.sma(close, lengthBB1)
dev1   = multBB * ta.stdev(close, lengthBB1)
upper1 = basis1 + dev1
lower1 = basis1 - dev1

// Cálculo BB 2
basis2 = ta.sma(close, lengthBB2)
dev2   = multBB * ta.stdev(close, lengthBB2)
upper2 = basis2 + dev2
lower2 = basis2 - dev2

//─────────────────────────────────────────────
// 2️⃣ EMAs CONFIGURABLES
//─────────────────────────────────────────────
emaLength1 = input.int(35, "Longitud EMA 1", minval=1)
emaLength2 = input.int(50, "Longitud EMA 2", minval=1)
emaLength3 = input.int(100, "Longitud EMA 3", minval=1)
emaLength4 = input.int(200, "Longitud EMA 4", minval=1)

ema1 = ta.ema(close, emaLength1)
ema2 = ta.ema(close, emaLength2)
ema3 = ta.ema(close, emaLength3)
ema4 = ta.ema(close, emaLength4)

//─────────────────────────────────────────────
// 3️⃣ SMAs CONFIGURABLES
//─────────────────────────────────────────────
smaLength1 = input.int(75, "Longitud SMA 1", minval=1)
smaLength2 = input.int(100, "Longitud SMA 2", minval=1)

sma1 = ta.sma(close, smaLength1)
sma2 = ta.sma(close, smaLength2)

//─────────────────────────────────────────────
// 4️⃣ PLOTEO DE TODO
//─────────────────────────────────────────────

// Bandas de Bollinger 1
plot(basis1, color=color.new(color.orange, 0), title="BB Base 1", linewidth=1)
plot(upper1, color=color.new(color.orange, 50), title="BB Superior 1")
plot(lower1, color=color.new(color.orange, 50), title="BB Inferior 1")

// Bandas de Bollinger 2
plot(basis2, color=color.new(color.purple, 0), title="BB Base 2", linewidth=1)
plot(upper2, color=color.new(color.purple, 60), title="BB Superior 2")
plot(lower2, color=color.new(color.purple, 60), title="BB Inferior 2")

// EMAs
plot(ema1, color=color.new(color.teal, 0), title="EMA 1", linewidth=1)
plot(ema2, color=color.new(color.yellow, 0), title="EMA 2", linewidth=1)
plot(ema3, color=color.new(color.red, 0), title="EMA 3", linewidth=1)
plot(ema4, color=color.new(color.fuchsia, 0), title="EMA 4", linewidth=1)

// SMAs
plot(sma1, color=color.new(color.blue, 0), title="SMA 1", linewidth=1)
plot(sma2, color=color.new(color.green, 0), title="SMA 2", linewidth=1)
