//@version=6
indicator('RSI of MaxDrawDown', shorttitle = 'RSI_MDD', overlay = false)

// --- Inputs ---
t_dd_duration = input.int(252, title = 'duration of drawdown', minval = 1)
t_ema = input.int(14, title = 'duration of EMA', minval = 1)
t_rsi = input.int(25, title = 'duration of RSI', minval = 1)

// --- Calculations ---
hh = ta.highest(high, t_dd_duration)
dd = (close - hh) / hh * 100
dd_ma = ta.ema(dd, t_ema)
rsi_dd = ta.rsi(dd_ma, t_rsi)

// --- Plotting ---
color color_rsi_hist = rsi_dd >= 50 ? rsi_dd > rsi_dd[1] ? #089981 : #3be2c7 : rsi_dd > rsi_dd[1] ? color.rgb(246, 124, 134) : #f23645
hline(50, 'RSI Middle (50)', color = color.new(color.gray, 30), linewidth = 1)
plot(rsi_dd, title = 'RSI_MDD', style = plot.style_columns, color = color_rsi_hist, histbase = 50, linewidth = 3)
