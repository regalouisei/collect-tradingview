//@version=6
indicator(shorttitle = 'RSI Stats', title = 'RSI Statistics [Honestcowboy]', overlay = false, max_boxes_count = 500, max_labels_count = 500, max_bars_back = 2000, max_polylines_count= 100)
//> $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ //> **************************************************************************************************************************************************************************************************************************************************************************************************************************************************
//> --------> Curated Color Templates <-------- //> °°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°
//> $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ //> **************************************************************************************************************************************************************************************************************************************************************************************************************************************************
cSnowWhite = #F2F0EB // 1 // 4
cPumiceStone = #CAC2B9 // 2 // 4
cDoeSkin = #BDAB9B // 2
cSpaBlue = #D3DEDF // 3
cPeachWhip = #DBBEB7 // 2
cDrizzle = #A09E9C // 1 // 4
cCastlerock = #5F5E62 // 1 // 2 // 3 // 4
cSilverShadow = #939097 // 3

cSummerGreen = #7FD37F // 3 // 4
cLemonVerbena = #F4E87A // 1 // 3 // 4
cPastelLilac = #BCAFCF // 2
cPeachQuartz = #F5B895 // 4
cFlamingoPink = #F7969E // 1 // 3
cFuchsiaPurple = #D4367A // 1 // 2
cBlueIris = #5A5B9F // 2
cBlueAtoll = #00B1D2 // 1 // 2 // 4

cPearSorbet = #F3EAC3 // 2 // 3
cCarnelian = #CE785D // 3
cCameoBrown = #C08A80 // 1 // 3
cPhloxPink = #CE5E9A // 1
cLavenderFog = #D2C4D6 // 1 // 4
cOpenAir = #94B2DF // 2 // 4
cCrownBlue = #464B65 // 4
cMarron = #6E4C4B // 3 // 4

cDirectoireBlue = #0061A3 // 2 // 4
cSimplyGreen = #009B74 // 1
cBrilliantWhite = #EDF1FF
cFreesia = #F3C12C // 1 // 2
cDustyCoral = #D29B83 // 1 // 3
cTangerineTango = #DD4124 // 3 // 4
cWildOrchid = #D979A2 // 2 // 4
cCarbon = #272F38 // 1 // 2 // 4

rsiZoneColor1 = #0061A3
rsiZoneColor2 = #009B74
rsiZoneColor3 = #D29B83
rsiZoneColor4 = #F3C12C 
rsiZoneColor5 = #DD4124
rsiZoneColor1Bg = color.new(#0061A3,60)
rsiZoneColor2Bg = color.new(#009B74,60)
rsiZoneColor3Bg = color.new(#D29B83,60)
rsiZoneColor4Bg = color.new(#F3C12C ,60)
rsiZoneColor5Bg = color.new(#DD4124,60)

bullBarColor = cSilverShadow
bearBarColor = cCastlerock
bgColor = cSnowWhite

//> $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ //> **************************************************************************************************************************************************************************************************************************************************************************************************************************************************
//> ---------> User Input <----------- //> °°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°
//> $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ //> **************************************************************************************************************************************************************************************************************************************************************************************************************************************************
rsiLength = input.int(defval=14, title="RSI Length", group="RSI Settings")
projectionLength    = input.int(defval=50, maxval=499, minval=2, title='Projection Length', group='Projection Settings')
showTinyRangePolys  = input.bool(defval=true, title='Price Action Boundaries', group='Projection Settings')
show10080RSI = input.bool(defval=true,title="100-80", group="Projections Selection")
show8060RSI = input.bool(defval=true,title="80-60", group="Projections Selection")
show6040RSI = input.bool(defval=true,title="60-40", group="Projections Selection")
show4020RSI = input.bool(defval=true,title="40-20", group="Projections Selection")
show2000RSI = input.bool(defval=true,title="20-00", group="Projections Selection")
useMaxStatsHistory = input.bool(defval=false, title="", group="Projection Settings", inline="1")
maxStatsHistoryInput     = input.int(50, title="Maximum stats history", group='Projection Settings', inline="1")
maxStatsHistory = useMaxStatsHistory ? math.min(math.floor(99999/(projectionLength+1)),maxStatsHistoryInput)  : math.floor(99999/(projectionLength+1))
showLabels          = true
centerPolyWidth     = 2
labelSize           = size.small

//> $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ //> **************************************************************************************************************************************************************************************************************************************************************************************************************************************************
//> -----> Immutable Constants <------ //> °°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°
//> $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ //> **************************************************************************************************************************************************************************************************************************************************************************************************************************************************
var RSIArray = array.new<float>(projectionLength)
var upperRSIMatrix = matrix.new<float>()
var lowerRSIMatrix = matrix.new<float>()
var RSI8060Matrix = matrix.new<float>()
var RSI6040Matrix = matrix.new<float>()
var RSI4020Matrix = matrix.new<float>()


var RSIRSIArray = array.new<float>(projectionLength)  // For averaging RSI instead of price
var RSI10080RSIMatrix = matrix.new<float>()
var RSI8060RSIMatrix = matrix.new<float>()
var RSI6040RSIMatrix = matrix.new<float>()
var RSI4020RSIMatrix = matrix.new<float>()
var RSI2000RSIMatrix = matrix.new<float>()

// 0 for avg :: 1 for max :: 2 for min
var upperRSIFinalMatrix = matrix.new<float>(3, projectionLength)
var lowerRSIFinalMatrix = matrix.new<float>(3, projectionLength)
var RSI8060FinalMatrix = matrix.new<float>(3, projectionLength)
var RSI6040FinalMatrix = matrix.new<float>(3, projectionLength)
var RSI4020FinalMatrix = matrix.new<float>(3, projectionLength)

var RSI10080RSIFinalMatrix = matrix.new<float>(3, projectionLength) // For averaging RSI instead of price
var RSI8060RSIFinalMatrix = matrix.new<float>(3, projectionLength)
var RSI6040RSIFinalMatrix = matrix.new<float>(3, projectionLength)
var RSI4020RSIFinalMatrix = matrix.new<float>(3, projectionLength)
var RSI2000RSIFinalMatrix = matrix.new<float>(3, projectionLength)

// 0 for avg :: 1 for maxmin range
var upperRSIFinalPolys = array.new<polyline>(2)
var upperRSIFinalLabels = array.new<label>(1)
var lowerRSIFinalPolys = array.new<polyline>(2)
var lowerRSIFinalLabels = array.new<label>(1)
var RSI8060FinalPolys = array.new<polyline>(2)
var RSI8060FinalLabels = array.new<label>(1)
var RSI6040FinalPolys = array.new<polyline>(2)
var RSI6040FinalLabels = array.new<label>(1)
var RSI4020FinalPolys = array.new<polyline>(2)
var RSI4020FinalLabels = array.new<label>(1)

var RSI10080RSIFinalPolys = array.new<polyline>(2) // For averaging RSI instead of price
var RSI10080RSIFinalLabels = array.new<label>(1)
var RSI8060RSIFinalPolys = array.new<polyline>(2)
var RSI8060RSIFinalLabels = array.new<label>(1)
var RSI6040RSIFinalPolys = array.new<polyline>(2)
var RSI6040RSIFinalLabels = array.new<label>(1)
var RSI4020RSIFinalPolys = array.new<polyline>(2)
var RSI4020RSIFinalLabels = array.new<label>(1)
var RSI2000RSIFinalPolys = array.new<polyline>(2)
var RSI2000RSIFinalLabels = array.new<label>(1)

//> $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ //> **************************************************************************************************************************************************************************************************************************************************************************************************************************************************
//> ---> Functional Declarations <---- //> °°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°
//> $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ //> **************************************************************************************************************************************************************************************************************************************************************************************************************************************************

_arrayLoad(_x, _max, _val) =>
    array.unshift(_x, _val)
    if array.size(_x) > _max
        array.pop(_x)

_matrixPush(_mx, _max, _row) =>
    matrix.add_row(_mx, matrix.rows(_mx), _row)
    if matrix.rows(_mx) > _max
        matrix.remove_row(_mx, 0)

_matrixColumnsAvgToArray(_matrix, _array) =>
    if _matrix.rows() >= 1 and _matrix.columns() >= 1
        for i = _matrix.columns() - 1 to 0 by 1
            a = _matrix.col(i)
            b = a.avg()
            _array.set(i, b)

_matrixColumnsMaxToArray(_matrix, _array) =>
    if _matrix.rows() >= 1 and _matrix.columns() >= 1
        for i = _matrix.columns() - 1 to 0 by 1
            a = _matrix.col(i)
            b = a.max()
            _array.set(i, b)

_matrixColumnsMinToArray(_matrix, _array) =>
    if _matrix.rows() >= 1 and _matrix.columns() >= 1
        for i = _matrix.columns() - 1 to 0 by 1
            a = _matrix.col(i)
            b = a.min()
            _array.set(i, b)

_matrixCalculationsToMatrix(_matrixStart, _matrixEnd, projectionLength) =>
    avg = array.new<float>(projectionLength)
    max = array.new<float>(projectionLength)
    min = array.new<float>(projectionLength)
    _matrixColumnsAvgToArray(_matrixStart, avg)
    _matrixColumnsMaxToArray(_matrixStart, max)
    _matrixColumnsMinToArray(_matrixStart, min)
    _matrixPush(_matrixEnd, 3, avg)
    _matrixPush(_matrixEnd, 3, max)
    _matrixPush(_matrixEnd, 3, min)

_projectionFill(_x, _projectionLength, breakPoint) =>
    for i = 1 to _projectionLength by 1
        _arrayLoad(_x, _projectionLength, (close[i] - breakPoint) / breakPoint)

_projectionFillCustomSource(_x, _projectionLength, breakPoint, _customSource) =>
    for i = 1 to _projectionLength by 1
        _arrayLoad(_x, _projectionLength, _customSource[i])

_projectionPointsFromMatrix(_referenceMatrix, _matrixRow, _pointsArray, _projectionLength, startIndex, startPrice) =>
    for i = _projectionLength - 1 to 0 by 1
        point = chart.point.from_index(startIndex + i + 1, startPrice + matrix.get(_referenceMatrix, _matrixRow, i) * startPrice)
        array.set(_pointsArray, i + 1, point)
        if i == 0
            startPoint = chart.point.from_index(startIndex, startPrice)
            array.set(_pointsArray, 0, startPoint)

_projectionPointsFromMatrixCustomSource(_referenceMatrix, _matrixRow, _pointsArray, _projectionLength, startIndex, startPrice) =>
    for i = _projectionLength - 1 to 0 by 1
        point = chart.point.from_index(startIndex + i + 1, matrix.get(_referenceMatrix, _matrixRow, i))
        array.set(_pointsArray, i + 1, point)
        if i == 0
            startPoint = chart.point.from_index(startIndex, startPrice)
            array.set(_pointsArray, 0, startPoint)

singlePolyProject(_refMatrix, int _matrixRow, _polyArray, _labelArray, _projectionLength, yStart, xStart, color, width, string labelName, int amountOfDataPoints) =>
    if _refMatrix.rows() >= 1
        if not na(_refMatrix.get(0, 1))
            var quickPoints = array.new<chart.point>(_projectionLength + 1)
            _projectionPointsFromMatrix(_refMatrix, _matrixRow, quickPoints, _projectionLength, xStart, yStart)
            polyline.delete(_polyArray.get(_matrixRow))
            _polyArray.set(_matrixRow, polyline.new(points = quickPoints, line_color = color, curved = false, line_width = width, force_overlay = true))
            finalPrice = array.get(quickPoints,array.size(quickPoints)-1).price
            if showLabels
                label.delete(_labelArray.get(0))
                _labelArray.set(0, label.new(x=bar_index+_projectionLength, y=finalPrice, xloc=xloc.bar_index, text=labelName+"____"+str.tostring(amountOfDataPoints)+" occurences", color=#363a4500, textcolor=color, text_formatting=text.format_bold, style=label.style_label_left, size=labelSize, force_overlay = true))

singlePolyProjectNoOverlayCustom(_refMatrix, int _matrixRow, _polyArray, _labelArray, _projectionLength, yStart, xStart, color, width, string labelName, int amountOfDataPoints) =>
    if _refMatrix.rows() >= 1
        if not na(_refMatrix.get(0, 1))
            var quickPoints = array.new<chart.point>(_projectionLength + 1)
            _projectionPointsFromMatrixCustomSource(_refMatrix, _matrixRow, quickPoints, _projectionLength, xStart, yStart)
            polyline.delete(_polyArray.get(_matrixRow))
            _polyArray.set(_matrixRow, polyline.new(points = quickPoints, line_color = color, curved = false, line_width = width, force_overlay = false))
            finalPrice = array.get(quickPoints,array.size(quickPoints)-1).price
            if showLabels
                label.delete(_labelArray.get(0))
                _labelArray.set(0, label.new(x=bar_index+_projectionLength, y=finalPrice, xloc=xloc.bar_index, text=labelName+"____"+str.tostring(amountOfDataPoints)+" occurences", color=#363a4500, textcolor=color, text_formatting=text.format_bold, style=label.style_label_left, size=labelSize, force_overlay = false))

doublePolyShapeProject(_refMatrix, int _matrixRow, _refMatrix2, int _matrixRow2, _polyArray, pushToIndex, _projectionLength, yStart, xStart, color, fillcolor, width) =>
    if _refMatrix.rows()>=1 and _refMatrix2.rows()>=1
        if (not na(_refMatrix.get(0, 1))) and (not na(_refMatrix2.get(0, 1)))
            quickPoints = array.new<chart.point>(_projectionLength+1)
            quickPoints2 = array.new<chart.point>(_projectionLength+1)
            combined = array.new<chart.point>()
            _projectionPointsFromMatrix(_refMatrix, _matrixRow, quickPoints, _projectionLength, xStart, yStart)
            _projectionPointsFromMatrix(_refMatrix2, _matrixRow2, quickPoints2, _projectionLength, xStart, yStart)
            // Push topPts in forward order:
            for i = 0 to array.size(quickPoints)-1
                array.push(combined, array.get(quickPoints, i))
            // Push botPts in *reverse* order:
            for j = array.size(quickPoints2) - 1 to 0
                array.push(combined, array.get(quickPoints2, j))
            polyline.delete(_polyArray.get(pushToIndex))
            _polyArray.set(pushToIndex, polyline.new(points = combined, line_color = color, curved = false, line_width = width, force_overlay = true, fill_color=fillcolor))

//> $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ //> **************************************************************************************************************************************************************************************************************************************************************************************************************************************************
//> ----> Variable Calculations <----- //> °°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°
//> $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ //> **************************************************************************************************************************************************************************************************************************************************************************************************************************************************

rsi = ta.rsi(close,rsiLength)
_projectionFill(RSIArray, projectionLength, close[projectionLength])
_projectionFillCustomSource(RSIRSIArray, projectionLength, rsi[projectionLength], rsi)
if rsi[projectionLength]>=80 
    _matrixPush(upperRSIMatrix, maxStatsHistory, RSIArray)
    _matrixPush(RSI10080RSIMatrix, maxStatsHistory, RSIRSIArray)
else if rsi[projectionLength]>=60
    _matrixPush(RSI8060Matrix, maxStatsHistory, RSIArray)
    _matrixPush(RSI8060RSIMatrix, maxStatsHistory, RSIRSIArray)
else if rsi[projectionLength]>=40
    _matrixPush(RSI6040Matrix, maxStatsHistory, RSIArray)
    _matrixPush(RSI6040RSIMatrix, maxStatsHistory, RSIRSIArray)
else if rsi[projectionLength]>=20
    _matrixPush(RSI4020Matrix, maxStatsHistory, RSIArray)
    _matrixPush(RSI4020RSIMatrix, maxStatsHistory, RSIRSIArray)
else if rsi[projectionLength]!=0
    _matrixPush(lowerRSIMatrix, maxStatsHistory, RSIArray)
    _matrixPush(RSI2000RSIMatrix, maxStatsHistory, RSIRSIArray)

if barstate.islast// This will perform all calculations for the averages and extremes and put them in a new matrix used for final projections
    _matrixCalculationsToMatrix(upperRSIMatrix, upperRSIFinalMatrix, projectionLength)
    _matrixCalculationsToMatrix(lowerRSIMatrix, lowerRSIFinalMatrix, projectionLength)
    _matrixCalculationsToMatrix(RSI8060Matrix, RSI8060FinalMatrix, projectionLength)
    _matrixCalculationsToMatrix(RSI6040Matrix, RSI6040FinalMatrix, projectionLength)
    _matrixCalculationsToMatrix(RSI4020Matrix, RSI4020FinalMatrix, projectionLength)
    _matrixCalculationsToMatrix(RSI10080RSIMatrix, RSI10080RSIFinalMatrix, projectionLength)
    _matrixCalculationsToMatrix(RSI2000RSIMatrix, RSI2000RSIFinalMatrix, projectionLength)
    _matrixCalculationsToMatrix(RSI8060RSIMatrix, RSI8060RSIFinalMatrix, projectionLength)
    _matrixCalculationsToMatrix(RSI6040RSIMatrix, RSI6040RSIFinalMatrix, projectionLength)
    _matrixCalculationsToMatrix(RSI4020RSIMatrix, RSI4020RSIFinalMatrix, projectionLength)
if barstate.islast
    if showTinyRangePolys
        if show10080RSI
            doublePolyShapeProject(upperRSIFinalMatrix, 1, upperRSIFinalMatrix, 2, upperRSIFinalPolys, 1, projectionLength, close, bar_index, rsiZoneColor1, rsiZoneColor1Bg, 1)
        if show2000RSI
            doublePolyShapeProject(lowerRSIFinalMatrix, 1, lowerRSIFinalMatrix, 2, lowerRSIFinalPolys, 1, projectionLength, close, bar_index, rsiZoneColor5, rsiZoneColor5Bg, 1)
        if show8060RSI
            doublePolyShapeProject(RSI8060FinalMatrix, 1, RSI8060FinalMatrix, 2, RSI8060FinalPolys, 1, projectionLength, close, bar_index, rsiZoneColor2, rsiZoneColor2Bg, 1)
        if show6040RSI
            doublePolyShapeProject(RSI6040FinalMatrix, 1, RSI6040FinalMatrix, 2, RSI6040FinalPolys, 1, projectionLength, close, bar_index, rsiZoneColor3, rsiZoneColor3Bg, 1)
        if show4020RSI
            doublePolyShapeProject(RSI4020FinalMatrix, 1, RSI4020FinalMatrix, 2, RSI4020FinalPolys, 1, projectionLength, close, bar_index, rsiZoneColor4, rsiZoneColor4Bg, 1)
    if show10080RSI
        singlePolyProject(upperRSIFinalMatrix, 0, upperRSIFinalPolys, upperRSIFinalLabels, projectionLength, close, bar_index, rsiZoneColor1, centerPolyWidth,"RSI-100-80", matrix.rows(upperRSIMatrix))
    if show2000RSI
        singlePolyProject(lowerRSIFinalMatrix, 0, lowerRSIFinalPolys, lowerRSIFinalLabels, projectionLength, close, bar_index, rsiZoneColor5, centerPolyWidth,"RSI-20-00", matrix.rows(lowerRSIMatrix))
    if show8060RSI
        singlePolyProject(RSI8060FinalMatrix, 0, RSI8060FinalPolys, RSI8060FinalLabels, projectionLength, close, bar_index, rsiZoneColor2, centerPolyWidth,"RSI-80-60", matrix.rows(RSI8060Matrix))
    if show6040RSI
        singlePolyProject(RSI6040FinalMatrix, 0, RSI6040FinalPolys, RSI6040FinalLabels, projectionLength, close, bar_index, rsiZoneColor3, centerPolyWidth,"RSI-60-40", matrix.rows(RSI6040Matrix))
    if show4020RSI
        singlePolyProject(RSI4020FinalMatrix, 0, RSI4020FinalPolys, RSI4020FinalLabels, projectionLength, close, bar_index, rsiZoneColor4, centerPolyWidth,"RSI-40-20", matrix.rows(RSI4020Matrix))
    if show10080RSI
        singlePolyProjectNoOverlayCustom(RSI10080RSIFinalMatrix, 0, RSI10080RSIFinalPolys, RSI10080RSIFinalLabels, projectionLength, 90, bar_index, rsiZoneColor1, centerPolyWidth,"RSI-100-80", matrix.rows(RSI10080RSIMatrix))
    if show2000RSI
        singlePolyProjectNoOverlayCustom(RSI2000RSIFinalMatrix, 0, RSI2000RSIFinalPolys, RSI2000RSIFinalLabels, projectionLength, 10, bar_index, rsiZoneColor5, centerPolyWidth,"RSI-20-00", matrix.rows(RSI2000RSIMatrix))
    if show8060RSI
        singlePolyProjectNoOverlayCustom(RSI8060RSIFinalMatrix, 0, RSI8060RSIFinalPolys, RSI8060RSIFinalLabels, projectionLength, 70, bar_index, rsiZoneColor2, centerPolyWidth,"RSI-80-60", matrix.rows(RSI8060RSIMatrix))
    if show6040RSI
        singlePolyProjectNoOverlayCustom(RSI6040RSIFinalMatrix, 0, RSI6040RSIFinalPolys, RSI6040RSIFinalLabels, projectionLength, 50, bar_index, rsiZoneColor3, centerPolyWidth,"RSI-60-40", matrix.rows(RSI6040RSIMatrix))
    if show4020RSI
        singlePolyProjectNoOverlayCustom(RSI4020RSIFinalMatrix, 0, RSI4020RSIFinalPolys, RSI4020RSIFinalLabels, projectionLength, 30, bar_index, rsiZoneColor4, centerPolyWidth,"RSI-40-20", matrix.rows(RSI4020RSIMatrix))

//> $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ //> **************************************************************************************************************************************************************************************************************************************************************************************************************************************************
//> -----> Graphical Display <----- //> °°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°
//> $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ //> **************************************************************************************************************************************************************************************************************************************************************************************************************************************************
// Force user in adopting color theme
barcolor(close>open ? bullBarColor : bearBarColor, editable=false)
bgcolor(bgColor, editable=false, force_overlay=true)
bgcolor(bgColor, offset=100, editable=false, force_overlay=true)
bgcolor(bgColor, offset=200, editable=false, force_overlay=true)
bgcolor(bgColor, offset=400, editable=false, force_overlay=true)
bgcolor(bgColor, offset=600, editable=false, force_overlay=true)
bgcolor(bgColor, editable=false, force_overlay=false)
bgcolor(bgColor, offset=100, editable=false, force_overlay=false)
bgcolor(bgColor, offset=200, editable=false, force_overlay=false)
bgcolor(bgColor, offset=400, editable=false, force_overlay=false)
bgcolor(bgColor, offset=600, editable=false, force_overlay=false)

rsiWidth = 3
rsiColor = rsi>=80 ? rsiZoneColor1 : rsi>=60 ? rsiZoneColor2 : rsi>=40 ? rsiZoneColor3 : rsi>=20 ? rsiZoneColor4 : rsiZoneColor5
plot(rsi, linewidth=rsiWidth, color=rsiColor, editable=false)
rsiZoneLineWidth = 1
topRSI10080Plot = plot(100, color=rsiZoneColor1, linewidth=rsiZoneLineWidth, editable=false)
botRSI10080Plot = plot(80, color=rsiZoneColor1, linewidth=rsiZoneLineWidth, editable=false)
topRSI8060Plot = plot(80, color=rsiZoneColor2, linewidth=rsiZoneLineWidth, editable=false)
botRSI8060Plot = plot(60, color=rsiZoneColor2, linewidth=rsiZoneLineWidth, editable=false)
topRSI6040Plot = plot(60, color=rsiZoneColor3, linewidth=rsiZoneLineWidth, editable=false)
botRSI6040Plot = plot(40, color=rsiZoneColor3, linewidth=rsiZoneLineWidth, editable=false)
topRSI4020Plot = plot(40, color=rsiZoneColor4, linewidth=rsiZoneLineWidth, editable=false)
botRSI4020Plot = plot(20, color=rsiZoneColor4, linewidth=rsiZoneLineWidth, editable=false)
topRSI2000Plot = plot(20, color=rsiZoneColor5, linewidth=rsiZoneLineWidth, editable=false)
botRSI2000Plot = plot(00, color=rsiZoneColor5, linewidth=rsiZoneLineWidth, editable=false)
fill(topRSI10080Plot, botRSI10080Plot, color=rsiZoneColor1Bg, editable=false)
fill(topRSI8060Plot, botRSI8060Plot, color=rsiZoneColor2Bg, editable=false)
fill(topRSI6040Plot, botRSI6040Plot, color=rsiZoneColor3Bg, editable=false)
fill(topRSI4020Plot, botRSI4020Plot, color=rsiZoneColor4Bg, editable=false)
fill(topRSI2000Plot, botRSI2000Plot, color=rsiZoneColor5Bg, editable=false)
