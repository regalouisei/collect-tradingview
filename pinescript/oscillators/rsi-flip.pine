//@version=5
indicator(title="RSI Flip", shorttitle="RSI 30/70", overlay=true)

backtestingCompatible = input.bool(false, 'Backtesting compatible', tooltip='Enable this to plot 1 for longs and 2 for shorts so you can use this indicator with the backtest script.')
rsiPeriod = input.int(7, "RSI Period")
rsiValue = ta.rsi(close, rsiPeriod)

// === Trigger Logic ===
// RSI < 30 → Long trigger
// RSI > 70 → Short trigger
longTrigger  = rsiValue < 30
shortTrigger = rsiValue > 70

// === Backtest-Compatible Signals ===
// 1 = Long Deal Trigger, 2 = Short Deal Trigger
sigLong  = backtestingCompatible and longTrigger  ? 1 : 0
sigShort = backtestingCompatible and shortTrigger ? 2 : 0

// === Hidden Plots for Strategy Integration ===
plot(sigLong , 'Long Trigger', display=display.none)
plot(sigShort, 'Short Trigger', display=display.none)

// === Background Tinting Between Triggers ===
var int bias = na  // 1 = Long, 2 = Short

if longTrigger
    bias := 1
else if shortTrigger
    bias := 2
