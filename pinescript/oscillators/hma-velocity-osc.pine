//@version=6
indicator("HMA Velocity Osc", shorttitle="HMA Vel", overlay=false)

// Inputs
src = input.source(close, "Source")
len = input.int(55, "HMA Length", minval=1)
lagBars = input.int(3, "Lag (bars)", minval=1)

// Core
hma = ta.hma(src, len)
osc = hma - hma[lagBars]

// Plots
hline(0, "Zero", linestyle=hline.style_dotted)
plot(osc, title="HMA Velocity", style=plot.style_histogram, linewidth=2)
plot(ta.sma(osc, 5), title="Signal (SMA 5)", linewidth=1)

// Alerts (opsiyonel ama faydalÄ±)
alertcondition(ta.crossover(osc, 0), title="Osc crosses above 0", message="HMA Velocity crossed ABOVE 0")
alertcondition(ta.crossunder(osc, 0), title="Osc crosses below 0", message="HMA Velocity crossed BELOW 0")
