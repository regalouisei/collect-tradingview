// This source code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/





// This source code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/





//@version=5

indicator('Tabela RSI + 5 EMAs | DD', overlay=true)



canRender(timeframetorender) =>

    timeframe.period == timeframetorender



RSI00 = canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday ? request.security(syminfo.tickerid, '5', ta.rsi(close, 14)[0]) : 0

RSI01 = canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday ? request.security(syminfo.tickerid, '15', ta.rsi(close, 14)[0]) : 0

RSI02 = canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday ? request.security(syminfo.tickerid, '30', ta.rsi(close, 14)[0]) : 0

RSI03 = canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday ? request.security(syminfo.tickerid, '60', ta.rsi(close, 14)[0]) : 0

RSI04 = canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday ? request.security(syminfo.tickerid, '120', ta.rsi(close, 14)[0]) : 0

RSI05 = canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday ? request.security(syminfo.tickerid, '240', ta.rsi(close, 14)[0]) : 0

RSI06 = canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday ? request.security(syminfo.tickerid, 'D', ta.rsi(close, 14)[0]) : 0

RSI07 = canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday ? request.security(syminfo.tickerid, 'W', ta.rsi(close, 14)[0]) : 0

RSI08 = canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday ? request.security(syminfo.tickerid, 'M', ta.rsi(close, 14)[0]) : 0



var testTable = table.new(position=position.bottom_right, columns=2, rows=10, bgcolor=color.rgb(222, 222, 222), border_width=2, frame_color=color.black, frame_width=2)

if barstate.islast

    table.cell(table_id=testTable, column=0, row=0, text='RSI')

    if canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday

        table.cell(table_id=testTable, column=0, row=1, text='5M')

    if canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday

        table.cell(table_id=testTable, column=0, row=2, text='15M')

    if canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday

        table.cell(table_id=testTable, column=0, row=3, text='30M')

    if canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday

        table.cell(table_id=testTable, column=0, row=4, text='1H')

    if canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday

        table.cell(table_id=testTable, column=0, row=5, text='2H')

    if canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday

        table.cell(table_id=testTable, column=0, row=6, text='4H')

    if canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday

        table.cell(table_id=testTable, column=0, row=7, text='D')

    if canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday

        table.cell(table_id=testTable, column=0, row=8, text='W')

    table.cell(table_id=testTable, column=0, row=9, text='M')



    table.cell(table_id=testTable, column=1, row=0, text="DD")

    if canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday

        table.cell(table_id=testTable, column=1, row=1, text=str.tostring(int(RSI00)), bgcolor=color.from_gradient(RSI00, 30, 70, color.rgb(255, 77, 77), color.rgb(0, 204, 102)))

    if canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday

        table.cell(table_id=testTable, column=1, row=2, text=str.tostring(int(RSI01)), bgcolor=color.from_gradient(RSI01, 30, 70, color.rgb(255, 77, 77), color.rgb(0, 204, 102)))

    if canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday

        table.cell(table_id=testTable, column=1, row=3, text=str.tostring(int(RSI02)), bgcolor=color.from_gradient(RSI02, 30, 70, color.rgb(255, 77, 77), color.rgb(0, 204, 102)))

    if canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday

        table.cell(table_id=testTable, column=1, row=4, text=str.tostring(int(RSI03)), bgcolor=color.from_gradient(RSI03, 30, 70, color.rgb(255, 77, 77), color.rgb(0, 204, 102)))

    if canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday

        table.cell(table_id=testTable, column=1, row=5, text=str.tostring(int(RSI04)), bgcolor=color.from_gradient(RSI04, 30, 70, color.rgb(255, 77, 77), color.rgb(0, 204, 102)))

    if canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday

        table.cell(table_id=testTable, column=1, row=6, text=str.tostring(int(RSI05)), bgcolor=color.from_gradient(RSI05, 30, 70, color.rgb(255, 77, 77), color.rgb(0, 204, 102)))

    if canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday

        table.cell(table_id=testTable, column=1, row=7, text=str.tostring(int(RSI06)), bgcolor=color.from_gradient(RSI06, 30, 70, color.rgb(255, 77, 77), color.rgb(0, 204, 102)))

    if canRender('1') or canRender('3') or canRender('5') or canRender('15') or canRender('30') or canRender('60') or canRender('120') or canRender('240') or timeframe.isdaily or timeframe.isweekly or timeframe.isintraday

        table.cell(table_id=testTable, column=1, row=8, text=str.tostring(int(RSI07)), bgcolor=color.from_gradient(RSI07, 30, 70, color.rgb(255, 77, 77), color.rgb(0, 204, 102)))

    table.cell(table_id=testTable, column=1, row=9, text=str.tostring(int(RSI08)), bgcolor=color.from_gradient(RSI08, 30, 70, color.rgb(255, 77, 77), color.rgb(0, 204, 102)))





length1 = input.int(8, minval=1)

length2 = input.int(21, minval=1)

length3 = input.int(56, minval=1)

length4 = input.int(100, minval=1)

length5 = input.int(200, minval=1)

length6 = input.int(610, minval=1)

length7 = input.int(1200, minval=1)

ema1 = ta.ema(close, length1)

ema2 = ta.ema(close, length2)

ema3 = ta.ema(close, length3)

ema4 = ta.ema(close, length4)

ema5 = ta.ema(close, length5)

ema6 = ta.ema(close, length6)

ema7 = ta.ema(close, length7)



plot(ema1, 'TEMA', color=color.new(#3cbb38, 0), linewidth=2)

plot(ema2, 'TEMA', color=color.new(#e4e13b, 0), linewidth=2)

plot(ema3, 'TEMA', color=color.new(#f18648, 0), linewidth=2)

plot(ema4, 'TEMA', color=color.new(#43def3, 0), linewidth=2)

plot(ema5, 'TEMA', color=color.new(#f14098, 0), linewidth=2)

plot(ema6, 'TEMA', color=color.new(#3e4bf8, 0), linewidth=2)

plot(ema7, 'TEMA', color=color.new(#ff3030, 0), linewidth=2)





lengthGroupTitle = "LENGTH LEFT / RIGHT"

colorGroupTitle = "Text Color / Label Color"

leftLenH = input.int(title="Pivot High", defval=10, minval=1, inline="Pivot High", group=lengthGroupTitle)

rightLenH = input.int(title="/", defval=10, minval=1, inline="Pivot High", group=lengthGroupTitle)

textColorH = input(title="Pivot High", defval=color.black, inline="Pivot High", group=colorGroupTitle)

labelColorH = input(title="", defval=color.white, inline="Pivot High", group=colorGroupTitle)



leftLenL = input.int(title="Pivot Low", defval=10, minval=1, inline="Pivot Low", group=lengthGroupTitle)

rightLenL = input.int(title="/", defval=10, minval=1, inline="Pivot Low", group=lengthGroupTitle)

textColorL = input(title="Pivot Low", defval=color.black, inline="Pivot Low", group=colorGroupTitle)

labelColorL = input(title="", defval=color.white, inline="Pivot Low", group=colorGroupTitle)



ph = ta.pivothigh(leftLenH, rightLenH)

pl = ta.pivotlow(leftLenL, rightLenL)



drawLabel(_offset, _pivot, _style, _color, _textColor) =>

    if not na(_pivot)

        label.new(bar_index[_offset], _pivot, str.tostring(_pivot, format.mintick), style=_style, color=_color, textcolor=_textColor)



drawLabel(rightLenH, ph, label.style_label_down, labelColorH, textColorH)

drawLabel(rightLenL, pl, label.style_label_up, labelColorL, textColorL)
