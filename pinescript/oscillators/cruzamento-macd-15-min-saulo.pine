//@version=5
indicator("MACD 4H Buy & Sell (Fechamento)", overlay=true)

// ðŸ”¹ ForÃ§a timeframe 4H
tf = "15"

// ðŸ”¹ ParÃ¢metros do MACD
fastLength = 12
slowLength = 26
signalLength = 9

// ðŸ”¹ MACD calculado no 4H
[macdLine, signalLine, _] = request.security(syminfo.tickerid, tf,ta.macd(close, fastLength, slowLength, signalLength))

// ðŸ”¹ CondiÃ§Ãµes de cruzamento (somente apÃ³s fechar candle)
buySignal  = ta.crossover(macdLine, signalLine)
sellSignal = ta.crossunder(macdLine, signalLine)

// ðŸ”¹ Plot dos sinais no grÃ¡fico
plotshape(buySignal,title="BUY",style=shape.labelup,location=location.belowbar,color=color.green,text="BUY",textcolor=color.white,size=size.small)

plotshape(sellSignal,title="SELL",style=shape.labeldown,location=location.abovebar,color=color.red,text="SELL",textcolor=color.white,size=size.small)

// ðŸ”¹ Alertas
alertcondition(buySignal, title="Alerta BUY", message="MACD cruzou para CIMA no 4H")
alertcondition(sellSignal, title="Alerta SELL", message="MACD cruzou para BAIXO no 4H")
