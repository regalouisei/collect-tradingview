// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//
//    â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—     â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—
//    â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•    â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘
//    â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—      â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘
//    â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•      â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘
//     â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘
//      â•šâ•â•â•â•   â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•     â•šâ•â•â•šâ•â•â•â•â•â•â•    â•šâ•â•     â•šâ•â• â•šâ•â•â•â•â•â• â•šâ•â•     â•šâ•â•
//
//    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
//    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•
//    â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
//    â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â•  â•šâ•â•â•â•â–ˆâ–ˆâ•‘
//    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘
//    â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•â•  â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•â• â•šâ•â•â•â•â•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•â•
//
//                    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                    â•‘     TH_MTMGBS Volume Momentum Divergence System     â•‘
//                    â•‘            Professional Chart Overlay               â•‘
//                    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//
//    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
//    â”‚  ğŸ¯ DETECTS: Regular Divergences | Hidden Divergences | Double Top/Bottom Patterns     â”‚
//    â”‚  ğŸ“Š ENGINE:  Hybrid Momentum + Bollinger Band Distance Oscillator (Hidden)             â”‚
//    â”‚  âœ¨ VISUALS: On-Chart Lines | Signal Markers | Dynamic Status Panel                    â”‚
//    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

//@version=5
indicator("VMDivergences", shorttitle="â—ˆ TH VMDiv", overlay=true, max_lines_count=500, max_labels_count=500)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                                    ğŸ¨ PREMIUM COLOR PALETTE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ NEON CORE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
var color NEON_BULL       = #00FF88
var color NEON_BEAR       = #FF3366
var color NEON_GOLD       = #FFD700
var color NEON_CYAN       = #00FFFF
var color NEON_PURPLE     = #BF40FF
var color NEON_ORANGE     = #FF6B35

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ SOFT TONES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
var color SOFT_BULL       = #4CAF50
var color SOFT_BEAR       = #EF5350
var color SOFT_BLUE       = #42A5F5
var color SOFT_VIOLET     = #AB47BC

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ NEUTRALS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
var color NEUTRAL_100     = #F5F5F5
var color NEUTRAL_300     = #B0BEC5
var color NEUTRAL_500     = #607D8B
var color NEUTRAL_700     = #37474F
var color NEUTRAL_900     = #1A1A2E

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ PANEL THEME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
var color PANEL_BG        = color.new(#0D1117, 5)
var color PANEL_HEADER    = color.new(#161B22, 0)
var color PANEL_BORDER    = color.new(#30363D, 0)
var color PANEL_ACCENT    = color.new(#238636, 0)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                                      âš™ï¸ INPUT PARAMETERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘                                    OSCILLATOR ENGINE                                          â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
grpOsc = "âš¡ OSCILLATOR ENGINE"
i_bandPeriod   = input.int(20, "â•â• Bollinger Period", minval=5, maxval=100, tooltip="Lookback period for Bollinger Band calculation. Higher = smoother oscillator.", group=grpOsc)
i_fastPeriod   = input.int(12, "â•â• Fast EMA", minval=3, maxval=50, tooltip="Fast EMA period for momentum calculation.", group=grpOsc)
i_slowPeriod   = input.int(26, "â•â• Slow EMA", minval=10, maxval=100, tooltip="Slow EMA period for momentum calculation.", group=grpOsc)
i_stdDevMult   = input.float(2.0, "â•â• Std Dev Multiplier", minval=0.5, maxval=4.0, step=0.1, tooltip="Standard deviation multiplier for bands.", group=grpOsc)
i_inputType    = input.string("Close", "â•â• Price Source", options=["Close", "HL2", "HLC3", "OHLC4"], tooltip="Price data used for calculations.", group=grpOsc)
i_signalPeriod = input.int(9, "â•â• Signal Line EMA", minval=3, maxval=21, tooltip="EMA period for signal line smoothing.", group=grpOsc)

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘                                    PIVOT DETECTION                                            â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
grpPivot = "ğŸ” PIVOT DETECTION"
i_swingStr     = input.int(5, "â•â• Swing Strength", minval=2, maxval=20, tooltip="Bars on each side required to confirm a pivot point. Higher = fewer, stronger pivots.", group=grpPivot)
i_momBlend     = input.float(1.0, "â•â• Momentum Blend", minval=0.0, maxval=1.0, step=0.1, tooltip="1.0 = Pure Momentum | 0.0 = Pure Band Distance | 0.5 = Balanced blend.", group=grpPivot)
i_dtbTol       = input.float(0.3, "â•â• DTB Tolerance (ATRÃ—)", minval=0.1, maxval=1.0, step=0.05, tooltip="ATR multiplier for Double Top/Bottom price tolerance.", group=grpPivot)

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘                                    DIVERGENCE FILTERS                                         â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
grpDiv = "ğŸ“ DIVERGENCE FILTERS"
i_showRegular  = input.bool(true, "â•â• Regular Divergences", tooltip="Classic reversal divergences: Price vs Oscillator moving opposite directions.", group=grpDiv)
i_showHidden   = input.bool(true, "â•â• Hidden Divergences", tooltip="Trend continuation divergences: Signaling trend is likely to resume.", group=grpDiv)
i_showDoubles  = input.bool(true, "â•â• Double Top/Bottom", tooltip="Similar price levels with diverging momentum.", group=grpDiv)
i_divMinBars   = input.int(5, "â•â• Min Pivot Distance", minval=2, maxval=30, tooltip="Minimum bars between pivots for valid divergence.", group=grpDiv)
i_divMaxBars   = input.int(50, "â•â• Max Pivot Distance", minval=10, maxval=200, tooltip="Maximum bars between pivots for valid divergence.", group=grpDiv)

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘                                    VISUAL STYLE                                               â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
grpVisual = "ğŸ¨ VISUAL STYLE"
i_showLines   = input.bool(true, "â•â• Divergence Lines", tooltip="Draw lines connecting divergence pivot points.", group=grpVisual)
i_showLabels  = input.bool(true, "â•â• Signal Labels", tooltip="Show text labels on divergence signals.", group=grpVisual)
i_showGlow    = input.bool(true, "â•â• Glow Effects", tooltip="Add glow/shadow effects for enhanced visibility.", group=grpVisual)
i_showPanel   = input.bool(true, "â•â• Status Panel", tooltip="Display real-time divergence status panel.", group=grpVisual)

// â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
// â•‘                                    COLOR THEME                                                â•‘
// â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
grpColors = "ğŸŒˆ COLOR THEME"
i_theme       = input.string("Neon", "â•â• Color Theme", options=["Neon", "Classic", "Ocean", "Sunset", "Monochrome"], tooltip="Overall color scheme for the indicator.", group=grpColors)
i_bullColor   = input.color(#00FF88, "â•â• Bullish Color", tooltip="Color for bullish signals and elements.", group=grpColors)
i_bearColor   = input.color(#FF3366, "â•â• Bearish Color", tooltip="Color for bearish signals and elements.", group=grpColors)
i_lineWidth   = input.int(2, "â•â• Line Thickness", minval=1, maxval=5, tooltip="Width of divergence lines.", group=grpColors)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                                    ğŸ¯ THEME APPLICATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Dynamic theme colors
var color themeBull    = i_bullColor
var color themeBear    = i_bearColor
var color themeDblBot  = NEON_CYAN
var color themeDblTop  = NEON_PURPLE
var color themeSignal  = NEON_GOLD

if i_theme == "Classic"
    themeBull   := #26A69A
    themeBear   := #EF5350
    themeDblBot := #42A5F5
    themeDblTop := #AB47BC
    themeSignal := #FFA726
else if i_theme == "Ocean"
    themeBull   := #00BCD4
    themeBear   := #E91E63
    themeDblBot := #03A9F4
    themeDblTop := #9C27B0
    themeSignal := #00E5FF
else if i_theme == "Sunset"
    themeBull   := #FFEB3B
    themeBear   := #FF5722
    themeDblBot := #FFC107
    themeDblTop := #E91E63
    themeSignal := #FF9800
else if i_theme == "Monochrome"
    themeBull   := #ECEFF1
    themeBear   := #78909C
    themeDblBot := #B0BEC5
    themeDblTop := #90A4AE
    themeSignal := #CFD8DC

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                                      ğŸ“ˆ INPUT SOURCE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

src = switch i_inputType
    "Close" => close
    "HL2"   => hl2
    "HLC3"  => hlc3
    "OHLC4" => ohlc4
    => close

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                               ğŸ”§ VOLUME MOMENTUM OSCILLATOR ENGINE (Hidden)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ MOMENTUM COMPONENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
fastEMA  = ta.ema(src, i_fastPeriod)
slowEMA  = ta.ema(src, i_slowPeriod)
momentum = fastEMA - slowEMA

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ BOLLINGER COMPONENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
bbBasis  = ta.sma(src, i_bandPeriod)
bbDev    = ta.stdev(src, i_bandPeriod) * i_stdDevMult

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ NORMALIZED DISTANCE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
distToBand = bbDev > 0 ? (src - bbBasis) / bbDev : 0

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ HYBRID OSCILLATOR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
momStd   = ta.stdev(momentum, i_bandPeriod)
momNorm  = momStd > 0 ? momentum / momStd : 0
vmOsc    = momNorm * i_momBlend + distToBand * (1 - i_momBlend)

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ SIGNAL LINE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
vmSignal = ta.ema(vmOsc, i_signalPeriod)
vmHist   = vmOsc - vmSignal

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ OSCILLATOR STATES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
oscRising  = vmOsc > vmOsc[1]
oscFalling = vmOsc < vmOsc[1]
aboveZero  = vmOsc >= 0
belowZero  = vmOsc < 0
crossUp    = ta.crossover(vmOsc, vmSignal)
crossDown  = ta.crossunder(vmOsc, vmSignal)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                                  ğŸ“ PRICE PIVOT DETECTION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

priceSwingHigh = ta.pivothigh(high, i_swingStr, i_swingStr)
priceSwingLow  = ta.pivotlow(low, i_swingStr, i_swingStr)

var float[] priceHighs    = array.new_float(0)
var int[]   priceHighBars = array.new_int(0)
var float[] priceLows     = array.new_float(0)
var int[]   priceLowBars  = array.new_int(0)

if not na(priceSwingHigh)
    array.unshift(priceHighs, priceSwingHigh)
    array.unshift(priceHighBars, bar_index - i_swingStr)
    if array.size(priceHighs) > 5
        array.pop(priceHighs)
        array.pop(priceHighBars)

if not na(priceSwingLow)
    array.unshift(priceLows, priceSwingLow)
    array.unshift(priceLowBars, bar_index - i_swingStr)
    if array.size(priceLows) > 5
        array.pop(priceLows)
        array.pop(priceLowBars)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                               ğŸ“ OSCILLATOR PIVOT DETECTION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

oscSwingHigh = ta.pivothigh(vmOsc, i_swingStr, i_swingStr)
oscSwingLow  = ta.pivotlow(vmOsc, i_swingStr, i_swingStr)

var float[] oscHighs    = array.new_float(0)
var int[]   oscHighBars = array.new_int(0)
var float[] oscLows     = array.new_float(0)
var int[]   oscLowBars  = array.new_int(0)

if not na(oscSwingHigh)
    array.unshift(oscHighs, oscSwingHigh)
    array.unshift(oscHighBars, bar_index - i_swingStr)
    if array.size(oscHighs) > 5
        array.pop(oscHighs)
        array.pop(oscHighBars)

if not na(oscSwingLow)
    array.unshift(oscLows, oscSwingLow)
    array.unshift(oscLowBars, bar_index - i_swingStr)
    if array.size(oscLows) > 5
        array.pop(oscLows)
        array.pop(oscLowBars)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                                   ğŸ¯ EXTRACT PIVOT DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Price pivots
ph0    = array.size(priceHighs) > 0 ? array.get(priceHighs, 0) : na
ph1    = array.size(priceHighs) > 1 ? array.get(priceHighs, 1) : na
phBar0 = array.size(priceHighBars) > 0 ? array.get(priceHighBars, 0) : na
phBar1 = array.size(priceHighBars) > 1 ? array.get(priceHighBars, 1) : na

pl0    = array.size(priceLows) > 0 ? array.get(priceLows, 0) : na
pl1    = array.size(priceLows) > 1 ? array.get(priceLows, 1) : na
plBar0 = array.size(priceLowBars) > 0 ? array.get(priceLowBars, 0) : na
plBar1 = array.size(priceLowBars) > 1 ? array.get(priceLowBars, 1) : na

// Oscillator pivots (used for divergence logic, not for drawing)
oh0    = array.size(oscHighs) > 0 ? array.get(oscHighs, 0) : na
oh1    = array.size(oscHighs) > 1 ? array.get(oscHighs, 1) : na
ohBar0 = array.size(oscHighBars) > 0 ? array.get(oscHighBars, 0) : na
ohBar1 = array.size(oscHighBars) > 1 ? array.get(oscHighBars, 1) : na

ol0    = array.size(oscLows) > 0 ? array.get(oscLows, 0) : na
ol1    = array.size(oscLows) > 1 ? array.get(oscLows, 1) : na
olBar0 = array.size(oscLowBars) > 0 ? array.get(oscLowBars, 0) : na
olBar1 = array.size(oscLowBars) > 1 ? array.get(oscLowBars, 1) : na

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                                   âœ… VALIDATION LOGIC
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// High pivot validation
phBarsExist   = not na(phBar0) and not na(phBar1)
phBarDist     = phBar0 - phBar1
validHighBars = phBarsExist and phBarDist >= i_divMinBars and phBarDist <= i_divMaxBars

// Low pivot validation
plBarsExist  = not na(plBar0) and not na(plBar1)
plBarDist    = plBar0 - plBar1
validLowBars = plBarsExist and plBarDist >= i_divMinBars and plBarDist <= i_divMaxBars

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                                  ğŸ”€ DIVERGENCE DETECTION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚ ğŸ”´ REGULAR BEARISH: Price Higher High â†— + Oscillator Lower High â†˜ = Potential Reversal Down   â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
regBearValid = i_showRegular and validHighBars
regBearData  = not na(ph0) and not na(ph1) and not na(oh0) and not na(oh1)
regBearLogic = ph0 > ph1 and oh0 < oh1
regularBearish = regBearValid and regBearData and regBearLogic

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚ ğŸŸ¢ REGULAR BULLISH: Price Lower Low â†˜ + Oscillator Higher Low â†— = Potential Reversal Up       â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
regBullValid = i_showRegular and validLowBars
regBullData  = not na(pl0) and not na(pl1) and not na(ol0) and not na(ol1)
regBullLogic = pl0 < pl1 and ol0 > ol1
regularBullish = regBullValid and regBullData and regBullLogic

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚ ğŸŸ  HIDDEN BEARISH: Price Lower High â†˜ + Oscillator Higher High â†— = Trend Continuation Down    â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
hidBearValid = i_showHidden and validHighBars
hidBearData  = not na(ph0) and not na(ph1) and not na(oh0) and not na(oh1)
hidBearLogic = ph0 < ph1 and oh0 > oh1
hiddenBearish = hidBearValid and hidBearData and hidBearLogic

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚ ğŸŸ¡ HIDDEN BULLISH: Price Higher Low â†— + Oscillator Lower Low â†˜ = Trend Continuation Up        â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
hidBullValid = i_showHidden and validLowBars
hidBullData  = not na(pl0) and not na(pl1) and not na(ol0) and not na(ol1)
hidBullLogic = pl0 > pl1 and ol0 < ol1
hiddenBullish = hidBullValid and hidBullData and hidBullLogic

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚ ğŸŸ£ DOUBLE TOP: Similar Price Highs + Oscillator Declining = Strong Resistance                  â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
dtbTolerance = ta.atr(14) * i_dtbTol

dblTopValid = i_showDoubles and validHighBars
dblTopData  = not na(ph0) and not na(ph1) and not na(oh0) and not na(oh1)
dblTopLogic = math.abs(ph0 - ph1) <= dtbTolerance and oh0 < oh1
isDoubleTop = dblTopValid and dblTopData and dblTopLogic

// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚ ğŸ”µ DOUBLE BOTTOM: Similar Price Lows + Oscillator Rising = Strong Support                      â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
dblBotValid = i_showDoubles and validLowBars
dblBotData  = not na(pl0) and not na(pl1) and not na(ol0) and not na(ol1)
dblBotLogic = math.abs(pl0 - pl1) <= dtbTolerance and ol0 > ol1
isDoubleBottom = dblBotValid and dblBotData and dblBotLogic

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                                   âš¡ SIGNAL EDGE DETECTION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

newRegBearish = regularBearish and not regularBearish[1]
newRegBullish = regularBullish and not regularBullish[1]
newHidBearish = hiddenBearish and not hiddenBearish[1]
newHidBullish = hiddenBullish and not hiddenBullish[1]
newDblTop     = isDoubleTop and not isDoubleTop[1]
newDblBottom  = isDoubleBottom and not isDoubleBottom[1]

// Combined signals
anyBearish = newRegBearish or newHidBearish or newDblTop
anyBullish = newRegBullish or newHidBullish or newDblBottom
anySignal  = anyBearish or anyBullish

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                                  ğŸ¯ ON-CHART DIVERGENCE MARKERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Regular divergences - prominent markers (on price candles)
plotshape(newRegBearish, title="â–¼ Reg Bear", style=shape.triangledown, location=location.abovebar, color=themeBear, size=size.normal)
plotshape(newRegBullish, title="â–² Reg Bull", style=shape.triangleup, location=location.belowbar, color=themeBull, size=size.normal)

// Hidden divergences - smaller diamond markers
plotshape(newHidBearish, title="â—† Hid Bear", style=shape.diamond, location=location.abovebar, color=color.new(themeBear, 30), size=size.small)
plotshape(newHidBullish, title="â—† Hid Bull", style=shape.diamond, location=location.belowbar, color=color.new(themeBull, 30), size=size.small)

// Double patterns - circle markers
plotshape(newDblTop, title="â— Dbl Top", style=shape.circle, location=location.abovebar, color=themeDblTop, size=size.tiny)
plotshape(newDblBottom, title="â— Dbl Bot", style=shape.circle, location=location.belowbar, color=themeDblBot, size=size.tiny)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                                  ğŸŒˆ BACKGROUND FLASH
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

bgcolor(newRegBearish ? color.new(themeBear, 88) : na, title="Reg Bear Flash")
bgcolor(newRegBullish ? color.new(themeBull, 88) : na, title="Reg Bull Flash")
bgcolor(newHidBearish ? color.new(themeBear, 93) : na, title="Hid Bear Flash")
bgcolor(newHidBullish ? color.new(themeBull, 93) : na, title="Hid Bull Flash")
bgcolor(newDblTop ? color.new(themeDblTop, 90) : na, title="Dbl Top Flash")
bgcolor(newDblBottom ? color.new(themeDblBot, 90) : na, title="Dbl Bot Flash")

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                                  ğŸ“ ON-CHART DIVERGENCE LINES + LABELS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

if i_showLines
    // â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ GLOW LINES (if enabled) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    if i_showGlow
        // Regular Bearish glow - connects price highs
        if newRegBearish and not na(phBar0) and not na(phBar1)
            line.new(phBar1, ph1, phBar0, ph0, xloc=xloc.bar_index, color=color.new(themeBear, 60), width=i_lineWidth + 3, style=line.style_solid)
        // Regular Bullish glow - connects price lows
        if newRegBullish and not na(plBar0) and not na(plBar1)
            line.new(plBar1, pl1, plBar0, pl0, xloc=xloc.bar_index, color=color.new(themeBull, 60), width=i_lineWidth + 3, style=line.style_solid)
    
    // â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ REGULAR BEARISH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    // Line connects the two price highs
    if newRegBearish and not na(phBar0) and not na(phBar1)
        line.new(phBar1, ph1, phBar0, ph0, xloc=xloc.bar_index, color=themeBear, width=i_lineWidth, style=line.style_solid)
        if i_showLabels
            label.new(phBar0, ph0, "â¬‡ REG", xloc=xloc.bar_index, yloc=yloc.price, style=label.style_label_down, color=themeBear, textcolor=color.white, size=size.small)
    
    // â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ REGULAR BULLISH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    // Line connects the two price lows
    if newRegBullish and not na(plBar0) and not na(plBar1)
        line.new(plBar1, pl1, plBar0, pl0, xloc=xloc.bar_index, color=themeBull, width=i_lineWidth, style=line.style_solid)
        if i_showLabels
            label.new(plBar0, pl0, "â¬† REG", xloc=xloc.bar_index, yloc=yloc.price, style=label.style_label_up, color=themeBull, textcolor=color.white, size=size.small)
    
    // â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ HIDDEN BEARISH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    if newHidBearish and not na(phBar0) and not na(phBar1)
        line.new(phBar1, ph1, phBar0, ph0, xloc=xloc.bar_index, color=color.new(themeBear, 35), width=i_lineWidth, style=line.style_dashed)
        if i_showLabels
            label.new(phBar0, ph0, "â—‡ HID", xloc=xloc.bar_index, yloc=yloc.price, style=label.style_label_down, color=color.new(themeBear, 50), textcolor=color.white, size=size.tiny)
    
    // â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ HIDDEN BULLISH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    if newHidBullish and not na(plBar0) and not na(plBar1)
        line.new(plBar1, pl1, plBar0, pl0, xloc=xloc.bar_index, color=color.new(themeBull, 35), width=i_lineWidth, style=line.style_dashed)
        if i_showLabels
            label.new(plBar0, pl0, "â—‡ HID", xloc=xloc.bar_index, yloc=yloc.price, style=label.style_label_up, color=color.new(themeBull, 50), textcolor=color.white, size=size.tiny)
    
    // â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ DOUBLE TOP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    if newDblTop and not na(phBar0) and not na(phBar1)
        line.new(phBar1, ph1, phBar0, ph0, xloc=xloc.bar_index, color=themeDblTop, width=i_lineWidth, style=line.style_dotted)
        if i_showLabels
            label.new(phBar0, ph0, "â—‰ DBL", xloc=xloc.bar_index, yloc=yloc.price, style=label.style_label_down, color=themeDblTop, textcolor=color.white, size=size.tiny)
    
    // â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ DOUBLE BOTTOM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    if newDblBottom and not na(plBar0) and not na(plBar1)
        line.new(plBar1, pl1, plBar0, pl0, xloc=xloc.bar_index, color=themeDblBot, width=i_lineWidth, style=line.style_dotted)
        if i_showLabels
            label.new(plBar0, pl0, "â—‰ DBL", xloc=xloc.bar_index, yloc=yloc.price, style=label.style_label_up, color=themeDblBot, textcolor=color.white, size=size.tiny)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                                   ğŸ“Š STATUS PANEL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

var table statusPanel = table.new(position.top_right, 3, 9, bgcolor=PANEL_BG, border_color=PANEL_BORDER, border_width=1, frame_color=PANEL_BORDER, frame_width=2)

if barstate.islast and i_showPanel
    // Header row
    table.cell(statusPanel, 0, 0, "â—ˆ TH VMDiv", text_color=themeSignal, bgcolor=PANEL_HEADER, text_size=size.small, text_halign=text.align_center)
    table.merge_cells(statusPanel, 0, 0, 2, 0)
    
    // Oscillator value row
    oscText = str.tostring(vmOsc, "#.##")
    oscColor = vmOsc > 0 ? themeBull : themeBear
    table.cell(statusPanel, 0, 1, "OSC", text_color=NEUTRAL_300, bgcolor=PANEL_HEADER, text_size=size.tiny)
    table.cell(statusPanel, 1, 1, oscText, text_color=oscColor, bgcolor=PANEL_HEADER, text_size=size.tiny)
    table.cell(statusPanel, 2, 1, oscRising ? "â†—" : "â†˜", text_color=oscColor, bgcolor=PANEL_HEADER, text_size=size.tiny)
    
    // Column headers
    table.cell(statusPanel, 0, 2, "SIGNAL", text_color=NEUTRAL_300, bgcolor=PANEL_HEADER, text_size=size.tiny)
    table.cell(statusPanel, 1, 2, "STATUS", text_color=NEUTRAL_300, bgcolor=PANEL_HEADER, text_size=size.tiny)
    table.cell(statusPanel, 2, 2, "â¬¤", text_color=NEUTRAL_300, bgcolor=PANEL_HEADER, text_size=size.tiny)
    
    // Regular Bearish row
    table.cell(statusPanel, 0, 3, "â–¼ Reg Bear", text_color=NEUTRAL_100, text_size=size.tiny)
    table.cell(statusPanel, 1, 3, regularBearish ? "â— ACTIVE" : "â—‹ ---", text_color=regularBearish ? themeBear : NEUTRAL_500, text_size=size.tiny)
    table.cell(statusPanel, 2, 3, regularBearish ? "â¬¤" : "â—‹", text_color=regularBearish ? themeBear : NEUTRAL_700, text_size=size.tiny)
    
    // Regular Bullish row
    table.cell(statusPanel, 0, 4, "â–² Reg Bull", text_color=NEUTRAL_100, text_size=size.tiny)
    table.cell(statusPanel, 1, 4, regularBullish ? "â— ACTIVE" : "â—‹ ---", text_color=regularBullish ? themeBull : NEUTRAL_500, text_size=size.tiny)
    table.cell(statusPanel, 2, 4, regularBullish ? "â¬¤" : "â—‹", text_color=regularBullish ? themeBull : NEUTRAL_700, text_size=size.tiny)
    
    // Hidden Bearish row
    table.cell(statusPanel, 0, 5, "â—† Hid Bear", text_color=NEUTRAL_100, text_size=size.tiny)
    table.cell(statusPanel, 1, 5, hiddenBearish ? "â— ACTIVE" : "â—‹ ---", text_color=hiddenBearish ? color.new(themeBear, 30) : NEUTRAL_500, text_size=size.tiny)
    table.cell(statusPanel, 2, 5, hiddenBearish ? "â¬¤" : "â—‹", text_color=hiddenBearish ? themeBear : NEUTRAL_700, text_size=size.tiny)
    
    // Hidden Bullish row
    table.cell(statusPanel, 0, 6, "â—† Hid Bull", text_color=NEUTRAL_100, text_size=size.tiny)
    table.cell(statusPanel, 1, 6, hiddenBullish ? "â— ACTIVE" : "â—‹ ---", text_color=hiddenBullish ? color.new(themeBull, 30) : NEUTRAL_500, text_size=size.tiny)
    table.cell(statusPanel, 2, 6, hiddenBullish ? "â¬¤" : "â—‹", text_color=hiddenBullish ? themeBull : NEUTRAL_700, text_size=size.tiny)
    
    // Double Top row
    table.cell(statusPanel, 0, 7, "â— Dbl Top", text_color=NEUTRAL_100, text_size=size.tiny)
    table.cell(statusPanel, 1, 7, isDoubleTop ? "â— ACTIVE" : "â—‹ ---", text_color=isDoubleTop ? themeDblTop : NEUTRAL_500, text_size=size.tiny)
    table.cell(statusPanel, 2, 7, isDoubleTop ? "â¬¤" : "â—‹", text_color=isDoubleTop ? themeDblTop : NEUTRAL_700, text_size=size.tiny)
    
    // Double Bottom row
    table.cell(statusPanel, 0, 8, "â— Dbl Bot", text_color=NEUTRAL_100, text_size=size.tiny)
    table.cell(statusPanel, 1, 8, isDoubleBottom ? "â— ACTIVE" : "â—‹ ---", text_color=isDoubleBottom ? themeDblBot : NEUTRAL_500, text_size=size.tiny)
    table.cell(statusPanel, 2, 8, isDoubleBottom ? "â¬¤" : "â—‹", text_color=isDoubleBottom ? themeDblBot : NEUTRAL_700, text_size=size.tiny)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                                   ğŸ“¤ DATA WINDOW EXPORTS (Hidden from chart)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

plot(vmOsc, "ğŸ“Š VM Oscillator", display=display.data_window)
plot(vmSignal, "ğŸ“Š Signal Line", display=display.data_window)
plot(vmHist, "ğŸ“Š Histogram", display=display.data_window)
plot(regularBearish ? -2 : regularBullish ? 2 : 0, "ğŸ“Š Regular Div", display=display.data_window)
plot(hiddenBearish ? -1 : hiddenBullish ? 1 : 0, "ğŸ“Š Hidden Div", display=display.data_window)
plot(isDoubleTop ? -3 : isDoubleBottom ? 3 : 0, "ğŸ“Š Double Pattern", display=display.data_window)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                                      ğŸ”” ALERT CONDITIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

alertcondition(newRegBearish, "ğŸ”´ Regular Bearish Divergence", "âš ï¸ REGULAR BEARISH DIVERGENCE\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nPrice: Higher High â†—\nOscillator: Lower High â†˜\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nâ¡ï¸ Potential reversal DOWN")

alertcondition(newRegBullish, "ğŸŸ¢ Regular Bullish Divergence", "âš ï¸ REGULAR BULLISH DIVERGENCE\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nPrice: Lower Low â†˜\nOscillator: Higher Low â†—\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nâ¡ï¸ Potential reversal UP")

alertcondition(newHidBearish, "ğŸŸ  Hidden Bearish Divergence", "ğŸ“‰ HIDDEN BEARISH DIVERGENCE\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nTrend continuation signal\nDowntrend likely to resume")

alertcondition(newHidBullish, "ğŸŸ¡ Hidden Bullish Divergence", "ğŸ“ˆ HIDDEN BULLISH DIVERGENCE\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nTrend continuation signal\nUptrend likely to resume")

alertcondition(newDblTop, "ğŸŸ£ Double Top Pattern", "â¬‡ï¸ DOUBLE TOP with DIVERGENCE\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nStrong resistance level\nMomentum weakening at highs")

alertcondition(newDblBottom, "ğŸ”µ Double Bottom Pattern", "â¬†ï¸ DOUBLE BOTTOM with DIVERGENCE\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nStrong support level\nMomentum strengthening at lows")

alertcondition(anyBearish, "âš¡ Any Bearish Signal", "ğŸ”» BEARISH DIVERGENCE DETECTED\nCheck chart for signal type")

alertcondition(anyBullish, "âš¡ Any Bullish Signal", "ğŸ”º BULLISH DIVERGENCE DETECTED\nCheck chart for signal type")

alertcondition(crossUp, "ğŸ“ˆ Signal Line Cross Up", "Oscillator crossed ABOVE signal line")

alertcondition(crossDown, "ğŸ“‰ Signal Line Cross Down", "Oscillator crossed BELOW signal line")

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//                                         END OF SCRIPT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
