// This source code is subject to the terms of the MIT License
// © 2025 DCAUT

//@version=6
indicator("RSI Donchian Channel [DCAUT]", "RSI-DC [DCAUT]", overlay=false, timeframe='', timeframe_gaps=true)

// RSI Donchian Channel
// Combines RSI momentum measurement with Donchian Channel breakout analysis
// to create dynamic support/resistance zones based on RSI historical extremes
//
// Signal Interpretation:
// • RSI touching upper channel indicates momentum reaching recent peak levels
// • RSI touching lower channel suggests momentum at recent low extremes
// • RSI near middle channel indicates balanced momentum conditions
// • Channel breakout signals potential trend continuation or reversal
// • Narrow channel width indicates momentum consolidation and breakout preparation
//
// Primary Applications:
// • Dynamic overbought/oversold identification based on historical extremes
// • Momentum breakout detection and confirmation
// • Support/resistance level identification in momentum space
// • Trend strength assessment through channel position
// • Mean reversion trading with breakout context

import DCAUT/TA/3 as dta

// Input parameters
rsiSource       = input.source(close, "RSI Source", tooltip="Price data source for RSI calculation")
rsiLength       = input.int(14, "RSI Length", minval=1, tooltip="Period for RSI calculation - standard is 14")
rsiMaType       = input.enum(dta.MaType.RMA, "RSI MA Type", tooltip="Moving average type for RSI smoothing - RMA is standard")
dcLength        = input.int(20, "DC Length", minval=1, tooltip="Period for Donchian Channel calculation on RSI - defines lookback window for high/low extremes")
offset          = input.int(0, "Offset", minval=-500, maxval=500, display=display.data_window, tooltip="Horizontal offset for plotting channels - positive values shift right, negative values shift left")

// Calculate RSI
rsiValue = dta.rsi(rsiSource, rsiLength, rsiMaType)

// Calculate Donchian Channel on RSI
[dcBasis, dcUpper, dcLower] = dta.dc(rsiValue, rsiValue, dcLength)

// Plots
hline(50, "Midline", color=color.new(color.gray, 70), linestyle=hline.style_dotted)

// Donchian Channel
upperChannel = plot(dcUpper, "Upper Channel", color=color.new(#26A69A, 50), linewidth=1, offset=offset)
basisLine    = plot(dcBasis, "Basis", color=color.new(#26A69A, 50), linewidth=1, offset=offset)
lowerChannel = plot(dcLower, "Lower Channel", color=color.new(#26A69A, 50), linewidth=1, offset=offset)

// Channel fill
fill(upperChannel, lowerChannel, color=color.new(#26A69A, 90), title="Channel Fill")

// RSI line
plot(rsiValue, "RSI", color=#2962FF, linewidth=2)

// Alert conditions
alertcondition(ta.crossover(rsiValue, dcUpper), title='RSI Upper Breakout', message='RSI crossed above upper channel - momentum breakout to recent highs')
alertcondition(ta.crossunder(rsiValue, dcLower), title='RSI Lower Breakout', message='RSI crossed below lower channel - momentum breakdown to recent lows')
alertcondition(ta.crossover(rsiValue, dcBasis), title='RSI Rising Above Basis', message='RSI crossed above middle channel - bullish momentum shift')
alertcondition(ta.crossunder(rsiValue, dcBasis), title='RSI Falling Below Basis', message='RSI crossed below middle channel - bearish momentum shift')

// Channel width analysis
channelWidth = dcUpper - dcLower
narrowChannel = channelWidth < ta.lowest(channelWidth, 100)
alertcondition(narrowChannel, title='Channel Squeeze', message='Donchian Channel squeezed - momentum consolidation detected')
