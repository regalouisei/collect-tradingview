//@version=5
indicator("bosstvs tikole sir | ALL IN ONE ULTIMATE", overlay=true, max_lines_count=500, max_labels_count=500)

// =================================================
// ================= INPUTS ========================
// =================================================
sensitivity = input.int(4, "SuperTrend Sensitivity", minval=1)
pivotLen    = input.int(21, "Pivot Length")

showVWAP  = input.bool(true, "Show VWAP")
showEMA21 = input.bool(true, "Show EMA 21")
showSMA50 = input.bool(true, "Show SMA 50")
showCloud = input.bool(true, "Show Trend Cloud")

// =================================================
// ================= SUPERTREND ====================
// =================================================
[st, dir] = ta.supertrend(sensitivity, 11)

// Moving averages
smaFast = ta.sma(close, 8)
smaMid  = ta.sma(close, 9)
smaSlow = ta.sma(close, 13)

// =================================================
// ================= CORE SIGNALS ==================
// =================================================
bull = ta.crossover(close, st) and close > smaSlow
bear = ta.crossunder(close, st) and close < smaSlow

atrVal = ta.atr(14)
buyY  = low  - atrVal * 1.5
sellY = high + atrVal * 1.5

if bull
    label.new(bar_index, buyY,
      smaFast >= smaMid ? "Buy" : "Strong Buy",
      style=label.style_label_up,
      color=color.green,
      textcolor=color.black)

if bear
    label.new(bar_index, sellY,
      smaFast <= smaMid ? "Sell" : "Strong Sell",
      style=label.style_label_down,
      color=color.red,
      textcolor=color.white)

// Alerts
alertcondition(bull, "BUY", "BUY Signal")
alertcondition(bear, "SELL", "SELL Signal")

// =================================================
// ================= TREND CLOUD ===================
// =================================================
ma1 = ta.sma(close, 21)
ma2 = ta.sma(close, 34)

p1 = plot(showCloud ? ma1 : na, color=color.new(color.white, 100))
p2 = plot(showCloud ? ma2 : na, color=color.new(color.white, 100))
fill(p1, p2, color = ma1 > ma2 ? color.new(color.green, 80) : color.new(color.red, 80))

// =================================================
// ================= PIVOTS ========================
// =================================================
ph = ta.pivothigh(pivotLen, pivotLen)
pl = ta.pivotlow(pivotLen, pivotLen)

plot(ph, "Pivot High", style=plot.style_circles, color=color.red, offset=-pivotLen)
plot(pl, "Pivot Low",  style=plot.style_circles, color=color.green, offset=-pivotLen)

// =================================================
// ========== FIRST CANDLE HIGH / LOW ===============
// =================================================
newDay = ta.change(time("D")) != 0

var float dayHigh  = na
var float dayLow   = na
var float dayRange = na

if newDay[1]
    dayHigh  := high[1]
    dayLow   := low[1]
    dayRange := dayHigh - dayLow

buyTarget  = dayHigh + dayRange
sellTarget = dayLow  - dayRange

plot(buyTarget,  "Buy Target",  color=color.green, style=plot.style_linebr)
plot(sellTarget, "Sell Target", color=color.red,   style=plot.style_linebr)

buyHit  = ta.crossover(close, buyTarget)
sellHit = ta.crossunder(close, sellTarget)

plotshape(buyHit,  style=shape.triangleup,   location=location.belowbar, color=color.green, text="BUY")
plotshape(sellHit, style=shape.triangledown, location=location.abovebar, color=color.red,   text="SELL")

alertcondition(buyHit,  "BUY TARGET",  "Buy Target Hit")
alertcondition(sellHit, "SELL TARGET", "Sell Target Hit")

// =================================================
// ================= EMA / SMA / VWAP ==============
// =================================================
ema21 = ta.ema(close, 21)
sma50 = ta.sma(close, 50)
vwapV = ta.vwap(hlc3)

plot(showEMA21 ? ema21 : na, color=color.rgb(16,246,112), linewidth=2)
plot(showSMA50 ? sma50 : na, color=color.rgb(234,3,3), linewidth=2)
plot(showVWAP  ? vwapV : na, color=color.rgb(7,143,255), linewidth=2)
