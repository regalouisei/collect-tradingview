// This Pine Script® code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// © rogernina
//@version=6
indicator("EURUSD M15 Sniper Arrows", overlay=true)

// ===== INPUTS =====
emaLength = input.int(200, "EMA Trend")
breakLength = input.int(20, "Breakout Lookback")

// ===== CALCULS =====
ema200 = ta.ema(close, emaLength)

highestHigh = ta.highest(high, breakLength)
lowestLow = ta.lowest(low, breakLength)

// Conditions
longCondition = close > ema200 and close > highestHigh[1]
shortCondition = close < ema200 and close < lowestLow[1]

// ===== PLOTS =====
plot(ema200, color=color.orange, linewidth=2)

plotshape(longCondition, 
     title="BUY", 
     location=location.belowbar, 
     color=color.lime, 
     style=shape.arrowup, 
     size=size.large)

plotshape(shortCondition, 
     title="SELL", 
     location=location.abovebar, 
     color=color.red, 
     style=shape.arrowdown, 
     size=size.large)
