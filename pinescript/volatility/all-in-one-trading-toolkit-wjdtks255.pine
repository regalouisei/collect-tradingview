// This Pine ScriptÂ® code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// Â© wjdtks255

//@version=5
// All-In-One Trading Toolkit
// Integrated Technical Suite: BB + Ichimoku + RSI + MACD
// Author: wjdtks255
indicator("All-In-One Trading Toolkit [wjdtks255]", overlay=true, precision=2)

// ==========================================
// ğŸ“Œ 1. Bollinger Bands Configuration
// ==========================================
group_bb = "BOLLINGER BANDS SETTINGS"
bb_len  = input.int(20, "BB Length", group=group_bb)
bb_mult = input.float(2.0, "BB StdDev", group=group_bb)

basis = ta.sma(close, bb_len)
dev   = bb_mult * ta.stdev(close, bb_len)
upper = basis + dev
lower = basis - dev

plot(basis, "BB Basis Line", color=color.new(#2962FF, 0), linewidth=2)
p_upper = plot(upper, "BB Upper Band", color=color.new(color.gray, 50))
p_lower = plot(lower, "BB Lower Band", color=color.new(color.gray, 50))
fill(p_upper, p_lower, color=color.new(#2962FF, 95), title="BB Background Fill")

// ==========================================
// ğŸ“Œ 2. Ichimoku Cloud Configuration
// ==========================================
group_ichi   = "ICHIMOKU CLOUD SETTINGS"
tenkan_len   = input.int(9, "Tenkan-sen Period", group=group_ichi)
kijun_len    = input.int(26, "Kijun-sen Period", group=group_ichi)
senkou_b_len = input.int(52, "Senkou Span B Period", group=group_ichi)
displacement = 26

donchian(len) => (ta.lowest(len) + ta.highest(len)) / 2
tenkan  = donchian(tenkan_len)
kijun   = donchian(kijun_len)
senkouA = (tenkan + kijun) / 2
senkouB = donchian(senkou_b_len)

plot(tenkan, "Tenkan-sen", color=color.new(color.red, 0))
plot(kijun, "Kijun-sen", color=color.new(color.blue, 0))
sa = plot(senkouA, "Lead 1 (Span A)", offset = displacement - 1, color=color.new(color.green, 50))
sb = plot(senkouB, "Lead 2 (Span B)", offset = displacement - 1, color=color.new(color.red, 50))
fill(sa, sb, color = senkouA > senkouB ? color.new(color.green, 90) : color.new(color.red, 90), title="Kumo Cloud Fill")

// ==========================================
// ğŸ“Œ 3. RSI Configuration
// ==========================================
group_rsi      = "RSI SETTINGS"
rsi_len        = input.int(14, "RSI Length", group=group_rsi)
rsi_overbought = input.int(70, "Overbought Threshold", group=group_rsi)
rsi_oversold   = input.int(30, "Oversold Threshold", group=group_rsi)
rsi_val        = ta.rsi(close, rsi_len)

// ==========================================
// ğŸ“Œ 4. MACD Configuration
// ==========================================
group_macd = "MACD SETTINGS"
fast_len   = input.int(12, "Fast EMA", group=group_macd)
slow_len   = input.int(26, "Slow EMA", group=group_macd)
sig_len    = input.int(9, "Signal Smoothing", group=group_macd)
[macdLine, signalLine, _] = ta.macd(close, fast_len, slow_len, sig_len)

// ==========================================
// ğŸ“Œ 5. Signal Execution & HUD
// ==========================================
group_sig    = "VISUALIZATION CONTROLS"
show_labels  = input.bool(true, "Display Info Dashboard", group=group_sig)
show_signals = input.bool(true, "Display Execution Signals", group=group_sig)

buy_signal  = ta.crossover(macdLine, signalLine)
sell_signal = ta.crossunder(macdLine, signalLine)

plotshape(show_signals and buy_signal, "Long Entry", shape.triangleup, location.belowbar, color.green, size=size.small)
plotshape(show_signals and sell_signal, "Short Entry", shape.triangledown, location.abovebar, color.red, size=size.small)

// Performance Dashboard
var table infoTable = table.new(position.top_right, 2, 2, frame_color=color.gray, frame_width=1)
if barstate.islast and show_labels
    table.cell(infoTable, 0, 0, "RSI Momentum", text_color=color.white, bgcolor=color.new(color.black, 20))
    table.cell(infoTable, 1, 0, str.tostring(rsi_val, "0.0"), text_color = rsi_val > rsi_overbought ? color.red : rsi_val < rsi_oversold ? color.green : color.white)
    table.cell(infoTable, 0, 1, "MACD Regime", text_color=color.white, bgcolor=color.new(color.black, 20))
    table.cell(infoTable, 1, 1, macdLine > signalLine ? "BULLISH" : "BEARISH", text_color = macdLine > signalLine ? color.green : color.red)

// ==========================================
// ğŸ“Œ 6. Global Alerting System
// ==========================================
alertcondition(buy_signal, title="[Signal] MACD Buy",  message="ğŸš€ Long Signal: {{ticker}} at {{close}}")
alertcondition(sell_signal, title="[Signal] MACD Sell", message="ğŸ’€ Short Signal: {{ticker}} at {{close}}")
alertcondition(ta.crossover(rsi_val, rsi_overbought), title="[RSI] Overbought", message="âš ï¸ RSI Overbought on {{ticker}}")
alertcondition(ta.crossunder(rsi_val, rsi_oversold), title="[RSI] Oversold", message="âœ… RSI Oversold on {{ticker}}")
