// This Pine Script® code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// © piyushgandhi1

//@version=6
indicator("Piyush Impact Momentum Buy/Sell", overlay=true)

// === INPUTS ===
rsiLength = input.int(4, "RSI Length")
atrLength = input.int(5, "ATR Length")
volLength = input.int(8, "Volume MA Length")
emaLength = input.int(5, "EMA Length")

// === CALCULATIONS ===
rsiValue = ta.rsi(close, rsiLength)
atrValue = ta.atr(atrLength)
volMA = ta.sma(volume, volLength)
emaValue = ta.ema(close, emaLength)

// Volume condition (above average volume)
highVolume = volume > volMA

// ATR expanding (volatility increasing)
atrRising = atrValue > ta.sma(atrValue, 10)

// === BUY CONDITION ===
// RSI crossing above 50 + price above EMA + strong volume + rising volatility
buySignal = ta.crossover(rsiValue, 50) and close > emaValue and highVolume and atrRising

// === SELL CONDITION ===
// RSI crossing below 50 + price below EMA + strong volume + rising volatility
sellSignal = ta.crossunder(rsiValue, 50) and close < emaValue and highVolume and atrRising

// === PLOTS ===
plot(emaValue, color=color.orange, linewidth=2)

plotshape(buySignal, title="BUY", location=location.belowbar, 
     color=color.green, style=shape.labelup, text="BUY")

plotshape(sellSignal, title="SELL", location=location.abovebar, 
     color=color.red, style=shape.labeldown, text="SELL")

//@version=6
plot(close)
