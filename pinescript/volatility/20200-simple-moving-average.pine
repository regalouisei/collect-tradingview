// This is the property of Timon and MATI Enterprise (Pty) Ltd
// (MATI Trader est. 2019) www.Timonandmati.com
// MATI Trader Indicator 20/200 SMA Crossover and Background changes
// Description Updated:
// The background is green when the closing price is above both the 20 SMA and the 200 SMA.
// The background is red when the closing price is below both the 20 SMA and the 200 SMA.
// The background is white when the price is inbetween the 20 SMA and the 200 SMA
// Updated 2024

//@version=5
indicator("20/200 Simple Moving Average", overlay=true)

// Create variables for the moving averages
sma20 = ta.sma(close, 20)
sma200 = ta.sma(close, 200)

// Plot the moving averages on the chart with increased thickness
plot(sma20, title="20 SMA", color=color.rgb(33, 150, 243), linewidth=2)
plot(sma200, title="200 SMA", color=color.rgb(0, 0, 0), linewidth=2)

// BUY and SELL logic based on SMA crossover - adjust according to your strategy
buy = ta.crossover(sma20, sma200) and close > sma200
sell = ta.crossunder(sma20, sma200) and close < sma200

// Determine background color based on price position relative to SMAs
greenBackground = close > sma20 and close > sma200
redBackground = close < sma20 and close < sma200

// Apply background color with lighter opacity
bgcolor(greenBackground ? color.new(color.green, 95) : na)
bgcolor(redBackground ? color.new(color.red, 95) : na)

// End
