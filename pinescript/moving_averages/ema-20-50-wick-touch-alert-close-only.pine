//@version=6
indicator("EMA 20 & 50 Wick Touch Alert (Close Only)", overlay=true)

// EMA Calculation
ema20 = ta.ema(close, 20)
ema50 = ta.ema(close, 50)

// Plot EMA
plot(ema20, color=color.green, title="EMA 20")
plot(ema50, color=color.red, title="EMA 50")

// Wick Touch Logic (Close Confirmation)
bullWickTouch20 = low <= ema20 and close > ema20 and open > ema20
bearWickTouch20 = high >= ema20 and close < ema20 and open < ema20

bullWickTouch50 = low <= ema50 and close > ema50 and open > ema50
bearWickTouch50 = high >= ema50 and close < ema50 and open < ema50

// Only Confirm After Candle Close
condition20 = (bullWickTouch20 or bearWickTouch20) and barstate.isconfirmed
condition50 = (bullWickTouch50 or bearWickTouch50) and barstate.isconfirmed

// Alert Conditions
alertcondition(condition20, title="EMA 20 Wick Touch", message="Price Wick Touched EMA 20")
alertcondition(condition50, title="EMA 50 Wick Touch", message="Price Wick Touched EMA 50")

// Optional Signal Mark
plotshape(condition20, location=location.abovebar, color=color.green, style=shape.circle, size=size.tiny, title="EMA20 Touch")
plotshape(condition50, location=location.belowbar, color=color.red, style=shape.circle, size=size.tiny, title="EMA50 Touch")
