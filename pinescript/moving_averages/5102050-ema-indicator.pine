//@version=5
indicator("5/10/20/50 EMA + ATR Corner", overlay=true)

// EMA Inputs
ema5_length  = input.int(5, title="EMA 5 Length")
ema10_length = input.int(10, title="EMA 10 Length")
ema20_length = input.int(20, title="EMA 20 Length")
ema50_length = input.int(50, title="EMA 50 Length")

// ATR Input
atr_length = input.int(14, title="ATR Length")

// Calculations
ema5  = ta.ema(close, ema5_length)
ema10 = ta.ema(close, ema10_length)
ema20 = ta.ema(close, ema20_length)
ema50 = ta.ema(close, ema50_length)
atrValue = ta.atr(atr_length)

// Plot EMAs
plot(ema5,  title="EMA 5",  color=color.blue, linewidth=2)
plot(ema10, title="EMA 10", color=color.green, linewidth=2)
plot(ema20, title="EMA 20", color=color.orange, linewidth=2)
plot(ema50, title="EMA 50", color=color.red, linewidth=2)

// Create table once
var table atrTable = table.new(position.bottom_right, 1, 1)

// Update table on last bar
if barstate.islast
    table.cell(atrTable, 0, 0, "ATR (" + str.tostring(atr_length) + "): " + str.tostring(atrValue, format.mintick), text_color=color.black, text_size=size.large, bgcolor=color.white)
