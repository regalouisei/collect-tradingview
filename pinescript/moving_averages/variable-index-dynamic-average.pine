// This Pine Script® code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// © AlchimistOfCrypto

//@version=5
indicator("Variable Index Dynamic Average", shorttitle="VIDYA", overlay=true)

longueurVIDYA = input.int(200,  "Lenght VIDYA", minval=1)
longueurCMO   = input.int(200,  "Lenght CMO",   minval=1)

cmoVal = ta.cmo(close, longueurCMO)
vi     = math.abs(cmoVal) / 100
alpha  = 2.0 / (longueurVIDYA + 1) * vi

var float vidya = na
vidya := alpha * close + (1 - alpha) * nz(vidya[1])

col = close > vidya ? color.lime : color.red

plot(vidya, "VIDYA", color=col, linewidth=1)
