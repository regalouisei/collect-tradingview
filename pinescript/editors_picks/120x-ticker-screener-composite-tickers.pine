_                                                                                                                                                                                                                                                                                                                ='
                                                         USER DEFINED TICKERS                                                                                                                                                                                               
   --------------------------------------------------------------------------------------------------------------------------------------                                                                                                                                    
                                                                                                                                                                      
             x.xxx                             0             xx.xx                    0                      x.xxxxxx

   ––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––                                                                                                                                                                        '

t1  = 'BINANCE:FILUSDT'  , n1  = 10e10, r1  = 4, t2  = 'BINANCE:CAKEUSDT' , n2  = 10e5 , r2  = 3, t3  = 'BINANCE:SOLUSDT'  , r3  = 2 // T1
t4  = 'BINANCE:BNBUSDT'  , n4  = 10e9 , r4  = 2, t5  = 'BINANCE:ETHUSDT'  , n5  = 10e3 , r5  = 2, t6  = 'BINANCE:THETAUSDT', r6  = 3 // T2
t7  = 'BINANCE:INJUSDT'  , n7  = 10e10, r7  = 4, t8  = 'BINANCE:OXTUSDT'  , n8  = 10e5 , r8  = 4, t9  = 'BINANCE:ADAUSDT'  , r9  = 4 // T3
t10 = 'BINANCE:MATICUSDT', n10 = 10e10, r10 = 4, t11 = 'BINANCE:LTCUSDT'  , n11 = 10e3 , r11 = 2, t12 = 'BINANCE:ARBUSDT'  , r12 = 4 // T4
t13 = 'BINANCE:AAVEUSDT' , n13 = 10e9 , r13 = 1, t14 = 'BINANCE:ATOMUSDT' , n14 = 10e4 , r14 = 3, t15 = 'BINANCE:LINAUSDT' , r15 = 6 // T5
t16 = 'BINANCE:KAVAUSDT' , n16 = 10e9 , r16 = 3, t17 = 'BINANCE:ICPUSDT'  , n17 = 10e4 , r17 = 3, t18 = 'BINANCE:MASKUSDT' , r18 = 3 // T6
t19 = 'BINANCE:EOSUSDT'  , n19 = 10e9 , r19 = 3, t20 = 'BINANCE:DYDXUSDT' , n20 = 10e4 , r20 = 3, t21 = 'BINANCE:LDOUSDT'  , r21 = 3 // T7

t22 = 'BINANCE:XTZUSDT'  , n22 = 10e9 , r22 = 3, t23 = 'BINANCE:FLOWUSDT' , n23 = 10e4 , r23 = 3, t24 = 'BINANCE:WAVESUSDT', r24 = 3 // T8
t25 = 'BINANCE:BANDUSDT' , n25 = 10e9 , r25 = 3, t26 = 'BINANCE:APEUSDT'  , n26 = 10e4 , r26 = 3, t27 = 'BINANCE:OMGUSDT'  , r27 = 3 // T9
t28 = 'BINANCE:UNIUSDT'  , n28 = 10e9 , r28 = 3, t29 = 'BINANCE:SNXUSDT'  , n29 = 10e4 , r29 = 3, t30 = 'BINANCE:1INCHUSDT', r30 = 3 // T10
t31 = 'BINANCE:MINAUSDT' , n31 = 10e9 , r31 = 3, t32 = 'BINANCE:HIGHUSDT' , n32 = 10e4 , r32 = 3, t33 = 'BINANCE:SUSHIUSDT', r33 = 3 // T11
t34 = 'BINANCE:CELOUSDT' , n34 = 10e9 , r34 = 3, t35 = 'BINANCE:BALUSDT'  , n35 = 10e4 , r35 = 3, t36 = 'BINANCE:ERNUSDT'  , r36 = 3 // T12
t37 = 'BINANCE:KDAUSDT'  , n37 = 10e9 , r37 = 3, t38 = 'BINANCE:CTKUSDT'  , n38 = 10e4 , r38 = 3, t39 = 'BINANCE:FLUXUSDT' , r39 = 3 // T13
t40 = 'BINANCE:AGLDUSDT' , n40 = 10e9 , r40 = 3, t41 = 'BINANCE:QTUMUSDT' , n41 = 10e4 , r41 = 3, t42 = 'BINANCE:GALUSDT'  , r42 = 3 // T14

t43 = 'BINANCE:UMAUSDT'  , n43 = 10e9 , r43 = 3, t44 = 'BINANCE:OGUSDT'   , n44 = 10e4 , r44 = 3, t45 = 'BINANCE:CVXUSDT'  , r45 = 3 // T15
t46 = 'BINANCE:MTLUSDT'  , n46 = 10e8 , r46 = 3, t47 = 'BINANCE:XMRUSDT'  , n47 = 10e1 , r47 = 1, t48 = 'BINANCE:ORNUSDT'  , r48 = 4 // T16
t49 = 'BINANCE:NEOUSDT'  , n49 = 10e7 , r49 = 2, t50 = 'BINANCE:DASHUSDT' , n50 = 10e2 , r50 = 2, t51 = 'BINANCE:KEYUSDT'  , r51 = 6 // T17
t52 = 'BINANCE:ZECUSDT'  , n52 = 10e7 , r52 = 1, t53 = 'BINANCE:KSMUSDT'  , n53 = 10e3 , r53 = 2, t54 = 'BINANCE:TRXUSDT'  , r54 = 5 // T18
t55 = 'BINANCE:BCHUSDT'  , n55 = 10e7 , r55 = 1, t56 = 'BINANCE:COMPUSDT' , n56 = 10e3 , r56 = 2, t57 = 'BINANCE:GALAUSDT' , r57 = 5 // T19
t58 = 'BINANCE:APTUSDT'  , n58 = 10e9 , r58 = 4, t59 = 'BINANCE:TRBUSDT'  , n59 = 10e2 , r59 = 2, t60 = 'BINANCE:ZILUSDT'  , r60 = 5 // T20

t61 = 'BINANCE:ONEUSDT'  , n61 = 10e10, r61 = 5, t62 = 'BINANCE:NMRUSDT'  , n62 = 10e2 , r62 = 2, t63 = 'BINANCE:NULSUSDT' , r63 = 4 // T21
t64 = 'BINANCE:AVAXUSDT' , n64 = 10e8 , r64 = 2, t65 = 'BINANCE:DOTUSDT'  , n65 = 10e4 , r65 = 3, t66 = 'BINANCE:XRPUSDT'  , r66 = 4 // T22
t67 = 'BINANCE:ETCUSDT'  , n67 = 10e8 , r67 = 3, t68 = 'OKX:OKBUSDT'      , n68 = 10e3 , r68 = 2, t69 = 'BINANCE:LINKUSDT' , r69 = 2 // T23
t70 = 'KUCOIN:QNTUSDT'   , n70 = 10e9 , r70 = 3, t71 = 'OKX:EGLDUSDT'     , n71 = 10e2 , r71 = 2, t72 = 'BINANCE:XLMUSDT'  , r72 = 4 // T24
t73 = 'OKX:RPLUSDT'      , n73 = 10e7 , r73 = 2, t74 = 'POLONIEX:MANAUSDT', n74 = 10e4 , r74 = 4, t75 = 'GATEIO:VETUSDT'   , r75 = 5 // T25 
t76 = 'COINBASE:AXSUSDT' , n76 = 10e10, r76 = 2, t77 = 'BINANCE:ALGOUSDT' , n77 = 10e6 , r77 = 4, t78 = 'BITTREX:SANDUSDT' , r78 = 8 // T26
t79 = 'OKX:TONUSDT'      , n79 = 10e10, r79 = 3, t80 = 'BYBIT:LRCUSDT'    , n80 = 10e5 , r80 = 4, t81 = 'KUCOIN:GRTUSDT'   , r81 = 5 // T27

t82 = 'GATEIO:BSVUSDT'   , n82 = 10e5 , r82 = 3, t83 = 'KUCOIN:KCSUSDT'   , n83 = 10e0 , r83 = 3, t84 = 'BINANCE:LUNCUSDT' , r84 = 8 // T28
t85 = 'POLONIEX:MKRUSDT' , n85 = 10e7 , r85 = 2, t86 = 'COINBASE:NEARUSDT', n86 = 10e3 , r86 = 3, t87 = 'GATEIO:CFXUSDT'   , r87 = 6 // T29
t88 = 'GATEIO:HTUSDT'    , n88 = 10e8 , r88 = 4, t89 = 'KUCOIN:TWTUSDT'   , n89 = 10e3 , r89 = 4, t90 = 'KUCOIN:XYOUSDT'   , r90 = 6 // T30
t91 = 'COINEX:GMXUSDT'   , n91 = 10e4 , r91 = 2, t92 = 'KUCOIN:ENJUSDT'   , n92 = 10e-1, r92 = 4, t93 = 'OKX:PEPEUSDT'     , r93 =10 // T31
t94 = 'BINANCE:BTCUSDT'  , n94 = 10e7 , r94 = 2, t95 = 'BYBIT:RUNEUSDT'   , n95 = 10e3 , r95 = 4, t96 = 'BINANCE:IOTAUSDT' , r96 = 4 // T32
t97 = 'BINANCE:HBARUSDT' , n97 = 10e4 , r97 = 4, t98 = 'BYBIT:NEXOUSDT'   , n98 = 10e-2, r98 = 4, t99 = 'POLONIEX:BTTUSDT' , r99 =10 // T33
t100= 'COINBASE:CROUSDT' , n100= 10e10, r100= 4, t101= 'GATEIO:GTUSDT'    , n101= 10e4 , r101= 4, t102= 'BITTREX:XDCUSDT'  , r102= 5 // T34

t103= 'COINBASE:CHZUSDT' , n103= 10e6 , r103= 4, t104= 'COINBASE:RNDRUSDT', n104= 10e0 , r104= 4, t105= 'OKX:XECUSDT'      , r105= 8 // T35
t106= 'COINEX:FTMUSDT'   , n106= 10e9 , r106= 4, t107= 'OKX:STXUSDT'      , n107= 10e4 , r107= 4, t108= 'KUCOIN:CSPRUSDT'  , r108= 5 // T36
t109= 'POLONIEX:BITUSDT' , n109= 10e10, r109= 4, t110= 'POLONIEX:OPUSDT'  , n110= 10e4 , r110= 4, t111= 'BYBIT:WOOUSDT'    , r111= 5 // T37
t112= 'POLONIEX:IMXUSDT' , n112= 10e10, r112= 4, t113= 'KUCOIN:AGIXUSDT'  , n113= 10e5 , r113= 5, t114= 'KUCOIN:SUIUSDT'   , r114= 5 // T38
t115= 'KUCOIN:CRVUSDT'   , n115= 10e8 , r115= 4, t116= 'BINANCE:PAXGUSDT' , n116= 10e-1, r116= 0, t117= 'OKX:FLRUSDT'      , r117= 5 // T39
t118= 'KUCOIN:FXSUSDT'   , n118= 10e6 , r118= 3, t119= 'KUCOIN:SOULUSDT'  , n119= 10e2 , r119= 4, t120= 'KUCOIN:MTVUSDT'   , r120= 7 // T40
_                                                                                                                                                                                                                                                                                                             ='

   ––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––        
   
   --------------------------------------------------------------------------------------------------------------------------------------                                                                                                                                                                     '

//----------------------------------------------------------------------------------------------------------------------------------------\\


fi(ki)=>'ra' // © fikira This source code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
//@version=5

indicator('Pushing request.security', shorttitle='T')
_                                                                                                                                                                                                                                                                                                             ='
                                                             Settings                                                                                                                                                                                                               
                                                             --------                                                                                                                                                                                                                                         '

s1        = '            ' ,                        s2 =   '          '

show1     = input.bool     (true                       ,   ''  , group='show sets', inline='s'                                      )
show2     = input.bool     (true                       ,   ''  , group='show sets', inline='s'                                      )
show3     = input.bool     (true                       ,   ''  , group='show sets', inline='s'                                      )
show4     = input.bool     (true                       ,   ''  , group='show sets', inline='s'                                      )
show5     = input.bool     (true                       ,   ''  , group='show sets', inline='s'                                      )
show6     = input.bool     (true                       ,   ''  , group='show sets', inline='s'                                      ) 
len       = input.int      (20        , 'Length'               , group='Set'                                                        )
res       = input.timeframe('D'       ,  'HTF'                 , group='Set'                                                        )
Tsz       = input.string   (size.small, 'Size Table'           , group='Table'    , options=[size.tiny, size.small, size.normal]    )
incl_exch = input.bool     (false     , 'Include Exchange name', group='Table'                                                      )
iSort     = input.bool     (true      , 'Sort?'                , group='Table'                                                      )
cCh_15    = input.color (color.rgb(254,  61,  61, 30),   ''  , group='Ch%    10'+s1+'5'+s1+s2+'0'+s1+s2+'5'+s1+'10', inline='Cch' ) 
cCh_10    = input.color (color.rgb(247,  87,  87, 50),   ''  , group='Ch%    10'+s1+'5'+s1+s2+'0'+s1+s2+'5'+s1+'10', inline='Cch' ) 
cCh_5     = input.color (color.rgb(245, 116, 116, 70),   ''  , group='Ch%    10'+s1+'5'+s1+s2+'0'+s1+s2+'5'+s1+'10', inline='Cch' ) 
cCh0      = input.color (color.rgb( 84, 213, 248, 50),   ''  , group='Ch%    10'+s1+'5'+s1+s2+'0'+s1+s2+'5'+s1+'10', inline='Cch' ) 
cCh5      = input.color (color.rgb(142, 240, 193, 70),   ''  , group='Ch%    10'+s1+'5'+s1+s2+'0'+s1+s2+'5'+s1+'10', inline='Cch' ) 
cCh10     = input.color (color.rgb(105, 212, 160, 50),   ''  , group='Ch%    10'+s1+'5'+s1+s2+'0'+s1+s2+'5'+s1+'10', inline='Cch' ) 
cCh15     = input.color (color.rgb( 67, 246, 159, 30),   ''  , group='Ch%    10'+s1+'5'+s1+s2+'0'+s1+s2+'5'+s1+'10', inline='Cch' )
cRSI20    = input.color (color.rgb( 67, 246, 159, 30),   ''  , group='RSI       20'+s1+'30'+s1+'50'+s1+'70'+s1+'80', inline='cRSI')   
cRSI30    = input.color (color.rgb(105, 212, 160, 50),   ''  , group='RSI       20'+s1+'30'+s1+'50'+s1+'70'+s1+'80', inline='cRSI')   
cRSI45    = input.color (color.rgb(246, 135,  61, 70),   ''  , group='RSI       20'+s1+'30'+s1+'50'+s1+'70'+s1+'80', inline='cRSI')
cRSI55    = input.color (color.rgb(232, 249,  80, 70),   ''  , group='RSI       20'+s1+'30'+s1+'50'+s1+'70'+s1+'80', inline='cRSI') 
cRSI70    = input.color (color.rgb(247,  87,  87, 50),   ''  , group='RSI       20'+s1+'30'+s1+'50'+s1+'70'+s1+'80', inline='cRSI') 
cRSI80    = input.color (color.rgb(254,  61,  61, 30),   ''  , group='RSI       20'+s1+'30'+s1+'50'+s1+'70'+s1+'80', inline='cRSI') 
cMAe      = input.color (color.rgb( 84, 213, 248, 50),   ''  , group='SMA          above    below'                 , inline='cMA' ) 
cMAH      = input.color (#0bc93482                   ,   ''  , group='SMA          above    below'                 , inline='cMA' ) 
cMAL      = input.color (#ff000082                   ,   ''  , group='SMA          above    below'                 , inline='cMA' ) 
choice    = input.int      (  0           , 'Show Ticker'      , group='Debug'    , minval =0, maxval=120                           ) -1
chT       = input.string   ( 'NONE','check string (close)'     , group='Debug'    , options=[
                             'NONE',  'T1',  'T2',  'T3',  'T4',  'T5',  'T6',  'T7'
                           ,   'T8',  'T9', 'T10', 'T11', 'T12', 'T13', 'T14', 'T15'
                           ,  'T16', 'T17', 'T18', 'T19', 'T20', 'T21', 'T22', 'T23'
                           ,  'T24', 'T25', 'T26', 'T27', 'T28', 'T29', 'T30', 'T31'
                           ,  'T32', 'T33', 'T34', 'T35', 'T36', 'T37', 'T38', 'T39', 'T40']                                        ) 

_                                                                                                                                                                                                                                                                                                             ='
                                                             Calculations                                                                                                                                                                                                               
                                                             ------------                                                                                                                                                                                                                                     '

per       = math.max    (1, timeframe.in_seconds(res) / timeframe.in_seconds(timeframe.period))
Mper      = math.max    (1000, per * (2 * len))
Tch       = timeframe.change(res) 
alpha     = 1 / len


filusdt   = 0 , cakeusdt  = 1 , solusdt   = 2  
bnbusdt   = 3 , ethusdt   = 4 , thetausdt = 5  
injusdt   = 6 , oxtusdt   = 7 , adausdt   = 8  
maticusdt = 9 , ltcusdt   = 10, arbusdt   = 11 
aaveusdt  = 12, atomusdt  = 13, linausdt  = 14 
kavausdt  = 15, icpusdt   = 16, maskusdt  = 17 
eosusdt   = 18, dydxusdt  = 19, ldousdt   = 20 
xtzusdt   = 21, flowusdt  = 22, wavesusdt = 23 
bandusdt  = 24, apeusdt   = 25, omgusdt   = 26 
uniusdt   = 27, snxusdt   = 28, inchusdt  = 29 
minausdt  = 30, highusdt  = 31, sushiusdt = 32 
celousdt  = 33, balusdt   = 34, ernusdt   = 35 
kdausdt   = 36, ctkusdt   = 37, fluxusdt  = 38 
agldusdt  = 39, qtumusdt  = 40, galusdt   = 41 
umausdt   = 42, ogusdt    = 43, cvxusdt   = 44 
mtlusdt   = 45, xmrusdt   = 46, ornusdt   = 47 
neousdt   = 48, dashusdt  = 49, keyusdt   = 50 
zecusdt   = 51, ksmusdt   = 52, trxusdt   = 53 
bchusdt   = 54, compusdt  = 55, galausdt  = 56 
aptusdt   = 57, trbusdt   = 58, zilusdt   = 59 
oneusdt   = 60, nmrusdt   = 61, nulsusdt  = 62 
avaxusdt  = 63, dotusdt   = 64, xrpusdt   = 65 
etcusdt   = 66, okbusdt   = 67, linkusdt  = 68 
qntusdt   = 69, egldusdt  = 70, xlmusdt   = 71 
rplusdt   = 72, manausdt  = 73, vetusdt   = 74 
axsusdt   = 75, algousdt  = 76, sandusdt  = 77 
tonusdt   = 78, lrcusdt   = 79, grtusdt   = 80 
bsvusdt   = 81, kcsusdt   = 82, luncusdt  = 83 
mkrusdt   = 84, nearusdt  = 85, cfxusdt   = 86 
htusdt    = 87, twtusdt   = 88, klayusdt  = 89 
gmxusdt   = 90, enjusdt   = 91, pepeusdt  = 92 
btcusdt   = 93, runeusdt  = 94, iotausdt  = 95 
hbarusdt  = 96, nexousdt  = 97, bttusdt   = 98 
crousdt   = 99, gtusdt    =100, xdcusdt   =101 
chzusdt   =102, rndrusdt  =103, xecusdt   =104 
ftmusdt   =105, stxusdt   =106, csprusdt  =107 
bitusdt   =108, opusdt    =109, woousdt   =110 
imxusdt   =111, agixusdt  =112, suiusdt   =113 
crvusdt   =114, paxgusdt  =115, flrusdt   =116 
fxsusdt   =117, soulusdt  =118, mtvusdt   =119 

sz = 119

_                                                                                                                                                                                                                                                                                                             ='
                                                             UDT/Variables                                                                                                                                                                                                              
                                                             -------------                                                                                                                                                                                                                                    '
type data 
    float[] resC 
    float[] aU 
    float[] aD

    float sma 
    float smaAu
    float smaAd

    float rma 
    float rmaU 
    float rmaD 

    float Prma 
    float PrmaU 
    float PrmaD 

    float rs 
    float rsi 
    float ch 

var arrT = array.new<string>() 
var arrO = array.new<float >() 
var arrH = array.new<float >() 
var arrL = array.new<float >() 
var arrC = array.new<float >() 
var a_pC = array.new<float >() 
var arrD = array.new<data  >() 

var arrR = array.from(
   r1  , r2  , r3  , r4  , r5  , r6  , r7  , r8  , r9  , r10
 , r11 , r12 , r13 , r14 , r15 , r16 , r17 , r18 , r19 , r20
 , r21 , r22 , r23 , r24 , r25 , r26 , r27 , r28 , r29 , r30
 , r31 , r32 , r33 , r34 , r35 , r36 , r37 , r38 , r39 , r40
 , r41 , r42 , r43 , r44 , r45 , r46 , r47 , r48 , r49 , r50
 , r51 , r52 , r53 , r54 , r55 , r56 , r57 , r58 , r59 , r60
 , r61 , r62 , r63 , r64 , r65 , r66 , r67 , r68 , r69 , r70
 , r71 , r72 , r73 , r74 , r75 , r76 , r77 , r78 , r79 , r80
 , r81 , r82 , r83 , r84 , r85 , r86 , r87 , r88 , r89 , r90
 , r91 , r92 , r93 , r94 , r95 , r96 , r97 , r98 , r99 , r100
 , r101, r102, r103, r104, r105, r106, r107, r108, r109, r110
 , r111, r112, r113, r114, r115, r116, r117, r118, r119, r120
 )

var tab  = table.new(
   position = position.top_right
 , columns  = 36
 , rows     = sz
 , bgcolor  = color(na)
 , border_width = 1)

var tab2 = table.new(
   position = position.bottom_right
 , columns  = 1
 , rows     = 1
 , bgcolor  = color(na)
 , border_width = 1)

for i = 0 to sz
    if barstate.isfirst 
        arrT.unshift('')
        arrO.unshift(0.)
        arrH.unshift(0.)
        arrL.unshift(0.)
        arrC.unshift(0.)
        a_pC.unshift(0.)
        arrD.unshift(
         data.new(
           array.new<float>()
         , array.new<float>()
         , array.new<float>()
         , na, na, na, na, na
         , na, na, na, na
         , na, na, na
          )
         )

_                                                                                                                                                                                                                                                                                                             ='
                                                             Functions                                                                                                                                                                                                               
                                                             ---------                                                                                                                                                                                                                                        '

f_col(i)    => i % 2 ? color.rgb(53, 232, 229, 53) : color.rgb(175, 53, 232, 53)

f_col_CH(i) => 
    n = arrD.get(i).ch
    na(n)      ?   color(na) 
     : n < -10 ? cCh_15 
     : n < -5  ? cCh_10 
     : n <  0  ? cCh_5 
     : n == 0  ? cCh0
     : n <  5  ? cCh5 
     : n < 10  ? cCh10
     :           cCh15 
   
f_col_MA(t, i) => 
    n  =  t == 'sma' ? arrD.get(i).sma 
                     : arrD.get(i).rma

    na(n)   ?   color(na) 
     : arrC.get(i) > n ? cMAH
     : arrC.get(i) < n ? cMAL
     :                   cMAe

f_colRSI(i) => 
    n = arrD.get(i).rsi
    na(n)      ? color(na) 
     : n < 20  ? cRSI20   
     : n < 30  ? cRSI30  
     : n < 50  ? cRSI45
     : n > 80  ? cRSI80 
     : n > 70  ? cRSI70 
     :           cRSI55
 
exch(t) => incl_exch ? t : str.match(t, "(?<=:)[\\w]+")

compose_3_(ticker1, ticker2, m2, ticker3, m3) => 
    T = ''
    T +=       ticker1           // example SOLUSDT   = 21.28
    T += '+' + ticker2           // example CAKEUSDT  = 1.766  -> to get this ->       1766021.28 -> multiple CAKE  with 10e5   1,766|0|21.28 
    T += '*' + str.tostring(m2)
    T += '+' + ticker3           // example FILUSDT   = 4.9636 -> to get this -> 4963601766021.28 -> multiple  FIL  with 10e10
    T += '*' + str.tostring(m3)
    T

split_3_(x, m1, e1, m2, e2, e3) =>
    n         =            x 
    ticker1n  = math.round(n / m1, e1)
    n        -=  nz(ticker1n * m1)
    ticker2n  = math.round(n / m2, e2)
    n        -=  nz(ticker2n * m2)
    ticker3n  = math.round(n     , e3)
    [ticker1n, ticker2n, ticker3n]

set_3_(
   pos1, T1t, T1o, T1h, T1l, T1c   
  ,pos2, T2t, T2o, T2h, T2l, T2c
  ,pos3, T3t, T3o, T3h, T3l, T3c) =>
    if barstate.isfirst 
        arrT.set(pos1, exch(T1t))
        arrT.set(pos2, exch(T2t))
        arrT.set(pos3, exch(T3t))

    if Tch 
        arrO.set(pos1, T1o), arrO.set(pos2, T2o), arrO.set(pos3, T3o)
        arrH.set(pos1, T1h), arrH.set(pos2, T2h), arrH.set(pos3, T3h)
        arrL.set(pos1, T1l), arrL.set(pos2, T2l), arrL.set(pos3, T3l)

        a_pC.set(pos1, arrC.get(pos1))          
        a_pC.set(pos2, arrC.get(pos2))          
        a_pC.set(pos3, arrC.get(pos3))          

    arrC.set(pos1, T1c) 
    arrC.set(pos2, T2c) 
    arrC.set(pos3, T3c)

_                                                                                                                                                                                                                                                                                                             ='
                                                             Execution                                                                                                                                                                                                               
                                                             ---------                                                                                                                                                                                                                                        '
T1 = compose_3_(t3  , t2  , n2  , t1  , n1  ), T2 = compose_3_(t6  , t5  , n5  , t4  , n4  )
T3 = compose_3_(t9  , t8  , n8  , t7  , n7  ), T4 = compose_3_(t12 , t11 , n11 , t10 , n10 )
T5 = compose_3_(t15 , t14 , n14 , t13 , n13 ), T6 = compose_3_(t18 , t17 , n17 , t16 , n16 )
T7 = compose_3_(t21 , t20 , n20 , t19 , n19 ), T8 = compose_3_(t24 , t23 , n23 , t22 , n22 )
T9 = compose_3_(t27 , t26 , n26 , t25 , n25 ), T10= compose_3_(t30 , t29 , n29 , t28 , n28 )
T11= compose_3_(t33 , t32 , n32 , t31 , n31 ), T12= compose_3_(t36 , t35 , n35 , t34 , n34 )
T13= compose_3_(t39 , t38 , n38 , t37 , n37 ), T14= compose_3_(t42 , t41 , n41 , t40 , n40 )
T15= compose_3_(t45 , t44 , n44 , t43 , n43 ), T16= compose_3_(t48 , t47 , n47 , t46 , n46 )
T17= compose_3_(t51 , t50 , n50 , t49 , n49 ), T18= compose_3_(t54 , t53 , n53 , t52 , n52 )
T19= compose_3_(t57 , t56 , n56 , t55 , n55 ), T20= compose_3_(t60 , t59 , n59 , t58 , n58 )
T21= compose_3_(t63 , t62 , n62 , t61 , n61 ), T22= compose_3_(t66 , t65 , n65 , t64 , n64 )
T23= compose_3_(t69 , t68 , n68 , t67 , n67 ), T24= compose_3_(t72 , t71 , n71 , t70 , n70 )
T25= compose_3_(t75 , t74 , n74 , t73 , n73 ), T26= compose_3_(t78 , t77 , n77 , t76 , n76 )
T27= compose_3_(t81 , t80 , n80 , t79 , n79 ), T28= compose_3_(t84 , t83 , n83 , t82 , n82 )
T29= compose_3_(t87 , t86 , n86 , t85 , n85 ), T30= compose_3_(t90 , t89 , n89 , t88 , n88 )
T31= compose_3_(t93 , t92 , n92 , t91 , n91 ), T32= compose_3_(t96 , t95 , n95 , t94 , n94 )
T33= compose_3_(t99 , t98 , n98 , t97 , n97 ), T34= compose_3_(t102, t101, n101, t100, n100)
T35= compose_3_(t105, t104, n104, t103, n103), T36= compose_3_(t108, t107, n107, t106, n106)
T37= compose_3_(t111, t110, n110, t109, n109), T38= compose_3_(t114, t113, n113, t112, n112)
T39= compose_3_(t117, t116, n116, t115, n115), T40= compose_3_(t120, t119, n119, t118, n118)


[o1 , h1 , l1 , c1 ] = request.security(T1 , res, [open, high, low, close], ignore_invalid_symbol=true)
[o2 , h2 , l2 , c2 ] = request.security(T2 , res, [open, high, low, close], ignore_invalid_symbol=true)
[o3 , h3 , l3 , c3 ] = request.security(T3 , res, [open, high, low, close], ignore_invalid_symbol=true)
[o4 , h4 , l4 , c4 ] = request.security(T4 , res, [open, high, low, close], ignore_invalid_symbol=true)
[o5 , h5 , l5 , c5 ] = request.security(T5 , res, [open, high, low, close], ignore_invalid_symbol=true)
[o6 , h6 , l6 , c6 ] = request.security(T6 , res, [open, high, low, close], ignore_invalid_symbol=true)
[o7 , h7 , l7 , c7 ] = request.security(T7 , res, [open, high, low, close], ignore_invalid_symbol=true)
[o8 , h8 , l8 , c8 ] = request.security(T8 , res, [open, high, low, close], ignore_invalid_symbol=true)
[o9 , h9 , l9 , c9 ] = request.security(T9 , res, [open, high, low, close], ignore_invalid_symbol=true)
[o10, h10, l10, c10] = request.security(T10, res, [open, high, low, close], ignore_invalid_symbol=true)
[o11, h11, l11, c11] = request.security(T11, res, [open, high, low, close], ignore_invalid_symbol=true)
[o12, h12, l12, c12] = request.security(T12, res, [open, high, low, close], ignore_invalid_symbol=true)
[o13, h13, l13, c13] = request.security(T13, res, [open, high, low, close], ignore_invalid_symbol=true)
[o14, h14, l14, c14] = request.security(T14, res, [open, high, low, close], ignore_invalid_symbol=true)
[o15, h15, l15, c15] = request.security(T15, res, [open, high, low, close], ignore_invalid_symbol=true)
[o16, h16, l16, c16] = request.security(T16, res, [open, high, low, close], ignore_invalid_symbol=true)
[o17, h17, l17, c17] = request.security(T17, res, [open, high, low, close], ignore_invalid_symbol=true)
[o18, h18, l18, c18] = request.security(T18, res, [open, high, low, close], ignore_invalid_symbol=true)
[o19, h19, l19, c19] = request.security(T19, res, [open, high, low, close], ignore_invalid_symbol=true)
[o20, h20, l20, c20] = request.security(T20, res, [open, high, low, close], ignore_invalid_symbol=true)
[o21, h21, l21, c21] = request.security(T21, res, [open, high, low, close], ignore_invalid_symbol=true)
[o22, h22, l22, c22] = request.security(T22, res, [open, high, low, close], ignore_invalid_symbol=true)
[o23, h23, l23, c23] = request.security(T23, res, [open, high, low, close], ignore_invalid_symbol=true)
[o24, h24, l24, c24] = request.security(T24, res, [open, high, low, close], ignore_invalid_symbol=true)
[o25, h25, l25, c25] = request.security(T25, res, [open, high, low, close], ignore_invalid_symbol=true)
[o26, h26, l26, c26] = request.security(T26, res, [open, high, low, close], ignore_invalid_symbol=true)
[o27, h27, l27, c27] = request.security(T27, res, [open, high, low, close], ignore_invalid_symbol=true)
[o28, h28, l28, c28] = request.security(T28, res, [open, high, low, close], ignore_invalid_symbol=true)
[o29, h29, l29, c29] = request.security(T29, res, [open, high, low, close], ignore_invalid_symbol=true)
[o30, h30, l30, c30] = request.security(T30, res, [open, high, low, close], ignore_invalid_symbol=true)
[o31, h31, l31, c31] = request.security(T31, res, [open, high, low, close], ignore_invalid_symbol=true)
[o32, h32, l32, c32] = request.security(T32, res, [open, high, low, close], ignore_invalid_symbol=true)
[o33, h33, l33, c33] = request.security(T33, res, [open, high, low, close], ignore_invalid_symbol=true)
[o34, h34, l34, c34] = request.security(T34, res, [open, high, low, close], ignore_invalid_symbol=true)
[o35, h35, l35, c35] = request.security(T35, res, [open, high, low, close], ignore_invalid_symbol=true)
[o36, h36, l36, c36] = request.security(T36, res, [open, high, low, close], ignore_invalid_symbol=true)
[o37, h37, l37, c37] = request.security(T37, res, [open, high, low, close], ignore_invalid_symbol=true)
[o38, h38, l38, c38] = request.security(T38, res, [open, high, low, close], ignore_invalid_symbol=true)
[o39, h39, l39, c39] = request.security(T39, res, [open, high, low, close], ignore_invalid_symbol=true)
[o40, h40, l40, c40] = request.security(T40, res, [open, high, low, close], ignore_invalid_symbol=true)

plotT =
   chT == 'T1'  ? c1  : chT == 'T2'  ? c2  : chT == 'T3'  ? c3  : chT == 'T4'  ? c4 
 : chT == 'T5'  ? c5  : chT == 'T6'  ? c6  : chT == 'T7'  ? c7  : chT == 'T8'  ? c8
 : chT == 'T9'  ? c9  : chT == 'T10' ? c10 : chT == 'T11' ? c11 : chT == 'T12' ? c12
 : chT == 'T13' ? c13 : chT == 'T14' ? c14 : chT == 'T15' ? c15 : chT == 'T16' ? c16 
 : chT == 'T17' ? c17 : chT == 'T18' ? c18 : chT == 'T19' ? c19 : chT == 'T20' ? c20 
 : chT == 'T21' ? c21 : chT == 'T22' ? c22 : chT == 'T23' ? c23 : chT == 'T24' ? c24 
 : chT == 'T25' ? c25 : chT == 'T26' ? c26 : chT == 'T27' ? c27 : chT == 'T28' ? c28 
 : chT == 'T29' ? c29 : chT == 'T30' ? c30 : chT == 'T31' ? c31 : chT == 'T32' ? c32 
 : chT == 'T33' ? c33 : chT == 'T34' ? c34 : chT == 'T35' ? c35 : chT == 'T36' ? c36 
 : chT == 'T37' ? c37 : chT == 'T38' ? c38 : chT == 'T39' ? c39 : chT == 'T40' ? c40 
 : na

[FILo  , CAKEo, SOLo   ] = split_3_(o1 , n1 , r1 , n2 , r2 , r3 )
[FILh  , CAKEh, SOLh   ] = split_3_(h1 , n1 , r1 , n2 , r2 , r3 )
[FILl  , CAKEl, SOLl   ] = split_3_(l1 , n1 , r1 , n2 , r2 , r3 )
[FILc  , CAKEc, SOLc   ] = split_3_(c1 , n1 , r1 , n2 , r2 , r3 ) 
[BNBo  , ETHo , THETAo ] = split_3_(o2 , n4 , r4 , n5 , r5 , r6 )
[BNBh  , ETHh , THETAh ] = split_3_(h2 , n4 , r4 , n5 , r5 , r6 )
[BNBl  , ETHl , THETAl ] = split_3_(l2 , n4 , r4 , n5 , r5 , r6 )
[BNBc  , ETHc , THETAc ] = split_3_(c2 , n4 , r4 , n5 , r5 , r6 )
[INJo  , OXTo , ADAo   ] = split_3_(o3 , n7 , r7 , n8 , r8 , r9 )
[INJh  , OXTh , ADAh   ] = split_3_(h3 , n7 , r7 , n8 , r8 , r9 )
[INJl  , OXTl , ADAl   ] = split_3_(l3 , n7 , r7 , n8 , r8 , r9 )
[INJc  , OXTc , ADAc   ] = split_3_(c3 , n7 , r7 , n8 , r8 , r9 )
[MATICo, LTCo , ARBo   ] = split_3_(o4 , n10, r10, n11, r11, r12)
[MATICh, LTCh , ARBh   ] = split_3_(h4 , n10, r10, n11, r11, r12)
[MATICl, LTCl , ARBl   ] = split_3_(l4 , n10, r10, n11, r11, r12)
[MATICc, LTCc , ARBc   ] = split_3_(c4 , n10, r10, n11, r11, r12)
[AAVEo , ATOMo, LINAo  ] = split_3_(o5 , n13, r13, n14, r14, r15)
[AAVEh , ATOMh, LINAh  ] = split_3_(h5 , n13, r13, n14, r14, r15)
[AAVEl , ATOMl, LINAl  ] = split_3_(l5 , n13, r13, n14, r14, r15)
[AAVEc , ATOMc, LINAc  ] = split_3_(c5 , n13, r13, n14, r14, r15)
[KAVAo , ICPo  , MASKo ] = split_3_(o6 , n16, r16, n17, r17, r18)
[KAVAh , ICPh  , MASKh ] = split_3_(h6 , n16, r16, n17, r17, r18)
[KAVAl , ICPl  , MASKl ] = split_3_(l6 , n16, r16, n17, r17, r18)
[KAVAc , ICPc  , MASKc ] = split_3_(c6 , n16, r16, n17, r17, r18)
[EOSo  , DYDXo , LDOo  ] = split_3_(o7 , n19, r19, n20, r20, r21)
[EOSh  , DYDXh , LDOh  ] = split_3_(h7 , n19, r19, n20, r20, r21)
[EOSl  , DYDXl , LDOl  ] = split_3_(l7 , n19, r19, n20, r20, r21)
[EOSc  , DYDXc , LDOc  ] = split_3_(c7 , n19, r19, n20, r20, r21)
[XTZo  , FLOWo , WAVESo] = split_3_(o8 , n22, r22, n23, r23, r24)
[XTZh  , FLOWh , WAVESh] = split_3_(h8 , n22, r22, n23, r23, r24)
[XTZl  , FLOWl , WAVESl] = split_3_(l8 , n22, r22, n23, r23, r24)
[XTZc  , FLOWc , WAVESc] = split_3_(c8 , n22, r22, n23, r23, r24)
[BANDo , APEo  , OMGo  ] = split_3_(o9 , n25, r25, n26, r26, r27)
[BANDh , APEh  , OMGh  ] = split_3_(h9 , n25, r25, n26, r26, r27)
[BANDl , APEl  , OMGl  ] = split_3_(l9 , n25, r25, n26, r26, r27)
[BANDc , APEc  , OMGc  ] = split_3_(c9 , n25, r25, n26, r26, r27)
[UNIo  , SNXo  , INCHo ] = split_3_(o10, n28, r28, n29, r29, r30)
[UNIh  , SNXh  , INCHh ] = split_3_(h10, n28, r28, n29, r29, r30)
[UNIl  , SNXl  , INCHl ] = split_3_(l10, n28, r28, n29, r29, r30)
[UNIc  , SNXc  , INCHc ] = split_3_(c10, n28, r28, n29, r29, r30)
[MINAo , HIGHo , SUSHIo] = split_3_(o11, n31, r31, n32, r32, r33)
[MINAh , HIGHh , SUSHIh] = split_3_(h11, n31, r31, n32, r32, r33)
[MINAl , HIGHl , SUSHIl] = split_3_(l11, n31, r31, n32, r32, r33)
[MINAc , HIGHc , SUSHIc] = split_3_(c11, n31, r31, n32, r32, r33)
[CELOo , BALo  , ERNo  ] = split_3_(o12, n34, r34, n35, r35, r36)
[CELOh , BALh  , ERNh  ] = split_3_(h12, n34, r34, n35, r35, r36)
[CELOl , BALl  , ERNl  ] = split_3_(l12, n34, r34, n35, r35, r36)
[CELOc , BALc  , ERNc  ] = split_3_(c12, n34, r34, n35, r35, r36)
[KDAo  , CTKo  , FLUXo ] = split_3_(o13, n37, r37, n38, r38, r39)
[KDAh  , CTKh  , FLUXh ] = split_3_(h13, n37, r37, n38, r38, r39)
[KDAl  , CTKl  , FLUXl ] = split_3_(l13, n37, r37, n38, r38, r39)
[KDAc  , CTKc  , FLUXc ] = split_3_(c13, n37, r37, n38, r38, r39)
[AGLDo , QTUMo , GALo  ] = split_3_(o14, n40, r40, n41, r41, r42)
[AGLDh , QTUMh , GALh  ] = split_3_(h14, n40, r40, n41, r41, r42)
[AGLDl , QTUMl , GALl  ] = split_3_(l14, n40, r40, n41, r41, r42)
[AGLDc , QTUMc , GALc  ] = split_3_(c14, n40, r40, n41, r41, r42)
[UMAo  , OGo   , CVXo  ] = split_3_(o15, n43, r43, n44, r44, r45)
[UMAh  , OGh   , CVXh  ] = split_3_(h15, n43, r43, n44, r44, r45)
[UMAl  , OGl   , CVXl  ] = split_3_(l15, n43, r43, n44, r44, r45)
[UMAc  , OGc   , CVXc  ] = split_3_(c15, n43, r43, n44, r44, r45)
[MTLo  , XMRo  , ORNo  ] = split_3_(o16, n46, r46, n47, r47, r48)
[MTLh  , XMRh  , ORNh  ] = split_3_(h16, n46, r46, n47, r47, r48)
[MTLl  , XMRl  , ORNl  ] = split_3_(l16, n46, r46, n47, r47, r48)
[MTLc  , XMRc  , ORNc  ] = split_3_(c16, n46, r46, n47, r47, r48)
[NEOo  , DASHo , KEYo  ] = split_3_(o17, n49, r49, n50, r50, r51)
[NEOh  , DASHh , KEYh  ] = split_3_(h17, n49, r49, n50, r50, r51)
[NEOl  , DASHl , KEYl  ] = split_3_(l17, n49, r49, n50, r50, r51)
[NEOc  , DASHc , KEYc  ] = split_3_(c17, n49, r49, n50, r50, r51)
[ZECo  , KSMo  , TRXo  ] = split_3_(o18, n52, r52, n53, r53, r54)
[ZECh  , KSMh  , TRXh  ] = split_3_(h18, n52, r52, n53, r53, r54)
[ZECl  , KSMl  , TRXl  ] = split_3_(l18, n52, r52, n53, r53, r54)
[ZECc  , KSMc  , TRXc  ] = split_3_(c18, n52, r52, n53, r53, r54)
[BCHo  , COMPo , GALAo ] = split_3_(o19, n55, r55, n56, r56, r57)
[BCHh  , COMPh , GALAh ] = split_3_(h19, n55, r55, n56, r56, r57)
[BCHl  , COMPl , GALAl ] = split_3_(l19, n55, r55, n56, r56, r57)
[BCHc  , COMPc , GALAc ] = split_3_(c19, n55, r55, n56, r56, r57)
[APTo  , TRBo  , ZILo  ] = split_3_(o20, n58, r58, n59, r59, r60)
[APTh  , TRBh  , ZILh  ] = split_3_(h20, n58, r58, n59, r59, r60)
[APTl  , TRBl  , ZILl  ] = split_3_(l20, n58, r58, n59, r59, r60)
[APTc  , TRBc  , ZILc  ] = split_3_(c20, n58, r58, n59, r59, r60)
[ONEo  , NMRo  , NULSo ] = split_3_(o21, n61, r61, n62, r62, r63)
[ONEh  , NMRh  , NULSh ] = split_3_(h21, n61, r61, n62, r62, r63)
[ONEl  , NMRl  , NULSl ] = split_3_(l21, n61, r61, n62, r62, r63)
[ONEc  , NMRc  , NULSc ] = split_3_(c21, n61, r61, n62, r62, r63)
[AVAXo , DOTo  , XRPo  ] = split_3_(o22, n64, r64, n65, r65, r66)
[AVAXh , DOTh  , XRPh  ] = split_3_(h22, n64, r64, n65, r65, r66)
[AVAXl , DOTl  , XRPl  ] = split_3_(l22, n64, r64, n65, r65, r66)
[AVAXc , DOTc  , XRPc  ] = split_3_(c22, n64, r64, n65, r65, r66)
[ETCo  , OKBo  , LINKo ] = split_3_(o23, n67, r67, n68, r68, r69)
[ETCh  , OKBh  , LINKh ] = split_3_(h23, n67, r67, n68, r68, r69)
[ETCl  , OKBl  , LINKl ] = split_3_(l23, n67, r67, n68, r68, r69)
[ETCc  , OKBc  , LINKc ] = split_3_(c23, n67, r67, n68, r68, r69)
[QNTo  , EGLDo , XLMo  ] = split_3_(o24, n70, r70, n71, r71, r72)
[QNTh  , EGLDh , XLMh  ] = split_3_(h24, n70, r70, n71, r71, r72)
[QNTl  , EGLDl , XLMl  ] = split_3_(l24, n70, r70, n71, r71, r72)
[QNTc  , EGLDc , XLMc  ] = split_3_(c24, n70, r70, n71, r71, r72)
[RPLo  , MANAo , VETo  ] = split_3_(o25, n73, r73, n74, r74, r75)
[RPLh  , MANAh , VETh  ] = split_3_(h25, n73, r73, n74, r74, r75)
[RPLl  , MANAl , VETl  ] = split_3_(l25, n73, r73, n74, r74, r75)
[RPLc  , MANAc , VETc  ] = split_3_(c25, n73, r73, n74, r74, r75)
[AXSo  , ALGOo , SANDo ] = split_3_(o26, n76, r76, n77, r77, r78)
[AXSh  , ALGOh , SANDh ] = split_3_(h26, n76, r76, n77, r77, r78)
[AXSl  , ALGOl , SANDl ] = split_3_(l26, n76, r76, n77, r77, r78)
[AXSc  , ALGOc , SANDc ] = split_3_(c26, n76, r76, n77, r77, r78)
[TONo  , LRCo  , GRTo  ] = split_3_(o27, n79, r79, n80, r80, r81)
[TONh  , LRCh  , GRTh  ] = split_3_(h27, n79, r79, n80, r80, r81)
[TONl  , LRCl  , GRTl  ] = split_3_(l27, n79, r79, n80, r80, r81)
[TONc  , LRCc  , GRTc  ] = split_3_(c27, n79, r79, n80, r80, r81)
[BSVo  , KCSo  , LUNCo ] = split_3_(o28, n82, r82, n83, r83, r84)
[BSVh  , KCSh  , LUNCh ] = split_3_(h28, n82, r82, n83, r83, r84)
[BSVl  , KCSl  , LUNCl ] = split_3_(l28, n82, r82, n83, r83, r84)
[BSVc  , KCSc  , LUNCc ] = split_3_(c28, n82, r82, n83, r83, r84)
[MKRo  , NEARo , CFXo  ] = split_3_(o29, n85, r85, n86, r86, r87)
[MKRh  , NEARh , CFXh  ] = split_3_(h29, n85, r85, n86, r86, r87)
[MKRl  , NEARl , CFXl  ] = split_3_(l29, n85, r85, n86, r86, r87)
[MKRc  , NEARc , CFXc  ] = split_3_(c29, n85, r85, n86, r86, r87)
[HTo   , TWTo  , KLAYo ] = split_3_(o30, n88, r88, n89, r89, r90)
[HTh   , TWTh  , KLAYh ] = split_3_(h30, n88, r88, n89, r89, r90)
[HTl   , TWTl  , KLAYl ] = split_3_(l30, n88, r88, n89, r89, r90)
[HTc   , TWTc  , KLAYc ] = split_3_(c30, n88, r88, n89, r89, r90)
[GMXo  , ENJo  , PEPEo ] = split_3_(o31, n91, r91, n92, r92, r93)
[GMXh  , ENJh  , PEPEh ] = split_3_(h31, n91, r91, n92, r92, r93)
[GMXl  , ENJl  , PEPEl ] = split_3_(l31, n91, r91, n92, r92, r93)
[GMXc  , ENJc  , PEPEc ] = split_3_(c31, n91, r91, n92, r92, r93)
[BTCo  , RUNEo , IOTAo ] = split_3_(o32, n94, r94, n95, r95, r96)
[BTCh  , RUNEh , IOTAh ] = split_3_(h32, n94, r94, n95, r95, r96)
[BTCl  , RUNEl , IOTAl ] = split_3_(l32, n94, r94, n95, r95, r96)
[BTCc  , RUNEc , IOTAc ] = split_3_(c32, n94, r94, n95, r95, r96)
[HBARo , NEXOo , BTTo  ] = split_3_(o33, n97, r97, n98, r98, r99)
[HBARh , NEXOh , BTTh  ] = split_3_(h33, n97, r97, n98, r98, r99)
[HBARl , NEXOl , BTTl  ] = split_3_(l33, n97, r97, n98, r98, r99)
[HBARc , NEXOc , BTTc  ] = split_3_(c33, n97, r97, n98, r98, r99)
[CROo  , GTo   , XDCo  ] = split_3_(o34,n100,r100,n101,r101,r102)
[CROh  , GTh   , XDCh  ] = split_3_(h34,n100,r100,n101,r101,r102)
[CROl  , GTl   , XDCl  ] = split_3_(l34,n100,r100,n101,r101,r102)
[CROc  , GTc   , XDCc  ] = split_3_(c34,n100,r100,n101,r101,r102)
[CHZo  , RNDRo , XECo  ] = split_3_(o35,n103,r103,n104,r104,r105)
[CHZh  , RNDRh , XECh  ] = split_3_(h35,n103,r103,n104,r104,r105)
[CHZl  , RNDRl , XECl  ] = split_3_(l35,n103,r103,n104,r104,r105)
[CHZc  , RNDRc , XECc  ] = split_3_(c35,n103,r103,n104,r104,r105)
[FTMo  , STXo  , CSPRo ] = split_3_(o36,n106,r106,n107,r107,r108)
[FTMh  , STXh  , CSPRh ] = split_3_(h36,n106,r106,n107,r107,r108)
[FTMl  , STXl  , CSPRl ] = split_3_(l36,n106,r106,n107,r107,r108)
[FTMc  , STXc  , CSPRc ] = split_3_(c36,n106,r106,n107,r107,r108)
[BITo  , OPo   , WOOo  ] = split_3_(o37,n109,r109,n110,r110,r111)
[BITh  , OPh   , WOOh  ] = split_3_(h37,n109,r109,n110,r110,r111)
[BITl  , OPl   , WOOl  ] = split_3_(l37,n109,r109,n110,r110,r111)
[BITc  , OPc   , WOOc  ] = split_3_(c37,n109,r109,n110,r110,r111)
[IMXo  , AGIXo , SUIo  ] = split_3_(o38,n112,r112,n113,r113,r114)
[IMXh  , AGIXh , SUIh  ] = split_3_(h38,n112,r112,n113,r113,r114)
[IMXl  , AGIXl , SUIl  ] = split_3_(l38,n112,r112,n113,r113,r114)
[IMXc  , AGIXc , SUIc  ] = split_3_(c38,n112,r112,n113,r113,r114)
[CRVo  , PAXGo , FLRo  ] = split_3_(o39,n115,r115,n116,r116,r117)
[CRVh  , PAXGh , FLRh  ] = split_3_(h39,n115,r115,n116,r116,r117)
[CRVl  , PAXGl , FLRl  ] = split_3_(l39,n115,r115,n116,r116,r117)
[CRVc  , PAXGc , FLRc  ] = split_3_(c39,n115,r115,n116,r116,r117)
[FXSo  , SOULo , MTVo  ] = split_3_(o40,n118,r118,n119,r119,r120)
[FXSh  , SOULh , MTVh  ] = split_3_(h40,n118,r118,n119,r119,r120)
[FXSl  , SOULl , MTVl  ] = split_3_(l40,n118,r118,n119,r119,r120)
[FXSc  , SOULc , MTVc  ] = split_3_(c40,n118,r118,n119,r119,r120)

set_3_(filusdt   , t1  , FILo   , FILh   , FILl   , FILc  , cakeusdt, t2  , CAKEo, CAKEh, CAKEl, CAKEc, solusdt  , t3  , SOLo  , SOLh  , SOLl  , SOLc  )
set_3_(bnbusdt   , t4  , BNBo   , BNBh   , BNBl   , BNBc  , ethusdt , t5  , ETHo , ETHh , ETHl , ETHc , thetausdt, t6  , THETAo, THETAh, THETAl, THETAc)
set_3_(injusdt   , t7  , INJo   , INJh   , INJl   , INJc  , oxtusdt , t8  , OXTo , OXTh , OXTl , OXTc , adausdt  , t9  , ADAo  , ADAh  , ADAl  , ADAc  )
set_3_(maticusdt , t10 , MATICo , MATICh , MATICl , MATICc, ltcusdt , t11 , LTCo , LTCh , LTCl , LTCc , arbusdt  , t12 , ARBo  , ARBh  , ARBl  , ARBc  )
set_3_(aaveusdt  , t13 , AAVEo  , AAVEh  , AAVEl  , AAVEc,  atomusdt, t14 , ATOMo, ATOMh, ATOMl, ATOMc, linausdt , t15 , LINAo , LINAh , LINAl , LINAc )
set_3_(kavausdt  , t16 , KAVAo  , KAVAh  , KAVAl  , KAVAc,  icpusdt , t17 , ICPo , ICPh , ICPl , ICPc , maskusdt , t18 , MASKo , MASKh , MASKl , MASKc )
set_3_(eosusdt   , t19 , EOSo   , EOSh   , EOSl   , EOSc,   dydxusdt, t20 , DYDXo, DYDXh, DYDXl, DYDXc, ldousdt  , t21 , LDOo  , LDOh  , LDOl  , LDOc  )
set_3_(xtzusdt   , t22 , XTZo   , XTZh   , XTZl   , XTZc,   flowusdt, t23 , FLOWo, FLOWh, FLOWl, FLOWc, wavesusdt, t24 , WAVESo, WAVESh, WAVESl, WAVESc)
set_3_(bandusdt  , t25 , BANDo  , BANDh  , BANDl  , BANDc,  apeusdt , t26 , APEo , APEh , APEl , APEc , omgusdt  , t27 , OMGo  , OMGh  , OMGl  , OMGc  )
set_3_(uniusdt   , t28 , UNIo   , UNIh   , UNIl   , UNIc,   snxusdt , t29 , SNXo , SNXh , SNXl , SNXc , inchusdt , t30 , INCHo , INCHh , INCHl , INCHc )
set_3_(minausdt  , t31 , MINAo  , MINAh  , MINAl  , MINAc,  highusdt, t32 , HIGHo, HIGHh, HIGHl, HIGHc, sushiusdt, t33 , SUSHIo, SUSHIh, SUSHIl, SUSHIc)
set_3_(celousdt  , t34 , CELOo  , CELOh  , CELOl  , CELOc,  balusdt , t35 , BALo , BALh , BALl , BALc , ernusdt  , t36 , ERNo  , ERNh  , ERNl  , ERNc  )
set_3_(kdausdt   , t37 , KDAo   , KDAh   , KDAl   , KDAc,   ctkusdt , t38 , CTKo , CTKh , CTKl , CTKc , fluxusdt , t39 , FLUXo , FLUXh , FLUXl , FLUXc )
set_3_(agldusdt  , t40 , AGLDo  , AGLDh  , AGLDl  , AGLDc,  qtumusdt, t41 , QTUMo, QTUMh, QTUMl, QTUMc, galusdt  , t42 , GALo  , GALh  , GALl  , GALc  )
set_3_(umausdt   , t43 , UMAo   , UMAh   , UMAl   , UMAc,   ogusdt  , t44 , OGo  , OGh  , OGl  , OGc  , cvxusdt  , t45 , CVXo  , CVXh  , CVXl  , CVXc  )
set_3_(mtlusdt   , t46 , MTLo   , MTLh   , MTLl   , MTLc,   xmrusdt , t47 , XMRo , XMRh , XMRl , XMRc , ornusdt  , t48 , ORNo  , ORNh  , ORNl  , ORNc  )
set_3_(neousdt   , t49 , NEOo   , NEOh   , NEOl   , NEOc ,  dashusdt, t50 , DASHo, DASHh, DASHl, DASHc, keyusdt  , t51 , KEYo  , KEYh  , KEYl  , KEYc  )
set_3_(zecusdt   , t52 , ZECo   , ZECh   , ZECl   , ZECc ,  ksmusdt , t53 , KSMo , KSMh , KSMl , KSMc , trxusdt  , t54 , TRXo  , TRXh  , TRXl  , TRXc  )
set_3_(bchusdt   , t55 , BCHo   , BCHh   , BCHl   , BCHc ,  compusdt, t56 , COMPo, COMPh, COMPl, COMPc, galausdt , t57 , GALAo , GALAh , GALAl , GALAc )
set_3_(aptusdt   , t58 , APTo   , APTh   , APTl   , APTc ,  trbusdt , t59 , TRBo , TRBh , TRBl , TRBc , zilusdt  , t60 , ZILo  , ZILh  , ZILl  , ZILc  )
set_3_(oneusdt   , t61 , ONEo   , ONEh   , ONEl   , ONEc ,  nmrusdt , t62 , NMRo , NMRh , NMRl , NMRc , nulsusdt , t63 , NULSo , NULSh , NULSl , NULSc )
set_3_(avaxusdt  , t64 , AVAXo  , AVAXh  , AVAXl  , AVAXc,  dotusdt , t65 , DOTo , DOTh , DOTl , DOTc , xrpusdt  , t66 , XRPo  , XRPh  , XRPl  , XRPc  )
set_3_(etcusdt   , t67 , ETCo   , ETCh   , ETCl   , ETCc ,  okbusdt , t68 , OKBo , OKBh , OKBl , OKBc , linkusdt , t69 , LINKo , LINKh , LINKl , LINKc )
set_3_(qntusdt   , t70 , QNTo   , QNTh   , QNTl   , QNTc ,  egldusdt, t71 , EGLDo, EGLDh, EGLDl, EGLDc, xlmusdt  , t72 , XLMo  , XLMh  , XLMl  , XLMc  )
set_3_(rplusdt   , t73 , RPLo   , RPLh   , RPLl   , RPLc ,  manausdt, t74 , MANAo, MANAh, MANAl, MANAc, vetusdt  , t75 , VETo  , VETh  , VETl  , VETc  )
set_3_(axsusdt   , t76 , AXSo   , AXSh   , AXSl   , AXSc ,  algousdt, t77 , ALGOo, ALGOh, ALGOl, ALGOc, sandusdt , t78 , SANDo , SANDh , SANDl , SANDc )
set_3_(tonusdt   , t79 , TONo   , TONh   , TONl   , TONc ,  lrcusdt , t80 , LRCo , LRCh , LRCl , LRCc , grtusdt  , t81 , GRTo  , GRTh  , GRTl  , GRTc  )
set_3_(bsvusdt   , t82 , BSVo   , BSVh   , BSVl   , BSVc ,  kcsusdt , t83 , KCSo , KCSh , KCSl , KCSc , luncusdt , t84 , LUNCo , LUNCh , LUNCl , LUNCc )
set_3_(mkrusdt   , t85 , MKRo   , MKRh   , MKRl   , MKRc ,  nearusdt, t86 , NEARo, NEARh, NEARl, NEARc, cfxusdt  , t87 , CFXo  , CFXh  , CFXl  , CFXc  )
set_3_(htusdt    , t88 , HTo    , HTh    , HTl    , HTc  ,  twtusdt , t89 , TWTo , TWTh , TWTl , TWTc , klayusdt , t90 , KLAYo , KLAYh , KLAYl , KLAYc )
set_3_(gmxusdt   , t91 , GMXo   , GMXh   , GMXl   , GMXc ,  enjusdt , t92 , ENJo , ENJh , ENJl , ENJc , pepeusdt , t93 , PEPEo , PEPEh , PEPEl , PEPEc )
set_3_(btcusdt   , t94 , BTCo   , BTCh   , BTCl   , BTCc ,  runeusdt, t95 , RUNEo, RUNEh, RUNEl, RUNEc, iotausdt , t96 , IOTAo , IOTAh , IOTAl , IOTAc )
set_3_(hbarusdt  , t97 , HBARo  , HBARh  , HBARl  , HBARc,  nexousdt, t98 , NEXOo, NEXOh, NEXOl, NEXOc, bttusdt  , t99 , BTTo  , BTTh  , BTTl  , BTTc  )
set_3_(crousdt   , t100, CROo   , CROh   , CROl   , CROc ,  gtusdt  , t101, GTo  , GTh  , GTl  , GTc  , xdcusdt  , t102, XDCo  , XDCh  , XDCl  , XDCc  )
set_3_(chzusdt   , t103, CHZo   , CHZh   , CHZl   , CHZc ,  rndrusdt, t104, RNDRo, RNDRh, RNDRl, RNDRc, xecusdt  , t105, XECo  , XECh  , XECl  , XECc  )
set_3_(ftmusdt   , t106, FTMo   , FTMh   , FTMl   , FTMc ,  stxusdt , t107, STXo , STXh , STXl , STXc , csprusdt , t108, CSPRo , CSPRh , CSPRl , CSPRc )
set_3_(bitusdt   , t109, BITo   , BITh   , BITl   , BITc ,  opusdt  , t110, OPo  , OPh  , OPl  , OPc  , woousdt  , t111, WOOo  , WOOh  , WOOl  , WOOc  )
set_3_(imxusdt   , t112, IMXo   , IMXh   , IMXl   , IMXc ,  agixusdt, t113, AGIXo, AGIXh, AGIXl, AGIXc, suiusdt  , t114, SUIo  , SUIh  , SUIl  , SUIc  )
set_3_(crvusdt   , t115, CRVo   , CRVh   , CRVl   , CRVc ,  paxgusdt, t116, PAXGo, PAXGh, PAXGl, PAXGc, flrusdt  , t117, FLRo  , FLRh  , FLRl  , FLRc  )
set_3_(fxsusdt   , t118, FXSo   , FXSh   , FXSl   , FXSc ,  soulusdt, t119, SOULo, SOULh, SOULl, SOULc, mtvusdt  , t120, MTVo  , MTVh  , MTVl  , MTVc  )

_                                                                                                                                                                                                                                                                                                             ='
                                                             Calculate SMA, RMA, RSI                                                                                                                                                                                                               
                                                             -----------------------                                                                                                                                                                                                                          '
// SMA, RMA, RSI
for i = 0 to sz
 
    if last_bar_index - bar_index <  Mper
        get    = arrD.get(i)
        Pclo   = a_pC.get(i)
        clo    = arrC.get(i)  
        change = clo - Pclo, get.ch := math.round(((clo / Pclo) - 1) * 100, 2) // change
        gain   = change >= 0 ?  change : 0.
        loss   = change <  0 ? -change : 0.

        if Tch
            // set previous values
            get.Prma  := get.rma 
            get.PrmaU := get.rmaU
            get.PrmaD := get.rmaD

            // unshift new values
            get.resC.unshift(clo )
            get.aU.unshift  (gain)
            get.aD.unshift  (loss)
        
            if get.resC.size() >  len * 2
                get.resC.pop()
                get.aU.pop()
                get.aD.pop()

        if get.resC.size() >= len
            if not Tch
                sliceSma   = array.slice(get.resC, 0, len -1)
                sliceSmaU  = array.slice(get.aU  , 0, len -1)
                sliceSmaD  = array.slice(get.aD  , 0, len -1)
                get.sma   := (sliceSma.sum () + clo ) / len
                get.smaAu := (sliceSmaU.sum() + gain) / len
                get.smaAd := (sliceSmaD.sum() + loss) / len
            else 
                sliceSma   = array.slice(get.resC, 0, len)
                sliceSmaU  = array.slice(get.aU  , 0, len)
                sliceSmaD  = array.slice(get.aD  , 0, len)
                get.sma   := sliceSma.avg () 
                get.smaAu := sliceSmaU.avg() 
                get.smaAd := sliceSmaD.avg() 

        get.rma  := na(get.Prma ) ? get.sma   : (alpha * clo ) + ((1 - alpha) * get.Prma )
        get.rmaU := na(get.PrmaU) ? get.smaAu : (alpha * gain) + ((1 - alpha) * get.PrmaU)
        get.rmaD := na(get.PrmaD) ? get.smaAd : (alpha * loss) + ((1 - alpha) * get.PrmaD)

        get.rs   := get.rmaU / get.rmaD
        get.rsi  := 100 - 100 / (1 + get.rs)
_                                                                                                                                                                                                                                                                                                             ='
                                                             Plotcandle                                                                                                                                                                                                               
                                                             ----------                                                                                                                                                                                                                                       '
op = choice >= 0 ? arrO.get(choice) : na
hi = choice >= 0 ? arrH.get(choice) : na
lo = choice >= 0 ? arrL.get(choice) : na
cl = choice >= 0 ? arrC.get(choice) : na
col = cl > op ? color.green : color.red

//plot(plotT)
plotcandle(Tch ? op : na, Tch ? hi : na, Tch ? lo : na, Tch ? cl : na, color = col, wickcolor=col, bordercolor=col)

_                                                                                                                                                                                                                                                                                                             ='
                                                               Table                                                                                                                                                                                                               
                                                               -----                                                                                                                                                                                                                                          '
if barstate.islast

    if not na(plotT) 
        table.cell    (tab2, column = 0, row = 0, text_color= chart.fg_color, text =  str.tostring(plotT))
        
    if choice >= 0 
        label.new(bar_index + 1, cl, text=arrT.get(choice), style=label.style_label_left)

    aSort = arrT.copy() 
    sort_Indices = array.sort_indices(id= aSort, order= order.ascending) 

    for i = 0 to 5
        ok    = 
         i < 1 ? show1 ? true : false :
         i < 2 ? show2 ? true : false :
         i < 3 ? show3 ? true : false :
         i < 4 ? show4 ? true : false :
         i < 5 ? show5 ? true : false : 
                 show6 ? true : false 
                 
        table.cell    (tab, column =  0 + (i * 6), row = 0, text_color= ok ? chart.fg_color : na, text =  ok ? 'Ticker' : '')
        table.cell    (tab, column =  1 + (i * 6), row = 0, text_color= ok ? chart.fg_color : na, text =  ok ?  '%ch'   : '')
        table.cell    (tab, column =  2 + (i * 6), row = 0, text_color= ok ? chart.fg_color : na, text =  ok ?  'SMA'   : '')
        table.cell    (tab, column =  3 + (i * 6), row = 0, text_color= ok ? chart.fg_color : na, text =  ok ?  'RMA'   : '')
        table.cell    (tab, column =  4 + (i * 6), row = 0, text_color= ok ? chart.fg_color : na, text =  ok ?  'RSI'   : '')
        if i < 5
            table.cell(tab, column =  5 + (i * 6), row = 0, bgcolor   = ok ? chart.bg_color : na, text =  ok ?  ' '     : '')
 
    for i = 0 to sz    
        index = iSort ? sort_Indices.get(i) : i
        clm   =     (i<20 ? 0 : i<40 ?   6 : i<60 ?  12 : i<80 ?  18 : i<100 ?  24 :  30)
        clm2  =     (i<20 ? 0 : i<40 ?   6 : i<60 ?  12 : i<80 ?  18 :          24      )
        rw    = i + (i<20 ? 1 : i<40 ? -19 : i<60 ? -39 : i<80 ? -59 : i<100 ? -79 : -99)
        ok    = 
         i < 20 ? show1 ? true : false :
         i < 40 ? show2 ? true : false :
         i < 60 ? show3 ? true : false :
         i < 80 ? show4 ? true : false :
         i <100 ? show5 ? true : false : 
                  show6 ? true : false 

        table.cell(tab, column = 0 + clm , row = rw, bgcolor=f_col   (       i    ), text_size=Tsz, text_color= ok ? chart.fg_color : na, text = ok ?                         arrT.get(index)                        : '')
        table.cell(tab, column = 1 + clm , row = rw, bgcolor=f_col_CH(       index), text_size=Tsz, text_color= ok ? chart.fg_color : na, text = ok ? str.tostring(           arrD.get(index).ch                   ) : '')
        table.cell(tab, column = 2 + clm , row = rw, bgcolor=f_col_MA('sma', index), text_size=Tsz, text_color= ok ? chart.fg_color : na, text = ok ? str.tostring(math.round(arrD.get(index).sma, arrR.get(index))) : '')
        table.cell(tab, column = 3 + clm , row = rw, bgcolor=f_col_MA('rma', index), text_size=Tsz, text_color= ok ? chart.fg_color : na, text = ok ? str.tostring(math.round(arrD.get(index).rma, arrR.get(index))) : '')
        table.cell(tab, column = 4 + clm , row = rw, bgcolor=f_colRSI(       index), text_size=Tsz, text_color= ok ? chart.fg_color : na, text = ok ? str.tostring(math.round(arrD.get(index).rsi,            2   )) : '')
        table.cell(tab, column = 5 + clm2, row = rw, bgcolor=                                                   ok ? chart.bg_color : na                                                                                 )
_                                                                                                                                                                                                                                                                                                             ='                                                                                                                                                                                                               
                             -------------------------------------------------------------------------------------------                                                                                                                                                                                      '
